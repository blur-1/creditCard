(self.webpackChunkcreditCard=self.webpackChunkcreditCard||[]).push([[179],{2011:(st,De,P)=>{"use strict";P.d(De,{hO:()=>Ue,xv:()=>ue,Dh:()=>oe,GT:()=>ce,cc:()=>Ee,on:()=>j,pX:()=>ne});var p=P(5e3),Y=P(127),O=P(5813);st=P.hmd(st);const se=["ngOnDestroy"],ne=(te,pe,we,ge={})=>new Proxy(te,{get:(Be,Te)=>we.runOutsideAngular(()=>{var et;if(te[Te])return(null===(et=null==ge?void 0:ge.spy)||void 0===et?void 0:et.get)&&ge.spy.get(Te,te[Te]),te[Te];if(se.indexOf(Te)>-1)return()=>{};const ze=pe.toPromise().then(dt=>{const Q=dt&&dt[Te];return"function"==typeof Q?Q.bind(dt):Q&&Q.then?Q.then(fe=>we.run(()=>fe)):we.run(()=>Q)});return new Proxy(()=>{},{get:(dt,Q)=>ze[Q],apply:(dt,Q,fe)=>ze.then(me=>{var ve;const Fe=me&&me(...fe);return(null===(ve=null==ge?void 0:ge.spy)||void 0===ve?void 0:ve.apply)&&ge.spy.apply(Te,fe,Fe),Fe})})})}),ce=(te,pe)=>{pe.forEach(we=>{Object.getOwnPropertyNames(we.prototype||we).forEach(ge=>{Object.defineProperty(te.prototype,ge,Object.getOwnPropertyDescriptor(we.prototype||we,ge))})})};class re{constructor(pe){return pe}}const oe=new p.OlP("angularfire2.app.options"),ue=new p.OlP("angularfire2.app.name");function j(te,pe,we){const Be="object"==typeof we&&we||{};Be.name=Be.name||"string"==typeof we&&we||"[DEFAULT]";const et=Y.Z.apps.filter(ze=>ze&&ze.name===Be.name)[0]||pe.runOutsideAngular(()=>Y.Z.initializeApp(te,Be));try{JSON.stringify(te)!==JSON.stringify(et.options)&&B("error",`${et.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ze){}return new re(et)}const B=(te,...pe)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[te](...pe)},J={provide:re,useFactory:j,deps:[oe,p.R0b,[new p.FiY,ue]]};let Ue=(()=>{class te{constructor(we){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",p.q4F.full,we.toString())}static initializeApp(we,ge){return{ngModule:te,providers:[{provide:oe,useValue:we},{provide:ue,useValue:ge}]}}}return te.\u0275fac=function(we){return new(we||te)(p.LFG(p.Lbi))},te.\u0275mod=p.oAB({type:te}),te.\u0275inj=p.cJS({providers:[J]}),te})();function Ee(te,pe,we,ge,Be){const[,Te,et]=globalThis.\u0275AngularfireInstanceCache.find(ze=>ze[0]===te)||[];if(Te)return function Oe(te,pe){try{return te.toString()===pe.toString()}catch(we){return te===pe}}(Be,et)||(K("error",`${pe} was already initialized on the ${we} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),K("warn",{is:Be,was:et})),Te;{const ze=ge();return globalThis.\u0275AngularfireInstanceCache.push([te,ze,Be]),ze}}const Ve=!!st.hot,K=(te,...pe)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[te](...pe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(st,De,P)=>{"use strict";P.d(De,{q4:()=>cd,iC:()=>io,HU:()=>Nl,vb:()=>sf,JM:()=>rf});var p=P(5e3),Y=P(5867),O=P(5861),se=P(9681),ne=P(2090),ce=P(4859),re=P(1877),oe=P(2940);const ue="@firebase/installations",j="0.5.5",J=`w:${j}`,Ue="FIS_v2",pe=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function we(b){return b instanceof ne.ZR&&b.code.includes("request-failed")}function ge({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Be(b){return{token:b.token,requestStatus:2,expiresIn:me(b.expiresIn),creationTime:Date.now()}}function Te(b,I){return et.apply(this,arguments)}function et(){return(et=(0,O.Z)(function*(b,I){const F=(yield I.json()).error;return pe.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function ze({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function dt(b,{refreshToken:I}){const N=ze(b);return N.append("Authorization",function ve(b){return`${Ue} ${b}`}(I)),N}function Q(b){return fe.apply(this,arguments)}function fe(){return(fe=(0,O.Z)(function*(b){const I=yield b();return I.status>=500&&I.status<600?b():I})).apply(this,arguments)}function me(b){return Number(b.replace("s","000"))}function Fe(b,I){return le.apply(this,arguments)}function le(){return(le=(0,O.Z)(function*(b,{fid:I}){const N=ge(b),ie={method:"POST",headers:ze(b),body:JSON.stringify({fid:I,authVersion:Ue,appId:b.appId,sdkVersion:J})},Se=yield Q(()=>fetch(N,ie));if(Se.ok){const Ge=yield Se.json();return{fid:Ge.fid||I,registrationStatus:2,refreshToken:Ge.refreshToken,authToken:Be(Ge.authToken)}}throw yield Te("Create Installation",Se)})).apply(this,arguments)}function Ct(b){return new Promise(I=>{setTimeout(I,b)})}const Kn=/^[cdef][\w-]{21}$/;function nt(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const N=function wr(b){return function jt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Kn.test(N)?N:""}catch(b){return""}}function rn(b){return`${b.appName}!${b.appId}`}const Tr=new Map;function Yt(b,I){const N=rn(b);In(N,I),function Ci(b,I){const N=function yn(){return!$t&&"BroadcastChannel"in self&&($t=new BroadcastChannel("[Firebase] FID Change"),$t.onmessage=b=>{In(b.data.key,b.data.fid)}),$t}();N&&N.postMessage({key:b,fid:I}),function Hs(){0===Tr.size&&$t&&($t.close(),$t=null)}()}(N,I)}function In(b,I){const N=Tr.get(b);if(N)for(const F of N)F(I)}let $t=null;const Ae="firebase-installations-store";let ir=null;function Je(){return ir||(ir=(0,oe.openDb)("firebase-installations-database",1,b=>{0===b.oldVersion&&b.createObjectStore(Ae)})),ir}function Jr(b,I){return zt.apply(this,arguments)}function zt(){return(zt=(0,O.Z)(function*(b,I){const N=rn(b),z=(yield Je()).transaction(Ae,"readwrite"),ie=z.objectStore(Ae),Se=yield ie.get(N);return yield ie.put(I,N),yield z.complete,(!Se||Se.fid!==I.fid)&&Yt(b,I.fid),I})).apply(this,arguments)}function Ln(b){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,O.Z)(function*(b){const I=rn(b),F=(yield Je()).transaction(Ae,"readwrite");yield F.objectStore(Ae).delete(I),yield F.complete})).apply(this,arguments)}function ht(b,I){return tt.apply(this,arguments)}function tt(){return(tt=(0,O.Z)(function*(b,I){const N=rn(b),z=(yield Je()).transaction(Ae,"readwrite"),ie=z.objectStore(Ae),Se=yield ie.get(N),Ge=I(Se);return void 0===Ge?yield ie.delete(N):yield ie.put(Ge,N),yield z.complete,Ge&&(!Se||Se.fid!==Ge.fid)&&Yt(b,Ge.fid),Ge})).apply(this,arguments)}function Mt(b){return pn.apply(this,arguments)}function pn(){return(pn=(0,O.Z)(function*(b){let I;const N=yield ht(b,F=>{const z=jr(F),ie=Rt(b,z);return I=ie.registrationPromise,ie.installationEntry});return""===N.fid?{installationEntry:yield I}:{installationEntry:N,registrationPromise:I}})).apply(this,arguments)}function jr(b){return _n(b||{fid:nt(),registrationStatus:0})}function Rt(b,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(pe.create("app-offline"))};const N={fid:I.fid,registrationStatus:1,registrationTime:Date.now()},F=function Xe(b,I){return ut.apply(this,arguments)}(b,N);return{installationEntry:N,registrationPromise:F}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:ol(b)}:{installationEntry:I}}function ut(){return(ut=(0,O.Z)(function*(b,I){try{return Jr(b,yield Fe(b,I))}catch(N){throw we(N)&&409===N.customData.serverCode?yield Ln(b):yield Jr(b,{fid:I.fid,registrationStatus:0}),N}})).apply(this,arguments)}function ol(b){return qs.apply(this,arguments)}function qs(){return(qs=(0,O.Z)(function*(b){let I=yield ft(b);for(;1===I.registrationStatus;)yield Ct(100),I=yield ft(b);if(0===I.registrationStatus){const{installationEntry:N,registrationPromise:F}=yield Mt(b);return F||N}return I})).apply(this,arguments)}function ft(b){return ht(b,I=>{if(!I)throw pe.create("installation-not-found");return _n(I)})}function _n(b){return function br(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Zi(b,I){return L.apply(this,arguments)}function L(){return(L=(0,O.Z)(function*({appConfig:b,platformLoggerProvider:I},N){const F=H(b,N),z=dt(b,N),ie=I.getImmediate({optional:!0});ie&&z.append("x-firebase-client",ie.getPlatformInfoString());const Ge={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:J}})},qe=yield Q(()=>fetch(F,Ge));if(qe.ok)return Be(yield qe.json());throw yield Te("Generate Auth Token",qe)})).apply(this,arguments)}function H(b,{fid:I}){return`${ge(b)}/${I}/authTokens:generate`}function G(b){return _e.apply(this,arguments)}function _e(){return(_e=(0,O.Z)(function*(b,I=!1){let N;const F=yield ht(b.appConfig,ie=>{if(!Cn(ie))throw pe.create("not-registered");const Se=ie.authToken;if(!I&&Dr(Se))return ie;if(1===Se.requestStatus)return N=X(b,I),ie;{if(!navigator.onLine)throw pe.create("app-offline");const Ge=sr(ie);return N=ln(b,Ge),Ge}});return N?yield N:F.authToken})).apply(this,arguments)}function X(b,I){return $e.apply(this,arguments)}function $e(){return($e=(0,O.Z)(function*(b,I){let N=yield gt(b.appConfig);for(;1===N.authToken.requestStatus;)yield Ct(100),N=yield gt(b.appConfig);const F=N.authToken;return 0===F.requestStatus?G(b,I):F})).apply(this,arguments)}function gt(b){return ht(b,I=>{if(!Cn(I))throw pe.create("not-registered");return function Ds(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function ln(b,I){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,O.Z)(function*(b,I){try{const N=yield Zi(b,I),F=Object.assign(Object.assign({},I),{authToken:N});return yield Jr(b.appConfig,F),N}catch(N){if(!we(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const F=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield Jr(b.appConfig,F)}else yield Ln(b.appConfig);throw N}})).apply(this,arguments)}function Cn(b){return void 0!==b&&2===b.registrationStatus}function Dr(b){return 2===b.requestStatus&&!function kt(b){const I=Date.now();return I<b.creationTime||b.creationTime+b.expiresIn<I+36e5}(b)}function sr(b){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:I})}function To(){return(To=(0,O.Z)(function*(b){const I=b,{installationEntry:N,registrationPromise:F}=yield Mt(I.appConfig);return F?F.catch(console.error):G(I).catch(console.error),N.fid})).apply(this,arguments)}function zs(){return(zs=(0,O.Z)(function*(b,I=!1){const N=b;return yield Zn(N.appConfig),(yield G(N,I)).token})).apply(this,arguments)}function Zn(b){return Un.apply(this,arguments)}function Un(){return(Un=(0,O.Z)(function*(b){const{registrationPromise:I}=yield Mt(b);I&&(yield I)})).apply(this,arguments)}function fa(b){return pe.create("missing-app-config-values",{valueName:b})}const $r="installations",At=b=>{const I=b.getProvider("app").getImmediate(),N=function Bn(b){if(!b||!b.options)throw fa("App Configuration");if(!b.name)throw fa("App Name");const I=["projectId","apiKey","appId"];for(const N of I)if(!b.options[N])throw fa(N);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(I);return{app:I,appConfig:N,platformLoggerProvider:(0,se._getProvider)(I,"platform-logger"),_delete:()=>Promise.resolve()}},Wt=b=>{const I=b.getProvider("app").getImmediate(),N=(0,se._getProvider)(I,$r).getImmediate();return{getId:()=>function al(b){return To.apply(this,arguments)}(N),getToken:z=>function iu(b){return zs.apply(this,arguments)}(N,z)}};(function An(){(0,se._registerComponent)(new ce.wA($r,At,"PUBLIC")),(0,se._registerComponent)(new ce.wA("installations-internal",Wt,"PRIVATE"))})(),(0,se.registerVersion)(ue,j),(0,se.registerVersion)(ue,j,"esm2017");const fr="@firebase/remote-config",Sn=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class tg{constructor(I,N,F,z){this.client=I,this.storage=N,this.storageCache=F,this.logger=z}isCachedDataFresh(I,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-N,z=F<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${z}.`),z}fetch(I){var N=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(z&&N.isCachedDataFresh(I.cacheMaxAgeMillis,F))return z;I.eTag=z&&z.eTag;const ie=yield N.client.fetch(I),Se=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&Se.push(N.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(Se),ie})()}}function $h(b=navigator){return b.languages&&b.languages[0]||b.language}class pi{constructor(I,N,F,z,ie,Se){this.firebaseInstallations=I,this.sdkVersion=N,this.namespace=F,this.projectId=z,this.apiKey=ie,this.appId=Se}fetch(I){var N=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Ge={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},qe={sdk_version:N.sdkVersion,app_instance_id:F,app_instance_id_token:z,app_id:N.appId,language_code:$h()},Vt={method:"POST",headers:Ge,body:JSON.stringify(qe)},qt=fetch(Se,Vt),ei=new Promise((vi,Vi)=>{I.signal.addEventListener(()=>{const qo=new Error("The operation was aborted.");qo.name="AbortError",Vi(qo)})});let Mn;try{yield Promise.race([qt,ei]),Mn=yield qt}catch(vi){let Vi="fetch-client-network";throw"AbortError"===vi.name&&(Vi="fetch-timeout"),Sn.create(Vi,{originalErrorMessage:vi.message})}let en=Mn.status;const Li=Mn.headers.get("ETag")||void 0;let _r,is;if(200===Mn.status){let vi;try{vi=yield Mn.json()}catch(Vi){throw Sn.create("fetch-client-parse",{originalErrorMessage:Vi.message})}_r=vi.entries,is=vi.state}if("INSTANCE_STATE_UNSPECIFIED"===is?en=500:"NO_CHANGE"===is?en=304:("NO_TEMPLATE"===is||"EMPTY_CONFIG"===is)&&(_r={}),304!==en&&200!==en)throw Sn.create("fetch-status",{httpStatus:en});return{status:en,eTag:Li,config:_r}})()}}class Vc{constructor(I,N){this.client=I,this.storage=N}fetch(I){var N=this;return(0,O.Z)(function*(){const F=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(I,F)})()}attemptFetch(I,{throttleEndTimeMillis:N,backoffCount:F}){var z=this;return(0,O.Z)(function*(){yield function ga(b,I){return new Promise((N,F)=>{const z=Math.max(I-Date.now(),0),ie=setTimeout(N,z);b.addEventListener(()=>{clearTimeout(ie),F(Sn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,N);try{const ie=yield z.client.fetch(I);return yield z.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function Hh(b){if(!(b instanceof ne.ZR&&b.customData))return!1;const I=Number(b.customData.httpStatus);return 429===I||500===I||503===I||504===I}(ie))throw ie;const Se={throttleEndTimeMillis:Date.now()+(0,ne.$s)(F),backoffCount:F+1};return yield z.storage.setThrottleMetadata(Se),z.attemptFetch(I,Se)}})()}}class ng{constructor(I,N,F,z,ie){this.app=I,this._client=N,this._storageCache=F,this._storage=z,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ma(b,I){const N=b.target.error||void 0;return Sn.create(I,{originalErrorMessage:N&&N.message})}const Co="app_namespace_store";class rg{constructor(I,N,F,z=function jc(){return new Promise((b,I)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=F=>{I(ma(F,"storage-open"))},N.onsuccess=F=>{b(F.target.result)},N.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Co,{keyPath:"compositeKey"})}}catch(N){I(Sn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=I,this.appName=N,this.namespace=F,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var N=this;return(0,O.Z)(function*(){const F=yield N.openDbPromise;return new Promise((z,ie)=>{const Ge=F.transaction([Co],"readonly").objectStore(Co),qe=N.createCompositeKey(I);try{const Vt=Ge.get(qe);Vt.onerror=qt=>{ie(ma(qt,"storage-get"))},Vt.onsuccess=qt=>{const ei=qt.target.result;z(ei?ei.value:void 0)}}catch(Vt){ie(Sn.create("storage-get",{originalErrorMessage:Vt&&Vt.message}))}})})()}set(I,N){var F=this;return(0,O.Z)(function*(){const z=yield F.openDbPromise;return new Promise((ie,Se)=>{const qe=z.transaction([Co],"readwrite").objectStore(Co),Vt=F.createCompositeKey(I);try{const qt=qe.put({compositeKey:Vt,value:N});qt.onerror=ei=>{Se(ma(ei,"storage-set"))},qt.onsuccess=()=>{ie()}}catch(qt){Se(Sn.create("storage-set",{originalErrorMessage:qt&&qt.message}))}})})()}delete(I){var N=this;return(0,O.Z)(function*(){const F=yield N.openDbPromise;return new Promise((z,ie)=>{const Ge=F.transaction([Co],"readwrite").objectStore(Co),qe=N.createCompositeKey(I);try{const Vt=Ge.delete(qe);Vt.onerror=qt=>{ie(ma(qt,"storage-delete"))},Vt.onsuccess=()=>{z()}}catch(Vt){ie(Sn.create("storage-delete",{originalErrorMessage:Vt&&Vt.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class $c{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,O.Z)(function*(){const N=I.storage.getLastFetchStatus(),F=I.storage.getLastSuccessfulFetchTimestampMillis(),z=I.storage.getActiveConfig(),ie=yield N;ie&&(I.lastFetchStatus=ie);const Se=yield F;Se&&(I.lastSuccessfulFetchTimestampMillis=Se);const Ge=yield z;Ge&&(I.activeConfig=Ge)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function Hc(){return dl.apply(this,arguments)}function dl(){return(dl=(0,O.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(b){return!1}})).apply(this,arguments)}!function ig(){(0,se._registerComponent)(new ce.wA("remote-config",function b(I,{instanceIdentifier:N}){const F=I.getProvider("app").getImmediate(),z=I.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Sn.create("registration-window");if(!(0,ne.hl)())throw Sn.create("indexed-db-unavailable");const{projectId:ie,apiKey:Se,appId:Ge}=F.options;if(!ie)throw Sn.create("registration-project-id");if(!Se)throw Sn.create("registration-api-key");if(!Ge)throw Sn.create("registration-app-id");const qe=new rg(Ge,F.name,N=N||"firebase"),Vt=new $c(qe),qt=new re.Yd(fr);qt.logLevel=re.in.ERROR;const ei=new pi(z,se.SDK_VERSION,N,ie,Se,Ge),Mn=new Vc(ei,qe),en=new tg(Mn,qe,Vt,qt),Li=new ng(F,en,Vt,qe,qt);return function sn(b){const I=(0,ne.m9)(b);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(Li),Li},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(fr,"0.3.4"),(0,se.registerVersion)(fr,"0.3.4","esm2017")}();const Gc="/firebase-messaging-sw.js",Ys="/firebase-cloud-messaging-push-scope",su="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Qs="google.c.a.c_id",va="google.c.a.c_l",Cs="google.c.a.ts",Ea="google.c.a.e";var pr=(()=>{return(b=pr||(pr={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",pr;var b})();function gi(b){const I=new Uint8Array(b);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hl(b){const N=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(N),z=new Uint8Array(F.length);for(let ie=0;ie<F.length;++ie)z[ie]=F.charCodeAt(ie);return z}const Hr="fcm_token_details_db",zc="fcm_token_object_Store";function ou(b){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,O.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(Hr))return null;let I=null;return(yield(0,oe.openDb)(Hr,5,function(){var F=(0,O.Z)(function*(z){var ie;if(z.oldVersion<2||!z.objectStoreNames.contains(zc))return;const Se=z.transaction.objectStore(zc),Ge=yield Se.index("fcmSenderId").get(b);if(yield Se.clear(),Ge)if(2===z.oldVersion){const qe=Ge;if(!qe.auth||!qe.p256dh||!qe.endpoint)return;I={token:qe.fcmToken,createTime:null!==(ie=qe.createTime)&&void 0!==ie?ie:Date.now(),subscriptionOptions:{auth:qe.auth,p256dh:qe.p256dh,endpoint:qe.endpoint,swScope:qe.swScope,vapidKey:"string"==typeof qe.vapidKey?qe.vapidKey:gi(qe.vapidKey)}}}else if(3===z.oldVersion){const qe=Ge;I={token:qe.fcmToken,createTime:qe.createTime,subscriptionOptions:{auth:gi(qe.auth),p256dh:gi(qe.p256dh),endpoint:qe.endpoint,swScope:qe.swScope,vapidKey:gi(qe.vapidKey)}}}else if(4===z.oldVersion){const qe=Ge;I={token:qe.fcmToken,createTime:qe.createTime,subscriptionOptions:{auth:gi(qe.auth),p256dh:gi(qe.p256dh),endpoint:qe.endpoint,swScope:qe.swScope,vapidKey:gi(qe.vapidKey)}}}});return function(z){return F.apply(this,arguments)}}())).close(),yield(0,oe.deleteDb)(Hr),yield(0,oe.deleteDb)("fcm_vapid_details_db"),yield(0,oe.deleteDb)("undefined"),fl(I)?I:null}),Wc.apply(this,arguments)}function fl(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:I}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}const As="firebase-messaging-store";let Zc=null;function on(){return Zc||(Zc=(0,oe.openDb)("firebase-messaging-database",1,b=>{0===b.oldVersion&&b.createObjectStore(As)})),Zc}function qh(b){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,O.Z)(function*(b){const I=Ni(b),F=yield(yield on()).transaction(As).objectStore(As).get(I);if(F)return F;{const z=yield ou(b.appConfig.senderId);if(z)return yield Hn(b,z),z}})).apply(this,arguments)}function Hn(b,I){return xn.apply(this,arguments)}function xn(){return(xn=(0,O.Z)(function*(b,I){const N=Ni(b),z=(yield on()).transaction(As,"readwrite");return yield z.objectStore(As).put(I,N),yield z.complete,I})).apply(this,arguments)}function Qi(b){return So.apply(this,arguments)}function So(){return(So=(0,O.Z)(function*(b){const I=Ni(b),F=(yield on()).transaction(As,"readwrite");yield F.objectStore(As).delete(I),yield F.complete})).apply(this,arguments)}function Ni({appConfig:b}){return b.appId}const Gn=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function xi(b,I){return pl.apply(this,arguments)}function pl(){return(pl=(0,O.Z)(function*(b,I){const N=yield Ta(b),F=Ro(I),z={method:"POST",headers:N,body:JSON.stringify(F)};let ie;try{ie=yield(yield fetch(Qn(b.appConfig),z)).json()}catch(Se){throw Gn.create("token-subscribe-failed",{errorInfo:Se})}if(ie.error)throw Gn.create("token-subscribe-failed",{errorInfo:ie.error.message});if(!ie.token)throw Gn.create("token-subscribe-no-token");return ie.token})).apply(this,arguments)}function Ar(b,I){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(b,I){const N=yield Ta(b),F=Ro(I.subscriptionOptions),z={method:"PATCH",headers:N,body:JSON.stringify(F)};let ie;try{ie=yield(yield fetch(`${Qn(b.appConfig)}/${I.token}`,z)).json()}catch(Se){throw Gn.create("token-update-failed",{errorInfo:Se})}if(ie.error)throw Gn.create("token-update-failed",{errorInfo:ie.error.message});if(!ie.token)throw Gn.create("token-update-no-token");return ie.token})).apply(this,arguments)}function Mo(b,I){return pt.apply(this,arguments)}function pt(){return(pt=(0,O.Z)(function*(b,I){const F={method:"DELETE",headers:yield Ta(b)};try{const ie=yield(yield fetch(`${Qn(b.appConfig)}/${I}`,F)).json();if(ie.error)throw Gn.create("token-unsubscribe-failed",{errorInfo:ie.error.message})}catch(z){throw Gn.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function Qn({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Ta(b){return ba.apply(this,arguments)}function ba(){return(ba=(0,O.Z)(function*({appConfig:b,installations:I}){const N=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function Ro({p256dh:b,auth:I,endpoint:N,vapidKey:F}){const z={web:{endpoint:N,auth:I,p256dh:b}};return F!==su&&(z.web.applicationPubKey=F),z}const No=6048e5;function gl(b){return au.apply(this,arguments)}function au(){return(au=(0,O.Z)(function*(b){const I=yield Sr(b.swRegistration,b.vapidKey),N={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:I.endpoint,auth:gi(I.getKey("auth")),p256dh:gi(I.getKey("p256dh"))},F=yield qh(b.firebaseDependencies);if(F){if(lu(F.subscriptionOptions,N))return Date.now()>=F.createTime+No?uu(b,{token:F.token,createTime:Date.now(),subscriptionOptions:N}):F.token;try{yield Mo(b.firebaseDependencies,F.token)}catch(z){console.warn(z)}return Js(b.firebaseDependencies,N)}return Js(b.firebaseDependencies,N)})).apply(this,arguments)}function Ie(b){return xt.apply(this,arguments)}function xt(){return(xt=(0,O.Z)(function*(b){const I=yield qh(b.firebaseDependencies);I&&(yield Mo(b.firebaseDependencies,I.token),yield Qi(b.firebaseDependencies));const N=yield b.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function uu(b,I){return an.apply(this,arguments)}function an(){return(an=(0,O.Z)(function*(b,I){try{const N=yield Ar(b.firebaseDependencies,I),F=Object.assign(Object.assign({},I),{token:N,createTime:Date.now()});return yield Hn(b.firebaseDependencies,F),N}catch(N){throw yield Ie(b),N}})).apply(this,arguments)}function Js(b,I){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,O.Z)(function*(b,I){const F={token:yield xi(b,I),createTime:Date.now(),subscriptionOptions:I};return yield Hn(b,F),F.token})).apply(this,arguments)}function Sr(b,I){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,O.Z)(function*(b,I){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:hl(I)})})).apply(this,arguments)}function lu(b,I){return I.vapidKey===b.vapidKey&&I.endpoint===b.endpoint&&I.auth===b.auth&&I.p256dh===b.p256dh}function cu(b){const I={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function du(b,I){if(!I.notification)return;b.notification={};const N=I.notification.title;N&&(b.notification.title=N);const F=I.notification.body;F&&(b.notification.body=F);const z=I.notification.image;z&&(b.notification.image=z)}(I,b),function xo(b,I){!I.data||(b.data=I.data)}(I,b),function Da(b,I){if(!I.fcmOptions)return;b.fcmOptions={};const N=I.fcmOptions.link;N&&(b.fcmOptions.link=N);const F=I.fcmOptions.analytics_label;F&&(b.fcmOptions.analyticsLabel=F)}(I,b),I}function qn(b){return"object"==typeof b&&!!b&&Qs in b}function mi(b,I){const N=[];for(let F=0;F<b.length;F++)N.push(b.charAt(F)),F<I.length&&N.push(I.charAt(F));return N.join("")}function Xi(b){return Gn.create("missing-app-config-values",{valueName:b})}mi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),mi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yi{constructor(I,N,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function hu(b){if(!b||!b.options)throw Xi("App Configuration Object");if(!b.name)throw Xi("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:N}=b;for(const F of I)if(!N[F])throw Xi(F);return{appName:b.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:z,installations:N,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Yc(b){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,O.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Gc,{scope:Ys}),b.swRegistration.update().catch(()=>{})}catch(I){throw Gn.create("failed-service-worker-registration",{browserErrorMessage:I.message})}})).apply(this,arguments)}function fu(b,I){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,O.Z)(function*(b,I){if(!I&&!b.swRegistration&&(yield Yc(b)),I||!b.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw Gn.create("invalid-sw-registration");b.swRegistration=I}})).apply(this,arguments)}function Po(b,I){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,O.Z)(function*(b,I){I?b.vapidKey=I:b.vapidKey||(b.vapidKey=su)})).apply(this,arguments)}function Sa(){return(Sa=(0,O.Z)(function*(b,I){if(!navigator)throw Gn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Gn.create("permission-blocked");return yield Po(b,null==I?void 0:I.vapidKey),yield fu(b,null==I?void 0:I.serviceWorkerRegistration),gl(b)})).apply(this,arguments)}function pu(b,I,N){return ml.apply(this,arguments)}function ml(){return(ml=(0,O.Z)(function*(b,I,N){const F=ko(I);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:N[Qs],message_name:N[va],message_time:N[Cs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ko(b){switch(b){case pr.NOTIFICATION_CLICKED:return"notification_open";case pr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ma(){return(Ma=(0,O.Z)(function*(b,I){const N=I.data;if(!N.isFirebaseMessaging)return;b.onMessageHandler&&N.messageType===pr.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(cu(N)):b.onMessageHandler.next(cu(N)));const F=N.data;qn(F)&&"1"===F[Ea]&&(yield pu(b,N.messageType,F))})).apply(this,arguments)}const yl="@firebase/messaging",gu=b=>{const I=new yi(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function Qc(b,I){return Ma.apply(this,arguments)}(I,N)),I},Jc=b=>{const I=b.getProvider("messaging").getImmediate();return{getToken:F=>function Aa(b,I){return Sa.apply(this,arguments)}(I,F)}};function Jn(){return On.apply(this,arguments)}function On(){return(On=(0,O.Z)(function*(){try{yield(0,ne.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function sg(){(0,se._registerComponent)(new ce.wA("messaging",gu,"PUBLIC")),(0,se._registerComponent)(new ce.wA("messaging-internal",Jc,"PRIVATE")),(0,se.registerVersion)(yl,"0.9.8"),(0,se.registerVersion)(yl,"0.9.8","esm2017")}();const Rs="analytics",mu="firebase_id",ed="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",es="https://www.googletagmanager.com/gtag/js",En=new re.Yd("@firebase/analytics");function Yh(b){return Promise.all(b.map(I=>I.catch(N=>N)))}function og(b,I){const N=document.createElement("script");N.src=`${es}?l=${b}&id=${I}`,N.async=!0,document.head.appendChild(N)}function _u(b,I,N,F,z,ie){return td.apply(this,arguments)}function td(){return(td=(0,O.Z)(function*(b,I,N,F,z,ie){const Se=F[z];try{if(Se)yield I[Se];else{const qe=(yield Yh(N)).find(Vt=>Vt.measurementId===z);qe&&(yield I[qe.appId])}}catch(Ge){En.error(Ge)}b("config",z,ie)})).apply(this,arguments)}function Xs(b,I,N,F,z){return El.apply(this,arguments)}function El(){return(El=(0,O.Z)(function*(b,I,N,F,z){try{let ie=[];if(z&&z.send_to){let Se=z.send_to;Array.isArray(Se)||(Se=[Se]);const Ge=yield Yh(N);for(const qe of Se){const Vt=Ge.find(ei=>ei.measurementId===qe),qt=Vt&&I[Vt.appId];if(!qt){ie=[];break}ie.push(qt)}}0===ie.length&&(ie=Object.values(I)),yield Promise.all(ie),b("event",F,z||{})}catch(ie){En.error(ie)}})).apply(this,arguments)}function mn(){const b=window.document.getElementsByTagName("script");for(const I of Object.values(b))if(I.src&&I.src.includes(es))return I;return null}const ar=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),nd=new class Oa{constructor(I={},N=1e3){this.throttleMetadata=I,this.intervalMillis=N}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,N){this.throttleMetadata[I]=N}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function Pa(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function ka(b){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,O.Z)(function*(b){var I;const{appId:N,apiKey:F}=b,z={method:"GET",headers:Pa(F)},ie=ed.replace("{app-id}",N),Se=yield fetch(ie,z);if(200!==Se.status&&304!==Se.status){let Ge="";try{const qe=yield Se.json();(null===(I=qe.error)||void 0===I?void 0:I.message)&&(Ge=qe.error.message)}catch(qe){}throw ar.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:Ge})}return Se.json()})).apply(this,arguments)}function gr(b){return _t.apply(this,arguments)}function _t(){return(_t=(0,O.Z)(function*(b,I=nd,N){const{appId:F,apiKey:z,measurementId:ie}=b.options;if(!F)throw ar.create("no-app-id");if(!z){if(ie)return{measurementId:ie,appId:F};throw ar.create("no-api-key")}const Se=I.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ge=new bl;return setTimeout((0,O.Z)(function*(){Ge.abort()}),void 0!==N?N:6e4),Fa({appId:F,apiKey:z,measurementId:ie},Se,Ge,I)})).apply(this,arguments)}function Fa(b,I,N){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,O.Z)(function*(b,{throttleEndTimeMillis:I,backoffCount:N},F,z=nd){const{appId:ie,measurementId:Se}=b;try{yield rd(F,I)}catch(Ge){if(Se)return En.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Ge.message}]`),{appId:ie,measurementId:Se};throw Ge}try{const Ge=yield ka(b);return z.deleteThrottleMetadata(ie),Ge}catch(Ge){if(!Fo(Ge)){if(z.deleteThrottleMetadata(ie),Se)return En.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Ge.message}]`),{appId:ie,measurementId:Se};throw Ge}const qe=503===Number(Ge.customData.httpStatus)?(0,ne.$s)(N,z.intervalMillis,30):(0,ne.$s)(N,z.intervalMillis),Vt={throttleEndTimeMillis:Date.now()+qe,backoffCount:N+1};return z.setThrottleMetadata(ie,Vt),En.debug(`Calling attemptFetch again in ${qe} millis`),Fa(b,Vt,F,z)}})).apply(this,arguments)}function rd(b,I){return new Promise((N,F)=>{const z=Math.max(I-Date.now(),0),ie=setTimeout(N,z);b.addEventListener(()=>{clearTimeout(ie),F(ar.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}function Fo(b){if(!(b instanceof ne.ZR&&b.customData))return!1;const I=Number(b.customData.httpStatus);return 429===I||500===I||503===I||504===I}class bl{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}function Lo(){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,O.Z)(function*(){if(!(0,ne.hl)())return En.warn(ar.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(b){return En.warn(ar.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function Vo(){return(Vo=(0,O.Z)(function*(b,I,N,F,z,ie,Se){var Ge;const qe=gr(b);qe.then(en=>{N[en.measurementId]=en.appId,b.options.measurementId&&en.measurementId!==b.options.measurementId&&En.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${en.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(en=>En.error(en)),I.push(qe);const Vt=Lo().then(en=>{if(en)return F.getId()}),[qt,ei]=yield Promise.all([qe,Vt]);mn()||og(ie,qt.measurementId),z("js",new Date);const Mn=null!==(Ge=null==Se?void 0:Se.config)&&void 0!==Ge?Ge:{};return Mn.origin="firebase",Mn.update=!0,null!=ei&&(Mn[mu]=ei),z("config",qt.measurementId,Mn),qt.measurementId})).apply(this,arguments)}class vu{constructor(I){this.app=I}_delete(){return delete Pi[this.app.options.appId],Promise.resolve()}}let Pi={},Dl=[];const Il={};let La,Gt,Uo="dataLayer",ki=!1;function eo(b,I,N){!function mr(){const b=[];if((0,ne.ru)()&&b.push("This is a browser extension environment."),(0,ne.zI)()||b.push("Cookies are not available."),b.length>0){const I=b.map((F,z)=>`(${z+1}) ${F}`).join(" "),N=ar.create("invalid-analytics-context",{errorInfo:I});En.warn(N.message)}}();const F=b.options.appId;if(!F)throw ar.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw ar.create("no-api-key");En.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Pi[F])throw ar.create("already-exists",{id:F});if(!ki){!function xa(b){let I=[];Array.isArray(window[b])?I=window[b]:window[b]=I}(Uo);const{wrappedGtag:ie,gtagCore:Se}=function wl(b,I,N,F,z){let ie=function(...Se){window[F].push(arguments)};return window[z]&&"function"==typeof window[z]&&(ie=window[z]),window[z]=function Qh(b,I,N,F){function ie(){return(ie=(0,O.Z)(function*(Se,Ge,qe){try{"event"===Se?yield Xs(b,I,N,Ge,qe):"config"===Se?yield _u(b,I,N,F,Ge,qe):b("set",Ge)}catch(Vt){En.error(Vt)}})).apply(this,arguments)}return function z(Se,Ge,qe){return ie.apply(this,arguments)}}(ie,b,I,N),{gtagCore:ie,wrappedGtag:window[z]}}(Pi,Dl,Il,Uo,"gtag");Gt=ie,La=Se,ki=!0}return Pi[F]=function Gr(b,I,N,F,z,ie,Se){return Vo.apply(this,arguments)}(b,Dl,Il,I,La,Uo,N),new vu(b)}function Bo(){return(Bo=(0,O.Z)(function*(b,I,N,F,z){if(z&&z.global)b("event",N,F);else{const ie=yield I;b("event",N,Object.assign(Object.assign({},F),{send_to:ie}))}})).apply(this,arguments)}function Eu(){return Al.apply(this,arguments)}function Al(){return(Al=(0,O.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(b){return!1}})).apply(this,arguments)}const Ns="@firebase/analytics";!function Tn(){(0,se._registerComponent)(new ce.wA(Rs,(I,{options:N})=>eo(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,se._registerComponent)(new ce.wA("analytics-internal",function b(I){try{const N=I.getProvider(Rs).getImmediate();return{logEvent:(F,z,ie)=>function Sl(b,I,N,F){b=(0,ne.m9)(b),function wn(b,I,N,F,z){return Bo.apply(this,arguments)}(Gt,Pi[b.app.options.appId],I,N,F).catch(z=>En.error(z))}(N,F,z,ie)}}catch(N){throw ar.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,se.registerVersion)(Ns,"0.7.5"),(0,se.registerVersion)(Ns,"0.7.5","esm2017")}();var Va=P(4408),nf=P(7565);const Pn=new class ld extends nf.v{}(class _i extends Va.o{constructor(I,N){super(I,N),this.scheduler=I,this.work=N}schedule(I,N=0){return N>0?super.schedule(I,N):(this.delay=N,this.state=I,this.scheduler.flush(this),this)}execute(I,N){return N>0||this.closed?super.execute(I,N):this._execute(I,N)}requestAsyncId(I,N,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(I,N,F):I.flush(this)}});var Ml=P(4986),wu=P(8505),Ua=P(9468),Rl=P(5363);const cd=new p.GfV("7.2.1"),xs="__angularfire_symbol__analyticsIsSupportedValue",Ba="__angularfire_symbol__analyticsIsSupported",dd="__angularfire_symbol__remoteConfigIsSupportedValue",Ho="__angularfire_symbol__remoteConfigIsSupported",Xn="__angularfire_symbol__messagingIsSupportedValue",Tu="__angularfire_symbol__messagingIsSupported";function rf(b,I,N){if(I){if(1===I.length)return I[0];const ie=I.filter(Se=>Se.app===N);if(1===ie.length)return ie[0]}return N.container.getProvider(b).getImmediate({optional:!0})}globalThis[Ba]||(globalThis[Ba]=Eu().then(b=>globalThis[xs]=b).catch(()=>globalThis[xs]=!1)),globalThis[Tu]||(globalThis[Tu]=Jn().then(b=>globalThis[Xn]=b).catch(()=>globalThis[Xn]=!1)),globalThis[Ho]||(globalThis[Ho]=Hc().then(b=>globalThis[dd]=b).catch(()=>globalThis[dd]=!1));const sf=(b,I)=>{const N=I?[I]:(0,Y.C6)(),F=[];return N.forEach(z=>{z.container.getProvider(b).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function ro(){}class hd{constructor(I,N=Pn){this.zone=I,this.delegate=N}now(){return this.delegate.now()}schedule(I,N,F){const z=this.zone;return this.delegate.schedule(function(Se){z.runGuarded(()=>{I.apply(this,[Se])})},N,F)}}class bu{constructor(I){this.zone=I,this.task=null}call(I,N){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ro,{},ro,ro)),N.pipe((0,wu.b)({next:F,complete:F,error:F})).subscribe(I).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Nl=(()=>{class b{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new hd(Zone.current)),this.insideAngular=N.run(()=>new hd(Zone.current,Ml.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(N){return new(N||b)(p.LFG(p.R0b))},b.\u0275prov=p.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function yr(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function io(b){return yr(),function Go(b){return function(N){return(N=N.lift(new bu(b.ngZone))).pipe((0,Ua.R)(b.outsideAngular),(0,Rl.Q)(b.insideAngular))}}(yr())(b)}},2090:(st,De,P)=>{"use strict";P.d(De,{BH:()=>Ue,LL:()=>le,ZR:()=>Fe,zI:()=>fe,US:()=>ce,tV:()=>ue,$s:()=>ft,r3:()=>li,Sg:()=>Ee,ne:()=>ir,vZ:()=>$t,ZB:()=>B,pd:()=>Ki,m9:()=>Zi,z$:()=>Oe,jU:()=>te,ru:()=>pe,d:()=>ge,xb:()=>In,w1:()=>Be,hl:()=>dt,uI:()=>Ve,UG:()=>K,b$:()=>we,G6:()=>ze,Mn:()=>Te,xO:()=>Hs,zd:()=>Br,eu:()=>Q});const se=function(L){const H=[];let G=0;for(let _e=0;_e<L.length;_e++){let X=L.charCodeAt(_e);X<128?H[G++]=X:X<2048?(H[G++]=X>>6|192,H[G++]=63&X|128):55296==(64512&X)&&_e+1<L.length&&56320==(64512&L.charCodeAt(_e+1))?(X=65536+((1023&X)<<10)+(1023&L.charCodeAt(++_e)),H[G++]=X>>18|240,H[G++]=X>>12&63|128,H[G++]=X>>6&63|128,H[G++]=63&X|128):(H[G++]=X>>12|224,H[G++]=X>>6&63|128,H[G++]=63&X|128)}return H},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,H){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let X=0;X<L.length;X+=3){const $e=L[X],gt=X+1<L.length,ln=gt?L[X+1]:0,Vn=X+2<L.length,Cn=Vn?L[X+2]:0;let sr=(15&ln)<<2|Cn>>6,Ds=63&Cn;Vn||(Ds=64,gt||(sr=64)),_e.push(G[$e>>2],G[(3&$e)<<4|ln>>4],G[sr],G[Ds])}return _e.join("")},encodeString(L,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(L):this.encodeByteArray(se(L),H)},decodeString(L,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(L):function(L){const H=[];let G=0,_e=0;for(;G<L.length;){const X=L[G++];if(X<128)H[_e++]=String.fromCharCode(X);else if(X>191&&X<224){const $e=L[G++];H[_e++]=String.fromCharCode((31&X)<<6|63&$e)}else if(X>239&&X<365){const Vn=((7&X)<<18|(63&L[G++])<<12|(63&L[G++])<<6|63&L[G++])-65536;H[_e++]=String.fromCharCode(55296+(Vn>>10)),H[_e++]=String.fromCharCode(56320+(1023&Vn))}else{const $e=L[G++],gt=L[G++];H[_e++]=String.fromCharCode((15&X)<<12|(63&$e)<<6|63&gt)}}return H.join("")}(this.decodeStringToByteArray(L,H))},decodeStringToByteArray(L,H){this.init_();const G=H?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let X=0;X<L.length;){const $e=G[L.charAt(X++)],ln=X<L.length?G[L.charAt(X)]:0;++X;const Cn=X<L.length?G[L.charAt(X)]:64;++X;const kt=X<L.length?G[L.charAt(X)]:64;if(++X,null==$e||null==ln||null==Cn||null==kt)throw Error();_e.push($e<<2|ln>>4),64!==Cn&&(_e.push(ln<<4&240|Cn>>2),64!==kt&&_e.push(Cn<<6&192|kt))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},oe=function(L){return function(L){const H=se(L);return ce.encodeByteArray(H,!0)}(L).replace(/\./g,"")},ue=function(L){try{return ce.decodeString(L,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function B(L,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return H}for(const G in H)!H.hasOwnProperty(G)||!J(G)||(L[G]=B(L[G],H[G]));return L}function J(L){return"__proto__"!==L}class Ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,G)=>{this.resolve=H,this.reject=G})}wrapCallback(H){return(G,_e)=>{G?this.reject(G):this.resolve(_e),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(G):H(G,_e))}}}function Ee(L,H){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=H||"demo-project",X=L.iat||0,$e=L.sub||L.user_id;if(!$e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gt=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:X,exp:X+3600,auth_time:X,sub:$e,user_id:$e,firebase:{sign_in_provider:"custom",identities:{}}},L);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(gt)),""].join(".")}function Oe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function K(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function te(){return"object"==typeof self&&self.self===self}function pe(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function we(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ge(){return Oe().indexOf("Electron/")>=0}function Be(){const L=Oe();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function Te(){return Oe().indexOf("MSAppHost/")>=0}function ze(){return!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dt(){return"object"==typeof indexedDB}function Q(){return new Promise((L,H)=>{try{let G=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(_e);X.onsuccess=()=>{X.result.close(),G||self.indexedDB.deleteDatabase(_e),L(!0)},X.onupgradeneeded=()=>{G=!1},X.onerror=()=>{var $e;H((null===($e=X.error)||void 0===$e?void 0:$e.message)||"")}}catch(G){H(G)}})}function fe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Fe extends Error{constructor(H,G,_e){super(G),this.code=H,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,Fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,le.prototype.create)}}class le{constructor(H,G,_e){this.service=H,this.serviceName=G,this.errors=_e}create(H,...G){const _e=G[0]||{},X=`${this.service}/${H}`,$e=this.errors[H],gt=$e?function Ct(L,H){return L.replace(jt,(G,_e)=>{const X=H[_e];return null!=X?String(X):`<${_e}?>`})}($e,_e):"Error";return new Fe(X,`${this.serviceName}: ${gt} (${X}).`,_e)}}const jt=/\{\$([^}]+)}/g;function li(L,H){return Object.prototype.hasOwnProperty.call(L,H)}function In(L){for(const H in L)if(Object.prototype.hasOwnProperty.call(L,H))return!1;return!0}function $t(L,H){if(L===H)return!0;const G=Object.keys(L),_e=Object.keys(H);for(const X of G){if(!_e.includes(X))return!1;const $e=L[X],gt=H[X];if(yn($e)&&yn(gt)){if(!$t($e,gt))return!1}else if($e!==gt)return!1}for(const X of _e)if(!G.includes(X))return!1;return!0}function yn(L){return null!==L&&"object"==typeof L}function Hs(L){const H=[];for(const[G,_e]of Object.entries(L))Array.isArray(_e)?_e.forEach(X=>{H.push(encodeURIComponent(G)+"="+encodeURIComponent(X))}):H.push(encodeURIComponent(G)+"="+encodeURIComponent(_e));return H.length?"&"+H.join("&"):""}function Br(L){const H={};return L.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[X,$e]=_e.split("=");H[decodeURIComponent(X)]=decodeURIComponent($e)}}),H}function Ki(L){const H=L.indexOf("?");if(!H)return"";const G=L.indexOf("#",H);return L.substring(H,G>0?G:void 0)}function ir(L,H){const G=new Je(L,H);return G.subscribe.bind(G)}class Je{constructor(H,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{H(this)}).catch(_e=>{this.error(_e)})}next(H){this.forEachObserver(G=>{G.next(H)})}error(H){this.forEachObserver(G=>{G.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,G,_e){let X;if(void 0===H&&void 0===G&&void 0===_e)throw new Error("Missing Observer.");X=function zt(L,H){if("object"!=typeof L||null===L)return!1;for(const G of H)if(G in L&&"function"==typeof L[G])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:G,complete:_e},void 0===X.next&&(X.next=Ln),void 0===X.error&&(X.error=Ln),void 0===X.complete&&(X.complete=Ln);const $e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch(gt){}}),this.observers.push(X),$e}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,H)}sendOne(H,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{G(this.observers[H])}catch(_e){"undefined"!=typeof console&&console.error&&console.error(_e)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ln(){}function ft(L,H=1e3,G=2){const _e=H*Math.pow(G,L),X=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+X)}function Zi(L){return L&&L._delegate?L._delegate:L}},1373:(st,De,P)=>{"use strict";var p=P(5e3);let Y=null;function O(){return Y}const re=new p.OlP("DocumentToken");let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function ue(){return(0,p.LFG)(B)}()},providedIn:"platform"}),n})();const j=new p.OlP("Location Initialized");let B=(()=>{class n extends oe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){J()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){J()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(re))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Ue(){return new B((0,p.LFG)(re))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Ee(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let K=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function te(n){const e=(0,p.LFG)(re).location;return new we((0,p.LFG)(oe),e&&e.origin||"")}()},providedIn:"root"}),n})();const pe=new p.OlP("appBaseHref");let we=(()=>{class n extends K{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ee(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ve(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Ve(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Ve(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe),p.LFG(pe,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),ge=(()=>{class n extends K{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ee(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Ve(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Ve(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe),p.LFG(pe,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Be=(()=>{class n{constructor(t,r){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe(ze(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ve(r))}normalize(t){return n.stripTrailingSlash(function et(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=Ee,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(p.LFG(K),p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Te(){return new Be((0,p.LFG)(K),(0,p.LFG)(oe))}()},providedIn:"root"}),n})();function ze(n){return n.replace(/\/index.html$/,"")}var fe=(()=>((fe=fe||{})[fe.Zero=0]="Zero",fe[fe.One=1]="One",fe[fe.Two=2]="Two",fe[fe.Few=3]="Few",fe[fe.Many=4]="Many",fe[fe.Other=5]="Other",fe))();const Ki=p.kL8;class Ht{}let Sn=(()=>{class n extends Ht{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Ki(r||this.locale)(t)){case fe.Zero:return"zero";case fe.One:return"one";case fe.Two:return"two";case fe.Few:return"few";case fe.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.soG))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Si{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $n=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Si(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),Do(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Do(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Do(n,e){n.context.$implicit=e.item}let or=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new sn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){kc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){kc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class sn{constructor(){this.$implicit=null,this.ngIf=null}}function kc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let Ea=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[{provide:Ht,useClass:Sn}]}),n})();function wa(n){return"server"===n}let fl=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Kc((0,p.LFG)(re),window)}),n})();class Kc{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function As(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Kt(this.window.history)||Kt(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Kt(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ao extends class qh extends class ce{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(n){Y||(Y=n)}(new Ao)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function xn(){return Hn=Hn||document.querySelector("base"),Hn?Hn.getAttribute("href"):null}();return null==t?null:function So(n){Qi=Qi||document.createElement("a"),Qi.setAttribute("href",n);const e=Qi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Hn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function bo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Qi,Hn=null;const Ni=new p.OlP("TRANSITION_ID"),Gn=[{provide:p.ip1,useFactory:function Cr(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Ni,re,p.zs3],multi:!0}];class xi{static init(){(0,p.VLi)(new xi)}addToWindow(e){p.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const o=p.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(E){d=d||E,u--,0==u&&r(d)};o.forEach(function(E){E.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let pl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ar=new p.OlP("EventManagerPlugins");let Ss=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ar),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Mo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let pt=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Qn=(()=>{class n extends pt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ta),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ta))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(re))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Ta(n){O().remove(n)}const ba={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ro=/%COMP%/g;function an(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?an(n,o,t):(o=o.replace(Ro,n),t.push(o))}return t}function Js(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Sr=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Ji(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new du(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case p.ifc.ShadowDom:return new xo(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=an(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ss),p.LFG(Qn),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Ji{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ba[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=ba[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ba[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,o&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Js(r)):this.eventManager.addEventListener(e,t,Js(r))}}class du extends Ji{constructor(e,t,r,o){super(e),this.component=r;const u=an(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function xt(n){return"_ngcontent-%COMP%".replace(Ro,n)}(o+"-"+r.id),this.hostAttr=function uu(n){return"_nghost-%COMP%".replace(Ro,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class xo extends Ji{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=an(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Da=(()=>{class n extends Mo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(re))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const qn=["alt","control","meta","shift"],hu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},yi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Yc=(()=>{class n extends Mo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(qn.forEach(E=>{const D=r.indexOf(E);D>-1&&(r.splice(D,1),d+=E+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function Oo(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Xi.hasOwnProperty(e)&&(e=Xi[e]))}return hu[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),qn.forEach(u=>{u!=o&&yi[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(re))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Aa=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function fu(){Ao.makeCurrent(),xi.init()},multi:!0},{provide:re,useFactory:function Po(){return(0,p.RDi)(document),document},deps:[]}]),Sa=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Ia(){return new p.qLn},deps:[]},{provide:Ar,useClass:Da,multi:!0,deps:[re,p.R0b,p.Lbi]},{provide:Ar,useClass:Yc,multi:!0,deps:[re]},{provide:Sr,useClass:Sr,deps:[Ss,Qn,p.AFp]},{provide:p.FYo,useExisting:Sr},{provide:pt,useExisting:Qn},{provide:Qn,useClass:Qn,deps:[re]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:Ss,useClass:Ss,deps:[Ar,p.R0b]},{provide:class on{},useClass:pl,deps:[]}];let pu=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:Ni,useExisting:p.AFp},Gn]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(n,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:Sa,imports:[Ea,p.hGG]}),n})();"undefined"!=typeof window&&window;let Xs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):p.LFG(Qh),r},providedIn:"root"}),n})(),Qh=(()=>{class n extends Xs{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case p.q3G.NONE:return r;case p.q3G.HTML:return(0,p.qzn)(r,"HTML")?(0,p.z3N)(r):(0,p.EiD)(this._doc,String(r)).toString();case p.q3G.STYLE:return(0,p.qzn)(r,"Style")?(0,p.z3N)(r):r;case p.q3G.SCRIPT:if((0,p.qzn)(r,"Script"))return(0,p.z3N)(r);throw new Error("unsafe value used in a script context");case p.q3G.URL:return(0,p.yhl)(r),(0,p.qzn)(r,"URL")?(0,p.z3N)(r):(0,p.mCW)(String(r));case p.q3G.RESOURCE_URL:if((0,p.qzn)(r,"ResourceURL"))return(0,p.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,p.JVY)(t)}bypassSecurityTrustStyle(t){return(0,p.L6k)(t)}bypassSecurityTrustScript(t){return(0,p.eBb)(t)}bypassSecurityTrustUrl(t){return(0,p.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,p.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(re))},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function El(n){return new Qh(n.get(re))}(p.LFG(p.zs3)),r},providedIn:"root"}),n})();var mn=P(8996),Mr=P(8306);const{isArray:ar}=Array,{getPrototypeOf:Jh,prototype:Xh,keys:Oa}=Object;function nd(n){if(1===n.length){const e=n[0];if(ar(e))return{args:e,keys:null};if(function Pa(n){return n&&"object"==typeof n&&Jh(n)===Xh}(e)){const t=Oa(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ka=P(8421),Oi=P(7669),gr=P(5403),_t=P(4004);const{isArray:Fa}=Array;function rd(n){return(0,_t.U)(e=>function Tl(n,e){return Fa(e)?n(...e):n(e)}(n,e))}function Fo(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let Lo=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),Rr=(()=>{class n extends Lo{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const Gr=new p.OlP("NgValueAccessor"),Pi={provide:Gr,useExisting:(0,p.Gpc)(()=>Uo),multi:!0},Il=new p.OlP("CompositionEventMode");let Uo=(()=>{class n extends Lo{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Dl(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Il,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[p._Bn([Pi]),p.qOj]}),n})();function Xr(n){return null==n||0===n.length}function La(n){return null!=n&&"number"==typeof n.length}const Gt=new p.OlP("NgValidators"),ki=new p.OlP("NgAsyncValidators"),ef=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class mr{static min(e){return function eo(n){return e=>{if(Xr(e.value)||Xr(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function wn(n){return e=>{if(Xr(e.value)||Xr(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Bo(n){return Xr(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function jo(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function ts(n){return Xr(n.value)||ef.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function ns(n){return e=>Xr(e.value)||!La(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return rs(e)}static pattern(e){return function Cl(n){if(!n)return Fi;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Xr(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return sd(e)}static composeAsync(e){return ad(e)}}function rs(n){return e=>La(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function Fi(n){return null}function to(n){return null!=n}function $o(n){const e=(0,p.QGY)(n)?(0,mn.D)(n):n;return(0,p.CqO)(e),e}function id(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Xt(n,e){return e.map(t=>t(n))}function Al(n){return n.map(e=>function Eu(n){return!n.validate}(e)?e:t=>e.validate(t))}function sd(n){if(!n)return null;const e=n.filter(to);return 0==e.length?null:function(t){return id(Xt(t,e))}}function od(n){return null!=n?sd(Al(n)):null}function ad(n){if(!n)return null;const e=n.filter(to);return 0==e.length?null:function(t){return function bl(...n){const e=(0,Oi.jO)(n),{args:t,keys:r}=nd(n),o=new Mr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let E=d,D=d;for(let M=0;M<d;M++){let x=!1;(0,ka.Xf)(t[M]).subscribe(new gr.Q(u,V=>{x||(x=!0,D--),m[M]=V},()=>E--,void 0,()=>{(!E||!x)&&(D||u.next(r?Fo(r,m):m),u.complete())}))}});return e?o.pipe(rd(e)):o}(Xt(t,e).map($o)).pipe((0,_t.U)(id))}}function tf(n){return null!=n?ad(Al(n)):null}function Sl(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ns(n){return n._rawValidators}function ud(n){return n._rawAsyncValidators}function Tn(n){return n?Array.isArray(n)?n:[n]:[]}function Va(n,e){return Array.isArray(n)?n.includes(e):n===e}function _i(n,e){const t=Tn(e);return Tn(n).forEach(o=>{Va(t,o)||t.push(o)}),t}function nf(n,e){return Tn(e).filter(t=>!Va(n,t))}class ld{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=od(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Pn extends ld{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class cn extends ld{get formDirective(){return null}get path(){return null}}class Ml{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let Rl=(()=>{class n extends Ml{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Pn,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[p.qOj]}),n})(),cd=(()=>{class n extends Ml{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(cn,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[p.qOj]}),n})();function Du(n,e){io(n,e),e.valueAccessor.writeValue(n.value),function of(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&b(n,e)})}(n,e),function I(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function xl(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&b(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function $a(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ur(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Go(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ja(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function io(n,e){const t=Ns(n);null!==e.validator?n.setValidators(Sl(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=ud(n);null!==e.asyncValidator?n.setAsyncValidators(Sl(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();ja(e._rawValidators,o),ja(e._rawAsyncValidators,o)}function Go(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Ns(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=ud(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return ja(e._rawValidators,r),ja(e._rawAsyncValidators,r),t}function b(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function qt(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const en="VALID",Li="INVALID",_r="PENDING",is="DISABLED";function Vi(n){return(Ol(n)?n.validators:n)||null}function qo(n){return Array.isArray(n)?od(n):n||null}function Iu(n,e){return(Ol(e)?e.asyncValidators:n)||null}function fd(n){return Array.isArray(n)?tf(n):n||null}function Ol(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const zo=n=>n instanceof lf,so=n=>n instanceof Cu,af=n=>n instanceof lg;function Ly(n){return zo(n)?n.value:n.getRawValue()}function uf(n,e){const t=so(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[e])throw new p.vHH(1001,"")}function pd(n,e){so(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new p.vHH(1002,"")})}class ug{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=qo(this._rawValidators),this._composedAsyncValidatorFn=fd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===en}get invalid(){return this.status===Li}get pending(){return this.status==_r}get disabled(){return this.status===is}get enabled(){return this.status!==is}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=qo(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=fd(e)}addValidators(e){this.setValidators(_i(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_i(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nf(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nf(e,this._rawAsyncValidators))}hasValidator(e){return Va(this._rawValidators,e)}hasAsyncValidator(e){return Va(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=_r,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=is,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=en,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===en||this.status===_r)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?is:en}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=_r,this._hasOwnPendingAsyncValidator=!0;const t=$o(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function vi(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=so(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:af(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?is:this.errors?Li:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_r)?_r:this._anyControlsHaveStatus(Li)?Li:en}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ol(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class lf extends ug{constructor(e=null,t,r){super(Vi(t),Iu(r,t)),this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){qt(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){qt(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Cu extends ug{constructor(e,t,r){super(Vi(t),Iu(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){pd(this,e),Object.keys(e).forEach(r=>{uf(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Ly(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class lg extends ug{constructor(e,t,r){super(Vi(t),Iu(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){pd(this,e),e.forEach((r,o)=>{uf(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Ly(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let hf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),uo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const Au=new p.OlP("NgModelWithFormControlWarning"),jy={provide:cn,useExisting:(0,p.Gpc)(()=>Ed)};let Ed=(()=>{class n extends cn{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Go(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Du(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ur(t.control||null,t,!1),qt(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function qe(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(ur(r||null,t),zo(o)&&(Du(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function N(n,e){io(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function F(n,e){return Go(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){io(this.form,this),this._oldForm&&Go(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Gt,10),p.Y36(ki,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([jy]),p.qOj,p.TTD]}),n})();const yg={provide:Pn,useExisting:(0,p.Gpc)(()=>Ui)};let Ui=(()=>{class n extends Pn{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Vt(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Uo?t=u:function Ge(n){return Object.getPrototypeOf(n.constructor)===Rr}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Se(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function yr(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(p.Y36(cn,13),p.Y36(Gt,10),p.Y36(ki,10),p.Y36(Gr,10),p.Y36(Au,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([yg]),p.qOj,p.TTD]}),n})();let Ll=(()=>{class n{constructor(){this._validator=Fi}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Fi,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,features:[p.TTD]}),n})();const bg={provide:Gt,useExisting:(0,p.Gpc)(()=>Ul),multi:!0};let Ul=(()=>{class n extends Ll{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function Gy(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>rs(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&p.uIk("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[p._Bn([bg]),p.qOj]}),n})(),Cg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[uo]]}),n})(),Nr=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Au,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Cg]}),n})(),Ag=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,u=null,d=null;return null!=r&&(function wf(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,d=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,d=null!=r.asyncValidator?r.asyncValidator:null)),new Cu(o,{asyncValidators:d,updateOn:m,validators:u})}control(t,r,o){return new lf(t,r,o)}array(t,r,o){const u=t.map(d=>this._createControl(d));return new lg(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return zo(t)||so(t)||af(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:Nr}),n})();var hn=P(2011);const Yo_firebase={apiKey:"AIzaSyBotPqQcO0sOrTtIKEWGqMvhbfaEsDsWRk",authDomain:"creditcard-752b6.firebaseapp.com",projectId:"creditcard-752b6",storageBucket:"creditcard-752b6.appspot.com",messagingSenderId:"781831069210",appId:"1:781831069210:web:8c3b67a0b23a6a6e793ba3"};class Cd{}const ss="*";function Ad(n,e){return{type:7,name:n,definitions:e,options:{}}}function Sg(n,e=null){return{type:4,styles:e,timings:n}}function Bl(n,e=null){return{type:2,steps:n,options:e}}function Mu(n){return{type:6,styles:n,offset:null}}function Tf(n,e,t){return{type:0,name:n,styles:e,options:t}}function jl(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Ru(n){Promise.resolve(null).then(n)}class Ha{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ru(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Rg{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,o=0;const u=this.players.length;0==u?Ru(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++t==u&&this._onFinish()}),d.onDestroy(()=>{++r==u&&this._onDestroy()}),d.onStart(()=>{++o==u&&this._onStart()})}),this.totalTime=this.players.reduce((d,m)=>Math.max(d,m.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const o=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(o)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function Ng(){return"undefined"!=typeof window&&void 0!==window.document}function If(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Os(n){switch(n.length){case 0:return new Ha;case 1:return n[0];default:return new Rg(n)}}function Sd(n,e,t,r,o={},u={}){const d=[],m=[];let E=-1,D=null;if(r.forEach(M=>{const x=M.offset,V=x==E,q=V&&D||{};Object.keys(M).forEach(Z=>{let he=Z,Pe=M[Z];if("offset"!==Z)switch(he=e.normalizePropertyName(he,d),Pe){case"!":Pe=o[Z];break;case ss:Pe=u[Z];break;default:Pe=e.normalizeStyleValue(Z,he,Pe,d)}q[he]=Pe}),V||m.push(q),D=q,E=x}),d.length){const M="\n - ";throw new Error(`Unable to animate due to the following errors:${M}${d.join(M)}`)}return m}function $l(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Md(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Md(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Md(t,"destroy",n)))}}function Md(n,e,t){const r=t.totalTime,u=Cf(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),d=n._data;return null!=d&&(u._data=d),u}function Cf(n,e,t,r,o="",u=0,d){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:o,totalTime:u,disabled:!!d}}function xr(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function xg(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let qr=(n,e)=>!1,Nu=(n,e,t)=>[];(If()||"undefined"!=typeof Element)&&(qr=Ng()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),Nu=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Qo=null,Af=!1;function Rd(n){Qo||(Qo=function Qy(){return"undefined"!=typeof document?document.body:null}()||{},Af=!!Qo.style&&"WebkitAppearance"in Qo.style);let e=!0;return Qo.style&&!function Ps(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Qo.style,!e&&Af&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Qo.style)),e}const Bi=qr,ji=Nu;function Hl(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let Og=(()=>{class n{validateStyleProperty(t){return Rd(t)}matchesElement(t,r){return!1}containsElement(t,r){return Bi(t,r)}query(t,r,o){return ji(t,r,o)}computeStyle(t,r,o){return o||""}animate(t,r,o,u,d,m=[],E){return new Ha(o,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Nd=(()=>{class n{}return n.NOOP=new Og,n})();const Ga="ng-enter",Jo="ng-leave",ql="ng-trigger",os=".ng-trigger",as="ng-animating",Ou=".ng-animating";function lo(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Sf(parseFloat(e[1]),e[2])}function Sf(n,e){return"s"===e?1e3*n:n}function Xo(n,e,t){return n.hasOwnProperty("duration")?n:function Jy(n,e,t){let o,u=0,d="";if("string"==typeof n){const m=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===m)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};o=Sf(parseFloat(m[1]),m[2]);const E=m[3];null!=E&&(u=Sf(parseFloat(E),m[4]));const D=m[5];D&&(d=D)}else o=n;if(!t){let m=!1,E=e.length;o<0&&(e.push("Duration values below 0 are not allowed for this animation step."),m=!0),u<0&&(e.push("Delay values below 0 are not allowed for this animation step."),m=!0),m&&e.splice(E,0,`The provided timing value "${n}" is invalid.`)}return{duration:o,delay:u,easing:d}}(n,e,t)}function Pu(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function ea(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Pu(n,t);return t}function y(n,e,t){return t?e+":"+t+";":""}function h(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=y(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=y(0,Ft(t),n.style[t]));n.setAttribute("style",e)}function f(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const o=Ke(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[o]),n.style[o]=e[r]}),If()&&h(n))}function v(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=Ke(t);n.style[r]=""}),If()&&h(n))}function C(n){return Array.isArray(n)?1==n.length?n[0]:Bl(n):n}const U=new RegExp("{{\\s*(.+?)\\s*}}","g");function ee(n){let e=[];if("string"==typeof n){let t;for(;t=U.exec(n);)e.push(t[1]);U.lastIndex=0}return e}function ke(n,e,t){const r=n.toString(),o=r.replace(U,(u,d)=>{let m=e[d];return e.hasOwnProperty(d)||(t.push(`Please provide a value for the animation param ${d}`),m=""),m.toString()});return o==r?n:o}function Me(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const We=/-+([a-z0-9])/g;function Ke(n){return n.replace(We,(...e)=>e[1].toUpperCase())}function Ft(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function er(n,e){return 0===n||0===e}function $i(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],d=[];if(r.forEach(m=>{u.hasOwnProperty(m)||d.push(m),u[m]=t[m]}),d.length)for(var o=1;o<e.length;o++){let m=e[o];d.forEach(function(E){m[E]=ku(n,E)})}}return e}function Or(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function ku(n,e){return window.getComputedStyle(n)[e]}function Mf(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function zl(n,e,t){if(":"==n[0]){const E=function Rf(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof E)return void e.push(E);n=E}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const o=r[1],u=r[2],d=r[3];e.push(Od(o,d));"<"==u[0]&&!("*"==o&&"*"==d)&&e.push(Od(d,o))}(r,t,e)):t.push(n),t}const ta=new Set(["true","1"]),co=new Set(["false","0"]);function Od(n,e){const t=ta.has(n)||co.has(n),r=ta.has(e)||co.has(e);return(o,u)=>{let d="*"==n||n==o,m="*"==e||e==u;return!d&&t&&"boolean"==typeof o&&(d=o?ta.has(n):co.has(n)),!m&&r&&"boolean"==typeof u&&(m=u?ta.has(e):co.has(e)),d&&m}}const kd=new RegExp("s*:selfs*,?","g");function Wl(n,e,t){return new rD(n).build(e,t)}class rD{constructor(e){this._driver=e}build(e,t){const r=new sD(t);return this._resetContextStyleTimingState(r),Or(this,C(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,o=t.depCount=0;const u=[],d=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(m=>{if(this._resetContextStyleTimingState(t),0==m.type){const E=m,D=E.name;D.toString().split(/\s*,\s*/).forEach(M=>{E.name=M,u.push(this.visitState(E,t))}),E.name=D}else if(1==m.type){const E=this.visitTransition(m,t);r+=E.queryCount,o+=E.depCount,d.push(E)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:u,transitions:d,queryCount:r,depCount:o,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),o=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,d=o||{};if(r.styles.forEach(m=>{if(Ld(m)){const E=m;Object.keys(E).forEach(D=>{ee(E[D]).forEach(M=>{d.hasOwnProperty(M)||u.add(M)})})}}),u.size){const m=Me(u.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${m.join(", ")}`)}}return{type:0,name:e.name,style:r,options:o?{params:o}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Or(this,C(e.animation),t);return{type:1,matchers:Mf(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Vd(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Or(this,r,t)),options:Vd(e.options)}}visitGroup(e,t){const r=t.currentTime;let o=0;const u=e.steps.map(d=>{t.currentTime=r;const m=Or(this,d,t);return o=Math.max(o,t.currentTime),m});return t.currentTime=o,{type:3,steps:u,options:Vd(e.options)}}visitAnimate(e,t){const r=function m0(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return kg(Xo(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=kg(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||Xo(r,e),kg(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let o,u=e.styles?e.styles:Mu({});if(5==u.type)o=this.visitKeyframes(u,t);else{let d=e.styles,m=!1;if(!d){m=!0;const D={};r.easing&&(D.easing=r.easing),d=Mu(D)}t.currentTime+=r.duration+r.delay;const E=this.visitStyle(d,t);E.isEmptyStep=m,o=E}return t.currentAnimateTimings=null,{type:4,timings:r,style:o,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(d=>{"string"==typeof d?d==ss?r.push(d):t.errors.push(`The provided style string value ${d} is not allowed.`):r.push(d)}):r.push(e.styles);let o=!1,u=null;return r.forEach(d=>{if(Ld(d)){const m=d,E=m.easing;if(E&&(u=E,delete m.easing),!o)for(let D in m)if(m[D].toString().indexOf("{{")>=0){o=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let o=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(d=>{"string"!=typeof d&&Object.keys(d).forEach(m=>{if(!this._driver.validateStyleProperty(m))return void t.errors.push(`The provided animation property "${m}" is not a supported CSS property for animations`);const E=t.collectedStyles[t.currentQuerySelector],D=E[m];let M=!0;D&&(u!=o&&u>=D.startTime&&o<=D.endTime&&(t.errors.push(`The CSS property "${m}" that exists between the times of "${D.startTime}ms" and "${D.endTime}ms" is also being animated in a parallel animation between the times of "${u}ms" and "${o}ms"`),M=!1),u=D.startTime),M&&(E[m]={startTime:u,endTime:o}),t.options&&function R(n,e,t){const r=e.params||{},o=ee(n);o.length&&o.forEach(u=>{r.hasOwnProperty(u)||t.push(`Unable to resolve the local animation param ${u} in the given list of values`)})}(d[m],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let u=0;const d=[];let m=!1,E=!1,D=0;const M=e.steps.map(ot=>{const yt=this._makeStyleAst(ot,t);let Pt=null!=yt.offset?yt.offset:function g0(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Ld(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(Ld(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(yt.styles),ct=0;return null!=Pt&&(u++,ct=yt.offset=Pt),E=E||ct<0||ct>1,m=m||ct<D,D=ct,d.push(ct),yt});E&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),m&&t.errors.push("Please ensure that all keyframe offsets are in order");const x=e.steps.length;let V=0;u>0&&u<x?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==u&&(V=1/(x-1));const q=x-1,Z=t.currentTime,he=t.currentAnimateTimings,Pe=he.duration;return M.forEach((ot,yt)=>{const Pt=V>0?yt==q?1:V*yt:d[yt],ct=Pt*Pe;t.currentTime=Z+he.delay+ct,he.duration=ct,this._validateStyleAst(ot,t),ot.offset=Pt,r.styles.push(ot)}),r}visitReference(e,t){return{type:8,animation:Or(this,C(e.animation),t),options:Vd(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Vd(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Vd(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,o=e.options||{};t.queryCount++,t.currentQuery=e;const[u,d]=function p0(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(kd,"")),n=n.replace(/@\*/g,os).replace(/@\w+/g,t=>os+"-"+t.substr(1)).replace(/:animating/g,Ou),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,xr(t.collectedStyles,t.currentQuerySelector,{});const m=Or(this,C(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:o.limit||0,optional:!!o.optional,includeSelf:d,animation:m,originalSelector:e.selector,options:Vd(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Xo(e.timings,t.errors,!0);return{type:12,animation:Or(this,C(e.animation),t),timings:r,options:null}}}class sD{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Ld(n){return!Array.isArray(n)&&"object"==typeof n}function Vd(n){return n?(n=Pu(n)).params&&(n.params=function iD(n){return n?Pu(n):null}(n.params)):n={},n}function kg(n,e,t){return{duration:n,delay:e,easing:t}}function Xy(n,e,t,r,o,u,d=null,m=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:o,delay:u,totalTime:o+u,easing:d,subTimeline:m}}class Nf{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const ho=new RegExp(":enter","g"),y0=new RegExp(":leave","g");function e_(n,e,t,r,o,u={},d={},m,E,D=[]){return(new lD).buildKeyframes(n,e,t,r,o,u,d,m,E,D)}class lD{buildKeyframes(e,t,r,o,u,d,m,E,D,M=[]){D=D||new Nf;const x=new t_(e,t,D,o,u,M,[]);x.options=E,x.currentTimeline.setStyles([d],null,x.errors,E),Or(this,r,x);const V=x.timelines.filter(q=>q.containsAnimation());if(Object.keys(m).length){let q;for(let Z=V.length-1;Z>=0;Z--){const he=V[Z];if(he.element===t){q=he;break}}q&&!q.allowOnlyTimelineStyles()&&q.setStyles([m],null,x.errors,E)}return V.length?V.map(q=>q.buildKeyframes()):[Xy(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const o=t.createSubContext(e.options),u=t.currentTimeline.currentTime,d=this._visitSubInstructions(r,o,o.options);u!=d&&t.transformIntoNewTimeline(d)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const d=null!=r.duration?lo(r.duration):null,m=null!=r.delay?lo(r.delay):null;return 0!==d&&e.forEach(E=>{const D=t.appendInstructionToTimeline(E,d,m);u=Math.max(u,D.duration+D.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Or(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let o=t;const u=e.options;if(u&&(u.params||u.delay)&&(o=t.createSubContext(u),o.transformIntoNewTimeline(),null!=u.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=Fg);const d=lo(u.delay);o.delayNextStep(d)}e.steps.length&&(e.steps.forEach(d=>Or(this,d,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>r&&o.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let o=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?lo(e.options.delay):0;e.steps.forEach(d=>{const m=t.createSubContext(e.options);u&&m.delayNextStep(u),Or(this,d,m),o=Math.max(o,m.currentTimeline.currentTime),r.push(m.currentTimeline)}),r.forEach(d=>t.currentTimeline.mergeTimelineCollectedStyles(d)),t.transformIntoNewTimeline(o),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Xo(t.params?ke(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),o=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),o.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),o.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,o=t.currentAnimateTimings;!o&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=o&&o.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,o=t.currentTimeline.duration,u=r.duration,m=t.createSubContext().currentTimeline;m.easing=r.easing,e.styles.forEach(E=>{m.forwardTime((E.offset||0)*u),m.setStyles(E.styles,E.easing,t.errors,t.options),m.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(m),t.transformIntoNewTimeline(o+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,o=e.options||{},u=o.delay?lo(o.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Fg);let d=r;const m=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!o.optional,t.errors);t.currentQueryTotal=m.length;let E=null;m.forEach((D,M)=>{t.currentQueryIndex=M;const x=t.createSubContext(e.options,D);u&&x.delayNextStep(u),D===t.element&&(E=x.currentTimeline),Or(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(d),E&&(t.currentTimeline.mergeTimelineCollectedStyles(E),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,o=t.currentTimeline,u=e.timings,d=Math.abs(u.duration),m=d*(t.currentQueryTotal-1);let E=d*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":E=m-E;break;case"full":E=r.currentStaggerTime}const M=t.currentTimeline;E&&M.delayNextStep(E);const x=M.currentTime;Or(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=o.currentTime-x+(o.startTime-r.currentTimeline.startTime)}}const Fg={};class t_{constructor(e,t,r,o,u,d,m,E){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=o,this._leaveClassName=u,this.errors=d,this.timelines=m,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Fg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=E||new xf(this._driver,t,0),m.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let o=this.options;null!=r.duration&&(o.duration=lo(r.duration)),null!=r.delay&&(o.delay=lo(r.delay));const u=r.params;if(u){let d=o.params;d||(d=this.options.params={}),Object.keys(u).forEach(m=>{(!t||!d.hasOwnProperty(m))&&(d[m]=ke(u[m],d,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(o=>{r[o]=t[o]})}}return e}createSubContext(e=null,t,r){const o=t||this.element,u=new t_(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=Fg,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const o={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new cD(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,o,e.stretchStartingKeyframe);return this.timelines.push(u),o}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,o,u,d){let m=[];if(o&&m.push(this.element),e.length>0){e=(e=e.replace(ho,"."+this._enterClassName)).replace(y0,"."+this._leaveClassName);let D=this._driver.query(this.element,e,1!=r);0!==r&&(D=r<0?D.slice(D.length+r,D.length):D.slice(0,r)),m.push(...D)}return!u&&0==m.length&&d.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),m}}class xf{constructor(e,t,r,o){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=o,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new xf(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||ss,this._currentKeyframe[t]=ss}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,o){t&&(this._previousKeyframe.easing=t);const u=o&&o.params||{},d=function dD(n,e){const t={};let r;return n.forEach(o=>{"*"===o?(r=r||Object.keys(e),r.forEach(u=>{t[u]=ss})):ea(o,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(d).forEach(m=>{const E=ke(d[m],u,r);this._pendingStyles[m]=E,this._localTimelineStyles.hasOwnProperty(m)||(this._backFill[m]=this._globalTimelineStyles.hasOwnProperty(m)?this._globalTimelineStyles[m]:ss),this._updateStyle(m,E)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],o=e._styleSummary[t];(!r||o.time>r.time)&&this._updateStyle(t,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((m,E)=>{const D=ea(m,!0);Object.keys(D).forEach(M=>{const x=D[M];"!"==x?e.add(M):x==ss&&t.add(M)}),r||(D.offset=E/this.duration),o.push(D)});const u=e.size?Me(e.values()):[],d=t.size?Me(t.values()):[];if(r){const m=o[0],E=Pu(m);m.offset=0,E.offset=1,o=[m,E]}return Xy(this.element,o,u,d,this.duration,this.startTime,this.easing,!1)}}class cD extends xf{constructor(e,t,r,o,u,d,m=!1){super(e,t,d.delay),this.keyframes=r,this.preStyleProps=o,this.postStyleProps=u,this._stretchStartingKeyframe=m,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:o}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],d=r+t,m=t/d,E=ea(e[0],!1);E.offset=0,u.push(E);const D=ea(e[0],!1);D.offset=_0(m),u.push(D);const M=e.length-1;for(let x=1;x<=M;x++){let V=ea(e[x],!1);V.offset=_0((t+V.offset*r)/d),u.push(V)}r=d,t=0,o="",e=u}return Xy(this.element,e,this.preStyleProps,this.postStyleProps,r,t,o,!0)}}function _0(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Lg{}class v0 extends Lg{normalizePropertyName(e,t){return Ke(e)}normalizeStyleValue(e,t,r,o){let u="";const d=r.toString().trim();if(Vg[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const m=r.match(/^[+-]?[\d\.]+([a-z]*)$/);m&&0==m[1].length&&o.push(`Please provide a CSS unit value for ${e}:${r}`)}return d+u}}const Vg=(()=>function fo(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function n_(n,e,t,r,o,u,d,m,E,D,M,x,V){return{type:0,element:n,triggerName:e,isRemovalTransition:o,fromState:t,fromStyles:u,toState:r,toStyles:d,timelines:m,queriedElements:E,preStyleProps:D,postStyleProps:M,totalTime:x,errors:V}}const r_={};class Ug{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,o){return function qa(n,e,t,r,o){return n.some(u=>u(e,t,r,o))}(this.ast.matchers,e,t,r,o)}buildStyles(e,t,r){const o=this._stateStyles["*"],u=this._stateStyles[e],d=o?o.buildStyles(t,r):{};return u?u.buildStyles(t,r):d}build(e,t,r,o,u,d,m,E,D,M){const x=[],V=this.ast.options&&this.ast.options.params||r_,Z=this.buildStyles(r,m&&m.params||r_,x),he=E&&E.params||r_,Pe=this.buildStyles(o,he,x),ot=new Set,yt=new Map,Pt=new Map,ct="void"===o,un={params:Object.assign(Object.assign({},V),he)},hr=M?[]:e_(e,t,this.ast.animation,u,d,Z,Pe,un,D,x);let Ur=0;if(hr.forEach(Oc=>{Ur=Math.max(Oc.duration+Oc.delay,Ur)}),x.length)return n_(t,this._triggerName,r,o,ct,Z,Pe,[],[],yt,Pt,Ur,x);hr.forEach(Oc=>{const Pc=Oc.element,Nx=xr(yt,Pc,{});Oc.preStyleProps.forEach(Jp=>Nx[Jp]=!0);const r0=xr(Pt,Pc,{});Oc.postStyleProps.forEach(Jp=>r0[Jp]=!0),Pc!==t&&ot.add(Pc)});const xc=Me(ot.values());return n_(t,this._triggerName,r,o,ct,Z,Pe,hr,xc,yt,Pt,Ur)}}class i_{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},o=Pu(this.defaultParams);return Object.keys(e).forEach(u=>{const d=e[u];null!=d&&(o[u]=d)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const d=u;Object.keys(d).forEach(m=>{let E=d[m];E.length>1&&(E=ke(E,o,t));const D=this.normalizer.normalizePropertyName(m,t);E=this.normalizer.normalizeStyleValue(m,D,E,t),r[D]=E})}}),r}}class s_{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(o=>{this.states[o.name]=new i_(o.style,o.options&&o.options.params||{},r)}),o_(this.states,"true","1"),o_(this.states,"false","0"),t.transitions.forEach(o=>{this.transitionFactories.push(new Ug(e,o,this.states))}),this.fallbackTransition=function KS(n,e,t){return new Ug(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,m)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,o){return this.transitionFactories.find(d=>d.match(e,t,r,o))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function o_(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const ZS=new Nf;class Bg{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],o=Wl(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=o}_buildPlayer(e,t,r){const o=e.element,u=Sd(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(o,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const o=[],u=this._animations[e];let d;const m=new Map;if(u?(d=e_(this._driver,t,u,Ga,Jo,{},{},r,ZS,o),d.forEach(M=>{const x=xr(m,M.element,{});M.postStyleProps.forEach(V=>x[V]=null)})):(o.push("The requested animation doesn't exist or has already been destroyed"),d=[]),o.length)throw new Error(`Unable to create the animation due to the following errors: ${o.join("\n")}`);m.forEach((M,x)=>{Object.keys(M).forEach(V=>{M[V]=this._driver.computeStyle(x,V,ss)})});const D=Os(d.map(M=>{const x=m.get(M.element);return this._buildPlayer(M,{},x)}));return this._playersById[e]=D,D.onDestroy(()=>this.destroy(e)),this.players.push(D),D}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,o){const u=Cf(t,"","","");return $l(this._getPlayer(e),r,u,o),()=>{}}command(e,t,r,o){if("register"==r)return void this.register(e,o[0]);if("create"==r)return void this.create(e,t,o[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(e)}}}const Of="ng-animate-queued",Pf="ng-animate-disabled",pD=[],w0={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},gD={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},us="__ng_removed";class T0{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function QS(n){return null!=n?n:null}(r?e.value:e),r){const u=Pu(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(o=>{null==r[o]&&(r[o]=t[o])})}}}const kf="void",b0=new T0(kf);class D0{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,po(t,this._hostClassName)}listen(e,t,r,o){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function JS(n){return"start"==n||"done"==n}(r))throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);const u=xr(this._elementListeners,e,[]),d={name:t,phase:r,callback:o};u.push(d);const m=xr(this._engine.statesByElement,e,{});return m.hasOwnProperty(t)||(po(e,ql),po(e,ql+"-"+t),m[t]=b0),()=>{this._engine.afterFlush(()=>{const E=u.indexOf(d);E>=0&&u.splice(E,1),this._triggers[t]||delete m[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,o=!0){const u=this._getTrigger(t),d=new l_(this.id,t,e);let m=this._engine.statesByElement.get(e);m||(po(e,ql),po(e,ql+"-"+t),this._engine.statesByElement.set(e,m={}));let E=m[t];const D=new T0(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&E&&D.absorbOptions(E.options),m[t]=D,E||(E=b0),D.value!==kf&&E.value===D.value){if(!function h_(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let o=0;o<t.length;o++){const u=t[o];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(E.params,D.params)){const he=[],Pe=u.matchStyles(E.value,E.params,he),ot=u.matchStyles(D.value,D.params,he);he.length?this._engine.reportError(he):this._engine.afterFlush(()=>{v(e,Pe),f(e,ot)})}return}const V=xr(this._engine.playersByElement,e,[]);V.forEach(he=>{he.namespaceId==this.id&&he.triggerName==t&&he.queued&&he.destroy()});let q=u.matchTransition(E.value,D.value,e,D.params),Z=!1;if(!q){if(!o)return;q=u.fallbackTransition,Z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:q,fromState:E,toState:D,player:d,isFallbackTransition:Z}),Z||(po(e,Of),d.onStart(()=>{Ff(e,Of)})),d.onDone(()=>{let he=this.players.indexOf(d);he>=0&&this.players.splice(he,1);const Pe=this._engine.playersByElement.get(e);if(Pe){let ot=Pe.indexOf(d);ot>=0&&Pe.splice(ot,1)}}),this.players.push(d),V.push(d),d}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(o=>o.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,os,!0);r.forEach(o=>{if(o[us])return;const u=this._engine.fetchNamespacesByElement(o);u.size?u.forEach(d=>d.triggerLeaveAnimation(o,t,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(e,t,r,o){const u=this._engine.statesByElement.get(e),d=new Map;if(u){const m=[];if(Object.keys(u).forEach(E=>{if(d.set(E,u[E].value),this._triggers[E]){const D=this.trigger(e,E,kf,o);D&&m.push(D)}}),m.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,d),r&&Os(m).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const o=new Set;t.forEach(u=>{const d=u.name;if(o.has(d))return;o.add(d);const E=this._triggers[d].fallbackTransition,D=r[d]||b0,M=new T0(kf),x=new l_(this.id,d,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:d,transition:E,fromState:D,toState:M,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let o=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)o=!0;else{let d=e;for(;d=d.parentNode;)if(r.statesByElement.get(d)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(e),o)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[us];(!u||u===w0)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){po(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const o=r.player;if(o.destroyed)return;const u=r.element,d=this._elementListeners.get(u);d&&d.forEach(m=>{if(m.name==r.triggerName){const E=Cf(u,r.triggerName,r.fromState.value,r.toState.value);E._data=e,$l(r.player,m.phase,E,m.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):t.push(r)}),this._queue=[],t.sort((r,o)=>{const u=r.transition.ast.depCount,d=o.transition.ast.depCount;return 0==u||0==d?u-d:this._engine.driver.containsElement(r.element,o.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class I0{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new D0(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let o=!1;for(let u=r;u>=0;u--)if(this.driver.containsElement(this._namespaceList[u].hostElement,t)){this._namespaceList.splice(u+1,0,e),o=!0;break}o||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let o=this._namespaceLookup[e];o&&o.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const o=this._namespaceList.indexOf(r);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const o=Object.keys(r);for(let u=0;u<o.length;u++){const d=r[o[u]].namespaceId;if(d){const m=this._fetchNamespace(d);m&&t.add(m)}}}return t}trigger(e,t,r,o){if(d_(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,o),!0}return!1}insertNode(e,t,r,o){if(!d_(t))return;const u=t[us];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const d=this.collectedLeaveElements.indexOf(t);d>=0&&this.collectedLeaveElements.splice(d,1)}if(e){const d=this._fetchNamespace(e);d&&d.insertNode(t,r)}o&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),po(e,Pf)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ff(e,Pf))}removeNode(e,t,r,o){if(d_(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,o):this.markElementAsRemoved(e,t,!1,o),r){const d=this.namespacesByHostElement.get(t);d&&d.id!==e&&d.removeNode(t,o)}}else this._onRemovalComplete(t,o)}markElementAsRemoved(e,t,r,o,u){this.collectedLeaveElements.push(t),t[us]={namespaceId:e,setForRemoval:o,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,o,u){return d_(t)?this._fetchNamespace(e).listen(t,r,o,u):()=>{}}_buildInstruction(e,t,r,o,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,o,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,os,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Ou,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Os(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[us];if(r&&r.setForRemoval){if(e[us]=w0,r.namespaceId){this.destroyInnerAnimations(e);const o=this._fetchNamespace(r.namespaceId);o&&o.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(Pf))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(o=>{this.markElementAsDisabled(o,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,o)=>this._balanceNamespaceList(r,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)po(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let o=0;o<r.length;o++)r[o]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Os(t).onDone(()=>{r.forEach(o=>o())}):r.forEach(o=>o())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new Nf,o=[],u=new Map,d=[],m=new Map,E=new Map,D=new Map,M=new Set;this.disabledNodes.forEach(it=>{M.add(it);const vt=this.driver.query(it,".ng-animate-queued",!0);for(let bt=0;bt<vt.length;bt++)M.add(vt[bt])});const x=this.bodyNode,V=Array.from(this.statesByElement.keys()),q=_D(V,this.collectedEnterElements),Z=new Map;let he=0;q.forEach((it,vt)=>{const bt=Ga+he++;Z.set(vt,bt),it.forEach(nn=>po(nn,bt))});const Pe=[],ot=new Set,yt=new Set;for(let it=0;it<this.collectedLeaveElements.length;it++){const vt=this.collectedLeaveElements[it],bt=vt[us];bt&&bt.setForRemoval&&(Pe.push(vt),ot.add(vt),bt.hasAnimation?this.driver.query(vt,".ng-star-inserted",!0).forEach(nn=>ot.add(nn)):yt.add(vt))}const Pt=new Map,ct=_D(V,Array.from(ot));ct.forEach((it,vt)=>{const bt=Jo+he++;Pt.set(vt,bt),it.forEach(nn=>po(nn,bt))}),e.push(()=>{q.forEach((it,vt)=>{const bt=Z.get(vt);it.forEach(nn=>Ff(nn,bt))}),ct.forEach((it,vt)=>{const bt=Pt.get(vt);it.forEach(nn=>Ff(nn,bt))}),Pe.forEach(it=>{this.processLeaveNode(it)})});const un=[],hr=[];for(let it=this._namespaceList.length-1;it>=0;it--)this._namespaceList[it].drainQueuedTransitions(t).forEach(bt=>{const nn=bt.player,ui=bt.element;if(un.push(nn),this.collectedEnterElements.length){const bs=ui[us];if(bs&&bs.setForMove){if(bs.previousTriggersValues&&bs.previousTriggersValues.has(bt.triggerName)){const Xp=bs.previousTriggersValues.get(bt.triggerName),jh=this.statesByElement.get(bt.element);jh&&jh[bt.triggerName]&&(jh[bt.triggerName].value=Xp)}return void nn.destroy()}}const sl=!x||!this.driver.containsElement(x,ui),wo=Pt.get(ui),Bh=Z.get(ui),rr=this._buildInstruction(bt,r,Bh,wo,sl);if(rr.errors&&rr.errors.length)return void hr.push(rr);if(sl)return nn.onStart(()=>v(ui,rr.fromStyles)),nn.onDestroy(()=>f(ui,rr.toStyles)),void o.push(nn);if(bt.isFallbackTransition)return nn.onStart(()=>v(ui,rr.fromStyles)),nn.onDestroy(()=>f(ui,rr.toStyles)),void o.push(nn);const Px=[];rr.timelines.forEach(bs=>{bs.stretchStartingKeyframe=!0,this.disabledNodes.has(bs.element)||Px.push(bs)}),rr.timelines=Px,r.append(ui,rr.timelines),d.push({instruction:rr,player:nn,element:ui}),rr.queriedElements.forEach(bs=>xr(m,bs,[]).push(nn)),rr.preStyleProps.forEach((bs,Xp)=>{const jh=Object.keys(bs);if(jh.length){let eg=E.get(Xp);eg||E.set(Xp,eg=new Set),jh.forEach(WS=>eg.add(WS))}}),rr.postStyleProps.forEach((bs,Xp)=>{const jh=Object.keys(bs);let eg=D.get(Xp);eg||D.set(Xp,eg=new Set),jh.forEach(WS=>eg.add(WS))})});if(hr.length){const it=[];hr.forEach(vt=>{it.push(`@${vt.triggerName} has failed due to:\n`),vt.errors.forEach(bt=>it.push(`- ${bt}\n`))}),un.forEach(vt=>vt.destroy()),this.reportError(it)}const Ur=new Map,xc=new Map;d.forEach(it=>{const vt=it.element;r.has(vt)&&(xc.set(vt,vt),this._beforeAnimationBuild(it.player.namespaceId,it.instruction,Ur))}),o.forEach(it=>{const vt=it.element;this._getPreviousPlayers(vt,!1,it.namespaceId,it.triggerName,null).forEach(nn=>{xr(Ur,vt,[]).push(nn),nn.destroy()})});const Oc=Pe.filter(it=>C0(it,E,D)),Pc=new Map;yD(Pc,this.driver,yt,D,ss).forEach(it=>{C0(it,E,D)&&Oc.push(it)});const r0=new Map;q.forEach((it,vt)=>{yD(r0,this.driver,new Set(it),E,"!")}),Oc.forEach(it=>{const vt=Pc.get(it),bt=r0.get(it);Pc.set(it,Object.assign(Object.assign({},vt),bt))});const Jp=[],xx=[],Ox={};d.forEach(it=>{const{element:vt,player:bt,instruction:nn}=it;if(r.has(vt)){if(M.has(vt))return bt.onDestroy(()=>f(vt,nn.toStyles)),bt.disabled=!0,bt.overrideTotalTime(nn.totalTime),void o.push(bt);let ui=Ox;if(xc.size>1){let wo=vt;const Bh=[];for(;wo=wo.parentNode;){const rr=xc.get(wo);if(rr){ui=rr;break}Bh.push(wo)}Bh.forEach(rr=>xc.set(rr,ui))}const sl=this._buildAnimation(bt.namespaceId,nn,Ur,u,r0,Pc);if(bt.setRealPlayer(sl),ui===Ox)Jp.push(bt);else{const wo=this.playersByElement.get(ui);wo&&wo.length&&(bt.parentPlayer=Os(wo)),o.push(bt)}}else v(vt,nn.fromStyles),bt.onDestroy(()=>f(vt,nn.toStyles)),xx.push(bt),M.has(vt)&&o.push(bt)}),xx.forEach(it=>{const vt=u.get(it.element);if(vt&&vt.length){const bt=Os(vt);it.setRealPlayer(bt)}}),o.forEach(it=>{it.parentPlayer?it.syncPlayerEvents(it.parentPlayer):it.destroy()});for(let it=0;it<Pe.length;it++){const vt=Pe[it],bt=vt[us];if(Ff(vt,Jo),bt&&bt.hasAnimation)continue;let nn=[];if(m.size){let sl=m.get(vt);sl&&sl.length&&nn.push(...sl);let wo=this.driver.query(vt,Ou,!0);for(let Bh=0;Bh<wo.length;Bh++){let rr=m.get(wo[Bh]);rr&&rr.length&&nn.push(...rr)}}const ui=nn.filter(sl=>!sl.destroyed);ui.length?XS(this,vt,ui):this.processLeaveNode(vt)}return Pe.length=0,Jp.forEach(it=>{this.players.push(it),it.onDone(()=>{it.destroy();const vt=this.players.indexOf(it);this.players.splice(vt,1)}),it.play()}),Jp}elementContainsData(e,t){let r=!1;const o=t[us];return o&&o.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,o,u){let d=[];if(t){const m=this.playersByQueriedElement.get(e);m&&(d=m)}else{const m=this.playersByElement.get(e);if(m){const E=!u||u==kf;m.forEach(D=>{D.queued||!E&&D.triggerName!=o||d.push(D)})}}return(r||o)&&(d=d.filter(m=>!(r&&r!=m.namespaceId||o&&o!=m.triggerName))),d}_beforeAnimationBuild(e,t,r){const u=t.element,d=t.isRemovalTransition?void 0:e,m=t.isRemovalTransition?void 0:t.triggerName;for(const E of t.timelines){const D=E.element,M=D!==u,x=xr(r,D,[]);this._getPreviousPlayers(D,M,d,m,t.toState).forEach(q=>{const Z=q.getRealPlayer();Z.beforeDestroy&&Z.beforeDestroy(),q.destroy(),x.push(q)})}v(u,t.fromStyles)}_buildAnimation(e,t,r,o,u,d){const m=t.triggerName,E=t.element,D=[],M=new Set,x=new Set,V=t.timelines.map(Z=>{const he=Z.element;M.add(he);const Pe=he[us];if(Pe&&Pe.removedBeforeQueried)return new Ha(Z.duration,Z.delay);const ot=he!==E,yt=function eM(n){const e=[];return za(n,e),e}((r.get(he)||pD).map(Ur=>Ur.getRealPlayer())).filter(Ur=>!!Ur.element&&Ur.element===he),Pt=u.get(he),ct=d.get(he),un=Sd(0,this._normalizer,0,Z.keyframes,Pt,ct),hr=this._buildPlayer(Z,un,yt);if(Z.subTimeline&&o&&x.add(he),ot){const Ur=new l_(e,m,he);Ur.setRealPlayer(hr),D.push(Ur)}return hr});D.forEach(Z=>{xr(this.playersByQueriedElement,Z.element,[]).push(Z),Z.onDone(()=>function c_(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const o=r.indexOf(t);r.splice(o,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const o=r.indexOf(t);r.splice(o,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,Z.element,Z))}),M.forEach(Z=>po(Z,as));const q=Os(V);return q.onDestroy(()=>{M.forEach(Z=>Ff(Z,as)),f(E,t.toStyles)}),x.forEach(Z=>{xr(o,Z,[]).push(q)}),q}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Ha(e.duration,e.delay)}}class l_{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Ha,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>$l(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){xr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function d_(n){return n&&1===n.nodeType}function mD(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function yD(n,e,t,r,o){const u=[];t.forEach(E=>u.push(mD(E)));const d=[];r.forEach((E,D)=>{const M={};E.forEach(x=>{const V=M[x]=e.computeStyle(D,x,o);(!V||0==V.length)&&(D[us]=gD,d.push(D))}),n.set(D,M)});let m=0;return t.forEach(E=>mD(E,u[m++])),d}function _D(n,e){const t=new Map;if(n.forEach(m=>t.set(m,[])),0==e.length)return t;const o=new Set(e),u=new Map;function d(m){if(!m)return 1;let E=u.get(m);if(E)return E;const D=m.parentNode;return E=t.has(D)?D:o.has(D)?1:d(D),u.set(m,E),E}return e.forEach(m=>{const E=d(m);1!==E&&t.get(E).push(m)}),t}function po(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Ff(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function XS(n,e,t){Os(t).onDone(()=>n.processLeaveNode(e))}function za(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Rg?za(r.players,e):e.push(r)}}function C0(n,e,t){const r=t.get(n);if(!r)return!1;let o=e.get(n);return o?r.forEach(u=>o.add(u)):e.set(n,r),t.delete(n),!0}class Lf{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(o,u)=>{},this._transitionEngine=new I0(e,t,r),this._timelineEngine=new Bg(e,t,r),this._transitionEngine.onRemovalComplete=(o,u)=>this.onRemovalComplete(o,u)}registerTrigger(e,t,r,o,u){const d=e+"-"+o;let m=this._triggerCache[d];if(!m){const E=[],D=Wl(this._driver,u,E);if(E.length)throw new Error(`The animation trigger "${o}" has failed to build due to the following errors:\n - ${E.join("\n - ")}`);m=function E0(n,e,t){return new s_(n,e,t)}(o,D,this._normalizer),this._triggerCache[d]=m}this._transitionEngine.registerTrigger(t,o,m)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,o){this._transitionEngine.insertNode(e,t,r,o)}onRemove(e,t,r,o){this._transitionEngine.removeNode(e,t,o||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,o){if("@"==r.charAt(0)){const[u,d]=xg(r);this._timelineEngine.command(u,t,d,o)}else this._transitionEngine.trigger(e,t,r,o)}listen(e,t,r,o,u){if("@"==r.charAt(0)){const[d,m]=xg(r);return this._timelineEngine.listen(d,t,m,u)}return this._transitionEngine.listen(e,t,r,o,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function jg(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Vf(e[0]),e.length>1&&(r=Vf(e[e.length-1]))):e&&(t=Vf(e)),t||r?new A0(n,t,r):null}let A0=(()=>{class n{constructor(t,r,o){this._element=t,this._startStyles=r,this._endStyles=o,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&f(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(f(this._element,this._initialStyles),this._endStyles&&(f(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(v(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(v(this._element,this._endStyles),this._endStyles=null),f(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Vf(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const o=t[r];vD(o)&&(e=e||{},e[o]=n[o])}return e}function vD(n){return"display"===n||"position"===n}const f_="animation",S0="animationend";class ED{constructor(e,t,r,o,u,d,m){this._element=e,this._name=t,this._duration=r,this._delay=o,this._easing=u,this._fillMode=d,this._onDoneFn=m,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=E=>this._handleCallback(E)}apply(){(function wD(n,e){const t=Kl(n,"").trim();let r=0;t.length&&(r=function Bd(n,e){let t=0;for(let r=0;r<n.length;r++)n.charAt(r)===e&&t++;return t}(t,",")+1,e=`${t}, ${e}`),Wa(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),$g(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){g_(this._element,this._name,"paused")}resume(){g_(this._element,this._name,"running")}setPosition(e){const t=Ud(this._element,this._name);this._position=e*this._duration,Wa(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),$g(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function TD(n,e){const r=Kl(n,"").split(","),o=Vu(r,e);o>=0&&(r.splice(o,1),Wa(n,"",r.join(",")))}(this._element,this._name))}}function g_(n,e,t){Wa(n,"PlayState",t,Ud(n,e))}function Ud(n,e){const t=Kl(n,"");return t.indexOf(",")>0?Vu(t.split(","),e):Vu([t],e)}function Vu(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function $g(n,e,t){t?n.removeEventListener(S0,e):n.addEventListener(S0,e)}function Wa(n,e,t,r){const o=f_+e;if(null!=r){const u=n.style[o];if(u.length){const d=u.split(",");d[r]=t,t=d.join(",")}}n.style[o]=t}function Kl(n,e){return n.style[f_+e]||""}class m_{constructor(e,t,r,o,u,d,m,E){this.element=e,this.keyframes=t,this.animationName=r,this._duration=o,this._delay=u,this._finalStyles=m,this._specialStyles=E,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=d||"linear",this.totalTime=o+u,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new ED(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:ku(this.element,r))})}this.currentSnapshot=e}}class y_ extends Ha{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=Hl(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class Uf{constructor(){this._count=0}validateStyleProperty(e){return Rd(e)}matchesElement(e,t){return!1}containsElement(e,t){return Bi(e,t)}query(e,t,r){return ji(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(m=>Hl(m));let o=`@keyframes ${t} {\n`,u="";r.forEach(m=>{u=" ";const E=parseFloat(m.offset);o+=`${u}${100*E}% {\n`,u+=" ",Object.keys(m).forEach(D=>{const M=m[D];switch(D){case"offset":return;case"easing":return void(M&&(o+=`${u}animation-timing-function: ${M};\n`));default:return void(o+=`${u}${D}: ${M};\n`)}}),o+=`${u}}\n`}),o+="}\n";const d=document.createElement("style");return d.textContent=o,d}animate(e,t,r,o,u,d=[],m){const E=d.filter(Pe=>Pe instanceof m_),D={};er(r,o)&&E.forEach(Pe=>{let ot=Pe.currentSnapshot;Object.keys(ot).forEach(yt=>D[yt]=ot[yt])});const M=function R0(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(o=>{"offset"==o||"easing"==o||(e[o]=r[o])})}),e}(t=$i(e,t,D));if(0==r)return new y_(e,M);const x="gen_css_kf_"+this._count++,V=this.buildKeyframeElement(e,x,t);(function DD(n){var e;const t=null===(e=n.getRootNode)||void 0===e?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(e).appendChild(V);const Z=jg(e,t),he=new m_(e,t,x,r,o,u,M,Z);return he.onDestroy(()=>function tM(n){n.parentNode.removeChild(n)}(V)),he}}class N0{constructor(e,t,r,o){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:ku(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class x0{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(O0().toString()),this._cssKeyframesDriver=new Uf}validateStyleProperty(e){return Rd(e)}matchesElement(e,t){return!1}containsElement(e,t){return Bi(e,t)}query(e,t,r){return ji(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,o,u,d=[],m){if(!m&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,o,u,d);const M={duration:r,delay:o,fill:0==o?"both":"forwards"};u&&(M.easing=u);const x={},V=d.filter(Z=>Z instanceof N0);er(r,o)&&V.forEach(Z=>{let he=Z.currentSnapshot;Object.keys(he).forEach(Pe=>x[Pe]=he[Pe])});const q=jg(e,t=$i(e,t=t.map(Z=>ea(Z,!1)),x));return new N0(e,t,M,q)}}function O0(){return Ng()&&Element.prototype.animate||{}}let ls=(()=>{class n extends Cd{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:p.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(t)?Bl(t):t;return MD(this._renderer,null,r,"register",[o]),new AD(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.FYo),p.LFG(re))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class AD extends class Zy{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new SD(this._id,e,t||{},this._renderer)}}class SD{constructor(e,t,r,o){this.id=e,this.element=t,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return MD(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function MD(n,e,t,r,o){return n.setProperty(e,`@@${t}:${r}`,o)}const T_="@.disabled";let nM=(()=>{class n{constructor(t,r,o){this.delegate=t,this.engine=r,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,d)=>{const m=null==d?void 0:d.parentNode(u);m&&d.removeChild(m,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let M=this._rendererCache.get(u);return M||(M=new P0("",u,this.engine),this._rendererCache.set(u,M)),M}const d=r.id,m=r.id+"-"+this._currentId;this._currentId++,this.engine.register(m,t);const E=M=>{Array.isArray(M)?M.forEach(E):this.engine.registerTrigger(d,m,t,M.name,M)};return r.data.animation.forEach(E),new b_(this,m,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,o){t>=0&&t<this._microtaskId?this._zone.run(()=>r(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[d,m]=u;d(m)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.FYo),p.LFG(Lf),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class P0{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,o=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,o)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,o){this.delegate.setAttribute(e,t,r,o)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,o){this.delegate.setStyle(e,t,r,o)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==T_?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class b_ extends P0{constructor(e,t,r,o){super(t,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==T_?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const o=function k0(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),d="";return"@"!=u.charAt(0)&&([u,d]=function RD(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,o,u,d,m=>{this.factory.scheduleListenerCallback(m._data||-1,r,m)})}return this.delegate.listen(e,t,r)}}let ND=(()=>{class n extends Lf{constructor(t,r,o){super(t.body,r,o)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(re),p.LFG(Nd),p.LFG(Lg))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const D_=new p.OlP("AnimationModuleType"),L0=[{provide:Cd,useClass:ls},{provide:Lg,useFactory:function F0(){return new v0}},{provide:Lf,useClass:ND},{provide:p.FYo,useFactory:function OD(n,e,t){return new nM(n,e,t)},deps:[Sr,Lf,p.R0b]}],V0=[{provide:Nd,useFactory:function xD(){return function CD(){return"function"==typeof O0()}()?new x0:new Uf}},{provide:D_,useValue:"BrowserAnimations"},...L0],U0=[{provide:Nd,useClass:Og},{provide:D_,useValue:"NoopAnimations"},...L0];let B0=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?U0:V0}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:V0,imports:[pu]}),n})();var bn=P(7579);const Hg=["toast-component",""];function PD(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"button",5),p.NdJ("click",function(){return p.CHM(t),p.oxw().remove()}),p.TgZ(1,"span",6),p._uU(2,"\xd7"),p.qZA(),p.qZA()}}function kD(n,e){if(1&n&&(p.ynx(0),p._uU(1),p.BQk()),2&n){const t=p.oxw(2);p.xp6(1),p.hij("[",t.duplicatesCount+1,"]")}}function iM(n,e){if(1&n&&(p.TgZ(0,"div"),p._uU(1),p.YNc(2,kD,2,1,"ng-container",4),p.qZA()),2&n){const t=p.oxw();p.Tol(t.options.titleClass),p.uIk("aria-label",t.title),p.xp6(1),p.hij(" ",t.title," "),p.xp6(1),p.Q6J("ngIf",t.duplicatesCount)}}function j0(n,e){if(1&n&&p._UZ(0,"div",7),2&n){const t=p.oxw();p.Tol(t.options.messageClass),p.Q6J("innerHTML",t.message,p.oJD)}}function FD(n,e){if(1&n&&(p.TgZ(0,"div",8),p._uU(1),p.qZA()),2&n){const t=p.oxw();p.Tol(t.options.messageClass),p.uIk("aria-label",t.message),p.xp6(1),p.hij(" ",t.message," ")}}function LD(n,e){if(1&n&&(p.TgZ(0,"div"),p._UZ(1,"div",9),p.qZA()),2&n){const t=p.oxw();p.xp6(1),p.Udp("width",t.width+"%")}}function VD(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"button",5),p.NdJ("click",function(){return p.CHM(t),p.oxw().remove()}),p.TgZ(1,"span",6),p._uU(2,"\xd7"),p.qZA(),p.qZA()}}function I_(n,e){if(1&n&&(p.ynx(0),p._uU(1),p.BQk()),2&n){const t=p.oxw(2);p.xp6(1),p.hij("[",t.duplicatesCount+1,"]")}}function UD(n,e){if(1&n&&(p.TgZ(0,"div"),p._uU(1),p.YNc(2,I_,2,1,"ng-container",4),p.qZA()),2&n){const t=p.oxw();p.Tol(t.options.titleClass),p.uIk("aria-label",t.title),p.xp6(1),p.hij(" ",t.title," "),p.xp6(1),p.Q6J("ngIf",t.duplicatesCount)}}function BD(n,e){if(1&n&&p._UZ(0,"div",7),2&n){const t=p.oxw();p.Tol(t.options.messageClass),p.Q6J("innerHTML",t.message,p.oJD)}}function Gg(n,e){if(1&n&&(p.TgZ(0,"div",8),p._uU(1),p.qZA()),2&n){const t=p.oxw();p.Tol(t.options.messageClass),p.uIk("aria-label",t.message),p.xp6(1),p.hij(" ",t.message," ")}}function C_(n,e){if(1&n&&(p.TgZ(0,"div"),p._UZ(1,"div",9),p.qZA()),2&n){const t=p.oxw();p.xp6(1),p.Udp("width",t.width+"%")}}class A_{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class qg{constructor(e,t,r,o,u,d){this.toastId=e,this.config=t,this.message=r,this.title=o,this.toastType=u,this.toastRef=d,this._onTap=new bn.x,this._onAction=new bn.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const G0={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},zg=new p.OlP("ToastConfig");class oM{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new bn.x,this._activate=new bn.x,this._manualClose=new bn.x,this._resetTimeout=new bn.x,this._countDuplicate=new bn.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class jD{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,r){return e===qg?this._toastPackage:this._parentInjector.get(e,t,r)}}class q0 extends class H0{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let o;return o=r.create(e.injector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(o),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(o)),o}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class z0{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let W0=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(re))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),K0=(()=>{class n{constructor(t,r,o,u){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=o,this._document=u,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const o=this._document.createElement("div");return o.id="toast-container",o.classList.add(t),o.classList.add("toast-container"),r?r.getContainerElement().appendChild(o):this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalHost(t){return new q0(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new z0(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(W0),p.LFG(p._Vd),p.LFG(p.z2F),p.LFG(re))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bf=(()=>{class n{constructor(t,r,o,u,d){this.overlay=r,this._injector=o,this.sanitizer=u,this.ngZone=d,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}show(t,r,o={},u=""){return this._preBuildNotification(u,t,r,this.applyConfig(o))}success(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(o))}error(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(o))}info(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(o))}warning(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(o))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const o=this.toasts[this.currentlyActive].toastRef;o.isInactive()||(this.currentlyActive=this.currentlyActive+1,o.activate())}return!0}findDuplicate(t="",r="",o,u){const{includeTitleDuplicates:d}=this.toastrConfig;for(const m of this.toasts){const E=d&&m.title===t;if((!d||E)&&m.message===r)return m.toastRef.onDuplicate(o,u),m}return null}applyConfig(t={}){return Object.assign(Object.assign({},this.toastrConfig),t)}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,o,u){return u.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,o,u)):this._buildNotification(t,r,o,u)}_buildNotification(t,r,o,u){if(!u.toastComponent)throw new Error("toastComponent required");const d=this.findDuplicate(o,r,this.toastrConfig.resetTimeoutOnDuplicate&&u.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&o||r)&&this.toastrConfig.preventDuplicates&&null!==d)return d;this.previousToastMessage=r;let m=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(m=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const E=this.overlay.create(u.positionClass,this.overlayContainer);this.index=this.index+1;let D=r;r&&u.enableHtml&&(D=this.sanitizer.sanitize(p.q3G.HTML,r));const M=new oM(E),x=new qg(this.index,u,D,o,t,M),V=new jD(x,this._injector),q=new A_(u.toastComponent,V),Z=E.attach(q,this.toastrConfig.newestOnTop);M.componentInstance=Z.instance;const he={toastId:this.index,title:o||"",message:r||"",toastRef:M,onShown:M.afterActivate(),onHidden:M.afterClosed(),onTap:x.onTap(),onAction:x.onAction(),portal:Z};return m||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{he.toastRef.activate()})),this.toasts.push(he),he}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(zg),p.LFG(K0),p.LFG(p.zs3),p.LFG(Xs),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ka=(()=>{class n{constructor(t,r,o){this.toastrService=t,this.toastPackage=r,this.ngZone=o,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Bf),p.Y36(qg),p.Y36(p.R0b))},n.\u0275cmp=p.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&p.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(p.d8E("@flyInOut",r.state),p.Tol(r.toastClasses),p.Udp("display",r.displayStyle))},attrs:Hg,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(t,r){1&t&&(p.YNc(0,PD,3,0,"button",0),p.YNc(1,iM,3,5,"div",1),p.YNc(2,j0,1,3,"div",2),p.YNc(3,FD,2,4,"div",3),p.YNc(4,LD,2,2,"div",4)),2&t&&(p.Q6J("ngIf",r.options.closeButton),p.xp6(1),p.Q6J("ngIf",r.title),p.xp6(1),p.Q6J("ngIf",r.message&&r.options.enableHtml),p.xp6(1),p.Q6J("ngIf",r.message&&!r.options.enableHtml),p.xp6(1),p.Q6J("ngIf",r.options.progressBar))},directives:[or],encapsulation:2,data:{animation:[Ad("flyInOut",[Tf("inactive",Mu({opacity:0})),Tf("active",Mu({opacity:1})),Tf("removed",Mu({opacity:0})),jl("inactive => active",Sg("{{ easeTime }}ms {{ easing }}")),jl("active => removed",Sg("{{ easeTime }}ms {{ easing }}"))])]}}),n})();const Wg=Object.assign(Object.assign({},G0),{toastComponent:Ka});let $D=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:zg,useValue:{default:Wg,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[Ea]]}),n})(),uM=(()=>{class n{constructor(t,r,o){this.toastrService=t,this.toastPackage=r,this.appRef=o,this.width=-1,this.toastClasses="",this.state="inactive",this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Bf),p.Y36(qg),p.Y36(p.z2F))},n.\u0275cmp=p.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,r){1&t&&p.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(p.Tol(r.toastClasses),p.Udp("display",r.displayStyle))},attrs:Hg,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(t,r){1&t&&(p.YNc(0,VD,3,0,"button",0),p.YNc(1,UD,3,5,"div",1),p.YNc(2,BD,1,3,"div",2),p.YNc(3,Gg,2,4,"div",3),p.YNc(4,C_,2,2,"div",4)),2&t&&(p.Q6J("ngIf",r.options.closeButton),p.xp6(1),p.Q6J("ngIf",r.title),p.xp6(1),p.Q6J("ngIf",r.message&&r.options.enableHtml),p.xp6(1),p.Q6J("ngIf",r.message&&!r.options.enableHtml),p.xp6(1),p.Q6J("ngIf",r.options.progressBar))},directives:[or],encapsulation:2}),n})();function wt(...n){const e=(0,Oi.yG)(n);return(0,mn.D)(n,e)}Object.assign(Object.assign({},G0),{toastComponent:uM});class Ei extends bn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var jf=P(4671),S_=P(9672);function M_(n,e,t){n?(0,S_.f)(t,n,e):e()}const jd=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Kg=P(8189);function Zg(...n){return function qD(){return(0,Kg.J)(1)}()((0,mn.D)(n,(0,Oi.yG)(n)))}function Zl(n){return new Mr.y(e=>{(0,ka.Xf)(n()).subscribe(e)})}var Yl=P(515),J0=P(727),cs=P(4482);function Ql(){return(0,cs.e)((n,e)=>{let t=null;n._refCount++;const r=new gr.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class zD extends Mr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,cs.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new J0.w0;const t=this.getSubject();e.add(this.source.subscribe(new gr.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=J0.w0.EMPTY)}return e}refCount(){return Ql()(this)}}function wi(n,e){return(0,cs.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe(new gr.Q(r,E=>{null==o||o.unsubscribe();let D=0;const M=u++;(0,ka.Xf)(n(E,M)).subscribe(o=new gr.Q(r,x=>r.next(e?e(E,x,M,D++):x),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var R_=P(5698);function Yg(...n){const e=(0,Oi.yG)(n);return(0,cs.e)((t,r)=>{(e?Zg(n,t,e):Zg(n,t)).subscribe(r)})}function ks(n,e,t,r,o){return(u,d)=>{let m=t,E=e,D=0;u.subscribe(new gr.Q(d,M=>{const x=D++;E=m?n(E,M,x):(m=!0,M),r&&d.next(E)},o&&(()=>{m&&d.next(E),d.complete()})))}}function Jl(n,e){return(0,cs.e)(ks(n,e,arguments.length>=2,!0))}function na(n,e){return(0,cs.e)((t,r)=>{let o=0;t.subscribe(new gr.Q(r,u=>n.call(e,u,o++)&&r.next(u)))})}function Za(n){return(0,cs.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe(new gr.Q(t,void 0,void 0,d=>{u=(0,ka.Xf)(n(d,Za(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Wr=P(5577),N_=P(576);function $f(n,e){return(0,N_.m)(e)?(0,Wr.z)(n,e,1):(0,Wr.z)(n,1)}function x_(n){return n<=0?()=>Yl.E:(0,cs.e)((e,t)=>{let r=[];e.subscribe(new gr.Q(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function X0(n=WD){return(0,cs.e)((e,t)=>{let r=!1;e.subscribe(new gr.Q(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function WD(){return new jd}function O_(n){return(0,cs.e)((e,t)=>{let r=!1;e.subscribe(new gr.Q(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Uu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?na((o,u)=>n(o,u,r)):jf.y,(0,R_.q)(1),t?O_(e):X0(()=>new jd))}var ds=P(8505);class Bu{constructor(e,t){this.id=e,this.url=t}}class ew extends Bu{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xl extends Bu{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tw extends Bu{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class nw extends Bu{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class rw extends Bu{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cM extends Bu{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class go extends Bu{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class dM extends Bu{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hM extends Bu{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class P_{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class k_{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class iw{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZD{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fM{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sw{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qg{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ut="primary";class F_{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function $d(n){return new F_(n)}const ow="ngNavigationCancelingError";function L_(n){const e=Error("NavigationCancelingError: "+n);return e[ow]=!0,e}function QD(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function hs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!ec(n[o],e[o]))return!1;return!0}function ec(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function aw(n){return Array.prototype.concat.apply([],n)}function Hd(n){return n.length>0?n[n.length-1]:null}function Kr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Fs(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,mn.D)(Promise.resolve(n)):wt(n)}const Hf={exact:function fs(n,e,t){if(!Vs(n.segments,e.segments)||!Ya(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!fs(n.children[r],e.children[r],t))return!1;return!0},subset:tc},Zr={exact:function Jg(n,e){return hs(n,e)},subset:function V_(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ec(n[t],e[t]))},ignored:()=>!0};function ju(n,e,t){return Hf[t.paths](n.root,e.root,t.matrixParams)&&Zr[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function tc(n,e,t){return nc(n,e,e.segments,t)}function nc(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Vs(o,t)||e.hasChildren()||!Ya(o,t,r))}if(n.segments.length===t.length){if(!Vs(n.segments,t)||!Ya(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!tc(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Vs(n.segments,o)&&Ya(n.segments,o,r)&&n.children[Ut])&&nc(n.children[Ut],e,u,r)}}function Ya(n,e,t){return e.every((r,o)=>Zr[t](n[o].parameters,r.parameters))}class Ls{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$d(this.queryParams)),this._queryParamMap}toString(){return uw.serialize(this)}}class Ot{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Kr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gf(this)}}class ia{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=$d(this.parameters)),this._parameterMap}toString(){return cw(this)}}function Vs(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class U_{}class B_{parse(e){const t=new rI(e);return new Ls(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${zd(e.root,!0)}`,r=function dw(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${qf(t)}=${qf(o)}`).join("&"):`${qf(t)}=${qf(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function lw(n){return encodeURI(n)}(e.fragment)}`:""}`}}const uw=new B_;function Gf(n){return n.segments.map(e=>cw(e)).join("/")}function zd(n,e){if(!n.hasChildren())return Gf(n);if(e){const t=n.children[Ut]?zd(n.children[Ut],!1):"",r=[];return Kr(n.children,(o,u)=>{u!==Ut&&r.push(`${u}:${zd(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function qd(n,e){let t=[];return Kr(n.children,(r,o)=>{o===Ut&&(t=t.concat(e(r,o)))}),Kr(n.children,(r,o)=>{o!==Ut&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Ut?[zd(n.children[Ut],!1)]:[`${o}:${zd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ut]?`${Gf(n)}/${t[0]}`:`${Gf(n)}/(${t.join("//")})`}}function j_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qf(n){return j_(n).replace(/%3B/gi,";")}function Xg(n){return j_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function em(n){return decodeURIComponent(n)}function $_(n){return em(n.replace(/\+/g,"%20"))}function cw(n){return`${Xg(n.path)}${function XD(n){return Object.keys(n).map(e=>`;${Xg(e)}=${Xg(n[e])}`).join("")}(n.parameters)}`}const eI=/^[^\/()?;=#]+/;function tm(n){const e=n.match(eI);return e?e[0]:""}const hw=/^[^=?&#]+/,fw=/^[^&#]+/;class rI{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ot([],{}):new Ot([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ut]=new Ot(e,t)),r}parseSegment(){const e=tm(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ia(em(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=tm(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=tm(this.remaining);o&&(r=o,this.capture(r))}e[em(t)]=em(r)}parseQueryParam(e){const t=function tI(n){const e=n.match(hw);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function nI(n){const e=n.match(fw);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=$_(t),u=$_(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=tm(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ut);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Ut]:new Ot([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class iI{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=H_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=H_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=zf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return zf(e,this._root).map(t=>t.value)}}function H_(n,e){if(n===e.value)return e;for(const t of e.children){const r=H_(n,t);if(r)return r}return null}function zf(n,e){if(n===e.value)return[e];for(const t of e.children){const r=zf(n,t);if(r.length)return r.unshift(e),r}return[]}class mo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Wd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class sI extends iI{constructor(e,t){super(e),this.snapshot=t,q_(this,e)}toString(){return this.snapshot.toString()}}function oI(n,e){const t=function gM(n,e){const d=new nm([],{},{},"",{},Ut,e,null,n.root,-1,{});return new rc("",new mo(d,[]))}(n,e),r=new Ei([new ia("",{})]),o=new Ei({}),u=new Ei({}),d=new Ei({}),m=new Ei(""),E=new Kd(r,o,d,m,u,Ut,e,t.root);return E.snapshot=t.root,new sI(new mo(E,[]),t)}class Kd{constructor(e,t,r,o,u,d,m,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_t.U)(e=>$d(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_t.U)(e=>$d(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function G_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function mM(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class nm{constructor(e,t,r,o,u,d,m,E,D,M,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=E,this._urlSegment=D,this._lastPathIndex=M,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$d(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$d(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class rc extends iI{constructor(e,t){super(t),this.url=e,q_(this,t)}toString(){return z_(this._root)}}function q_(n,e){e.value._routerState=n,e.children.forEach(t=>q_(n,t))}function z_(n){const e=n.children.length>0?` { ${n.children.map(z_).join(", ")} } `:"";return`${n.value}${e}`}function W_(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,hs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),hs(e.params,t.params)||n.params.next(t.params),function JD(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!hs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),hs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function rm(n,e){const t=hs(n.params,e.params)&&function Gd(n,e){return Vs(n,e)&&n.every((t,r)=>hs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||rm(n.parent,e.parent))}function Wf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function pw(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Wf(n,r,o);return Wf(n,r)})}(n,e,t);return new mo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Wf(n,m)),d}}const r=function aI(n){return new Kd(new Ei(n.url),new Ei(n.params),new Ei(n.queryParams),new Ei(n.fragment),new Ei(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Wf(n,u));return new mo(r,o)}}function sm(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Kf(n){return"object"==typeof n&&null!=n&&n.outlets}function K_(n,e,t,r,o){let u={};return r&&Kr(r,(d,m)=>{u[m]=Array.isArray(d)?d.map(E=>`${E}`):`${d}`}),new Ls(t.root===n?e:Z_(t.root,n,e),u,o)}function Z_(n,e,t){const r={};return Kr(n.children,(o,u)=>{r[u]=o===e?t:Z_(o,e,t)}),new Ot(n.segments,r)}class gw{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&sm(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Kf);if(o&&o!==Hd(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class om{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function yw(n,e,t){if(n||(n=new Ot([],{})),0===n.segments.length&&n.hasChildren())return J_(n,e,t);const r=function Zf(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(Kf(m))break;const E=`${m}`,D=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&D&&"object"==typeof D&&void 0===D.outlets){if(!_w(E,D,d))return u;r+=2}else{if(!_w(E,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ot(n.segments.slice(0,r.pathIndex),{});return u.children[Ut]=new Ot(n.segments.slice(r.pathIndex),n.children),J_(u,0,o)}return r.match&&0===o.length?new Ot(n.segments,{}):r.match&&!n.hasChildren()?am(n,e,t):r.match?J_(n,0,o):am(n,e,t)}function J_(n,e,t){if(0===t.length)return new Ot(n.segments,{});{const r=function Q_(n){return Kf(n[0])?n[0].outlets:{[Ut]:n}}(t),o={};return Kr(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=yw(n.children[d],e,u))}),Kr(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Ot(n.segments,o)}}function am(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Kf(u)){const E=X_(u.outlets);return new Ot(r,E)}if(0===o&&sm(t[0])){r.push(new ia(n.segments[e].path,um(t[0]))),o++;continue}const d=Kf(u)?u.outlets[Ut]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&sm(m)?(r.push(new ia(d,um(m))),o+=2):(r.push(new ia(d,{})),o++)}return new Ot(r,{})}function X_(n){const e={};return Kr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=am(new Ot([],{}),0,t))}),e}function um(n){const e={};return Kr(n,(t,r)=>e[r]=`${t}`),e}function _w(n,e,t){return n==t.path&&hs(e,t.parameters)}class tv{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),W_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Wd(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Kr(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Wd(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Wd(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Wd(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new sw(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ZD(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(W_(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),W_(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function vw(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),E=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=E,d.outlet&&d.outlet.activateWith(o,E),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class Ew{constructor(e,t){this.routes=e,this.module=t}}function $u(n){return"function"==typeof n}function Qa(n){return n instanceof Ls}const Zd=Symbol("INITIAL_VALUE");function ic(){return wi(n=>function Y0(...n){const e=(0,Oi.yG)(n),t=(0,Oi.jO)(n),{args:r,keys:o}=nd(n);if(0===r.length)return(0,mn.D)([],e);const u=new Mr.y(function Q0(n,e,t=jf.y){return r=>{M_(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let E=0;E<o;E++)M_(e,()=>{const D=(0,mn.D)(n[E],e);let M=!1;D.subscribe(new gr.Q(r,x=>{u[E]=x,M||(M=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>Fo(o,d):jf.y));return t?u.pipe(rd(t)):u}(n.map(e=>e.pipe((0,R_.q)(1),Yg(Zd)))).pipe(Jl((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==Zd?o:(u===Zd&&(r=!0),r||!1!==u&&d!==t.length-1&&!Qa(u)?o:u),e)},Zd),na(e=>e!==Zd),(0,_t.U)(e=>Qa(e)?e:!0===e),(0,R_.q)(1)))}class bw{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Yf,this.attachRef=null}}class Yf{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new bw,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let iv=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=u||Ut,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,E=new Dw(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Yf),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Dw{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Kd?this.route:e===Yf?this.childContexts:this.parent.get(e,t)}}let lm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[iv],encapsulation:2}),n})();function sv(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];cI(r,dI(e,r))}}function cI(n,e){n.children&&sv(n.children,e)}function dI(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ov(n){const e=n.children&&n.children.map(ov),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ut&&(t.component=lm),t}function ps(n){return n.outlet||Ut}function cm(n,e){const t=n.filter(r=>ps(r)===e);return t.push(...n.filter(r=>ps(r)!==e)),t}const av={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Qf(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},av):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const u=(e.matcher||QD)(t,n,e);if(!u)return Object.assign({},av);const d={};Kr(u.posParams,(E,D)=>{d[D]=E.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Jf(n,e,t,r,o="corrected"){if(t.length>0&&function Aw(n,e,t){return t.some(r=>Xf(n,e,r)&&ps(r)!==Ut)}(n,t,r)){const d=new Ot(e,function Cw(n,e,t,r){const o={};o[Ut]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ps(u)!==Ut){const d=new Ot([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[ps(u)]=d}return o}(n,e,r,new Ot(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Sw(n,e,t){return t.some(r=>Xf(n,e,r))}(n,t,r)){const d=new Ot(n.segments,function Iw(n,e,t,r,o,u){const d={};for(const m of r)if(Xf(n,t,m)&&!o[ps(m)]){const E=new Ot([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[ps(m)]=E}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Ot(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Xf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function hI(n,e,t,r){return!!(ps(n)===r||r!==Ut&&Xf(e,t,n))&&("**"===n.path||Qf(e,n,t).matched)}function Mw(n,e,t){return 0===e.length&&!n.children[t]}class ep{constructor(e){this.segmentGroup=e||null}}class uv{constructor(e){this.urlTree=e}}function dm(n){return new Mr.y(e=>e.error(new ep(n)))}function lr(n){return new Mr.y(e=>e.error(new uv(n)))}function Rw(n){return new Mr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Nw{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(p.h0i)}apply(){const e=Jf(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ot(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ut).pipe((0,_t.U)(u=>this.createUrlTree(hm(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Za(u=>{if(u instanceof uv)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ep?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ut).pipe((0,_t.U)(o=>this.createUrlTree(hm(o),e.queryParams,e.fragment))).pipe(Za(o=>{throw o instanceof ep?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Ot([],{[Ut]:e}):e;return new Ls(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,_t.U)(u=>new Ot([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,mn.D)(o).pipe($f(u=>{const d=r.children[u],m=cm(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,_t.U)(E=>({segment:E,outlet:u})))}),Jl((u,d)=>(u[d.outlet]=d.segment,u),{}),function lM(n,e){const t=arguments.length>=2;return r=>r.pipe(n?na((o,u)=>n(o,u,r)):jf.y,x_(1),t?O_(e):X0(()=>new jd))}())}expandSegment(e,t,r,o,u,d){return(0,mn.D)(r).pipe($f(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(Za(D=>{if(D instanceof ep)return wt(null);throw D}))),Uu(m=>!!m),Za((m,E)=>{if(m instanceof jd||"EmptyError"===m.name){if(Mw(t,o,u))return wt(new Ot([],{}));throw new ep(t)}throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return hI(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):dm(t):dm(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?lr(u):this.lineralizeSegments(r,u).pipe((0,Wr.z)(d=>{const m=new Ot(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:E,lastChild:D,positionalParamSegments:M}=Qf(t,o,u);if(!m)return dm(t);const x=this.applyRedirectCommands(E,o.redirectTo,M);return o.redirectTo.startsWith("/")?lr(x):this.lineralizeSegments(o,x).pipe((0,Wr.z)(V=>this.expandSegment(e,t,r,V.concat(u.slice(D)),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?wt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,_t.U)(V=>(r._loadedConfig=V,new Ot(o,{})))):wt(new Ot(o,{}));const{matched:d,consumedSegments:m,lastChild:E}=Qf(t,r,o);if(!d)return dm(t);const D=o.slice(E);return this.getChildConfig(e,r,o).pipe((0,Wr.z)(x=>{const V=x.module,q=x.routes,{segmentGroup:Z,slicedSegments:he}=Jf(t,m,D,q),Pe=new Ot(Z.segments,Z.children);if(0===he.length&&Pe.hasChildren())return this.expandChildren(V,q,Pe).pipe((0,_t.U)(ct=>new Ot(m,ct)));if(0===q.length&&0===he.length)return wt(new Ot(m,{}));const ot=ps(r)===u;return this.expandSegment(V,Pe,q,he,ot?Ut:u,!0).pipe((0,_t.U)(Pt=>new Ot(m.concat(Pt.segments),Pt.children)))}))}getChildConfig(e,t,r){return t.children?wt(new Ew(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?wt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Wr.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,_t.U)(u=>(t._loadedConfig=u,u))):function fI(n){return new Mr.y(e=>e.error(L_(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):wt(new Ew([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?wt(o.map(d=>{const m=e.get(d);let E;if(function lI(n){return n&&$u(n.canLoad)}(m))E=m.canLoad(t,r);else{if(!$u(m))throw new Error("Invalid CanLoad guard");E=m(t,r)}return Fs(E)})).pipe(ic(),(0,ds.b)(d=>{if(!Qa(d))return;const m=L_(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,_t.U)(d=>!0===d)):wt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return wt(r);if(o.numberOfChildren>1||!o.children[Ut])return Rw(e.redirectTo);o=o.children[Ut]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Ls(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Kr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Kr(t.children,(m,E)=>{d[E]=this.createSegmentGroup(e,m,r,o)}),new Ot(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function hm(n){const e={};for(const r of Object.keys(n.children)){const u=hm(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function gI(n){if(1===n.numberOfChildren&&n.children[Ut]){const e=n.children[Ut];return new Ot(n.segments.concat(e.segments),e.children)}return n}(new Ot(n.segments,e))}class sc{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class fm{constructor(e,t){this.component=e,this.route=t}}function mI(n,e,t){const r=n._root;return gm(r,e?e._root:null,t,[r.value])}function pm(n,e,t){const r=function Pw(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function gm(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Wd(e);return n.children.forEach(d=>{(function lv(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const E=function cv(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Vs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Vs(n.url,e.url)||!hs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rm(n,e)||!hs(n.queryParams,e.queryParams);default:return!rm(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new sc(r)):(u.data=d.data,u._resolvedData=d._resolvedData),gm(n,e,u.component?m?m.children:null:t,r,o),E&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new fm(m.outlet.component,d))}else d&&Hi(e,m,o),o.canActivateChecks.push(new sc(r)),gm(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Kr(u,(d,m)=>Hi(d,t.getContext(m),o)),o}function Hi(n,e,t){const r=Wd(n),o=n.value;Kr(r,(u,d)=>{Hi(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new fm(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class vI{}function Vw(n){return new Mr.y(e=>e.error(n))}class dv{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Jf(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ut);if(null===t)return null;const r=new nm([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ut,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new mo(r,t),u=new rc(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=G_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=cm(e,u),E=this.processSegmentGroup(m,d,u);if(null===E)return null;r.push(...E)}const o=Bw(r);return function tp(n){n.sort((e,t)=>e.value.outlet===Ut?-1:t.value.outlet===Ut?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return Mw(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!hI(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const q=r.length>0?Hd(r).parameters:{};u=new nm(r,q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,jw(e),ps(e),e.component,e,hv(t),np(t)+r.length,fv(e))}else{const q=Qf(t,e,r);if(!q.matched)return null;d=q.consumedSegments,m=r.slice(q.lastChild),u=new nm(d,q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,jw(e),ps(e),e.component,e,hv(t),np(t)+d.length,fv(e))}const E=function wI(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:D,slicedSegments:M}=Jf(t,d,m,E.filter(q=>void 0===q.redirectTo),this.relativeLinkResolution);if(0===M.length&&D.hasChildren()){const q=this.processChildren(E,D);return null===q?null:[new mo(u,q)]}if(0===E.length&&0===M.length)return[new mo(u,[])];const x=ps(e)===o,V=this.processSegment(E,D,M,x?Ut:o);return null===V?null:[new mo(u,V)]}}function Uw(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Bw(n){const e=[],t=new Set;for(const r of n){if(!Uw(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Bw(r.children);e.push(new mo(r.value,o))}return e.filter(r=>!t.has(r))}function hv(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function np(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function jw(n){return n.data||{}}function fv(n){return n.resolve||{}}function ym(n){return wi(e=>{const t=n(e);return t?(0,mn.D)(t).pipe((0,_t.U)(()=>e)):wt(e)})}class Ww extends class zw{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const _m=new p.OlP("ROUTES");class gv{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,_t.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new Ew(aw(d.injector.get(_m,void 0,p.XFs.Self|p.XFs.Optional)).map(ov),d)}),Za(u=>{throw t._loader$=void 0,u}));return t._loader$=new zD(o,()=>new bn.x).pipe(Ql()),t._loader$}loadModuleFactory(e){return Fs(e()).pipe((0,Wr.z)(t=>t instanceof p.YKP?wt(t):(0,mn.D)(this.compiler.compileModuleAsync(t))))}}class DI{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function II(n){throw n}function CI(n,e,t){return e.parse("/")}function Kw(n,e){return wt(null)}const AI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gs=(()=>{class n{constructor(t,r,o,u,d,m,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new bn.x,this.errorHandler=II,this.malformedUriErrorHandler=CI,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Kw,afterPreactivation:Kw},this.urlHandlingStrategy=new DI,this.routeReuseStrategy=new Ww,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(p.h0i),this.console=d.get(p.c2e);const x=d.get(p.R0b);this.isNgZoneEnabled=x instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function ra(){return new Ls(new Ot([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new gv(d,m,V=>this.triggerEvent(new P_(V)),V=>this.triggerEvent(new k_(V))),this.routerState=oI(this.currentUrlTree,this.rootComponentType),this.transitions=new Ei({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(na(o=>0!==o.id),(0,_t.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),wi(o=>{let u=!1,d=!1;return wt(o).pipe((0,ds.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),wi(m=>{const E=this.browserUrlTree.toString(),D=!this.navigated||m.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return vm(m.source)&&(this.browserUrlTree=m.extractedUrl),wt(m).pipe(wi(x=>{const V=this.transitions.getValue();return r.next(new ew(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),V!==this.transitions.getValue()?Yl.E:Promise.resolve(x)}),function xw(n,e,t,r){return wi(o=>function pI(n,e,t,r,o){return new Nw(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,_t.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ds.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function $w(n,e,t,r,o){return(0,Wr.z)(u=>function EI(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new dv(n,e,t,r,o,u).recognize();return null===d?Vw(new vI):wt(d)}catch(d){return Vw(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,_t.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ds.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const q=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(q,x)}this.browserUrlTree=x.urlAfterRedirects}const V=new rw(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(V)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:q,source:Z,restoredState:he,extras:Pe}=m,ot=new ew(V,this.serializeUrl(q),Z,he);r.next(ot);const yt=oI(q,this.rootComponentType).snapshot;return wt(Object.assign(Object.assign({},m),{targetSnapshot:yt,urlAfterRedirects:q,extras:Object.assign(Object.assign({},Pe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Yl.E}),ym(m=>{const{targetSnapshot:E,id:D,extractedUrl:M,rawUrl:x,extras:{skipLocationChange:V,replaceUrl:q}}=m;return this.hooks.beforePreactivation(E,{navigationId:D,appliedUrlTree:M,rawUrlTree:x,skipLocationChange:!!V,replaceUrl:!!q})}),(0,ds.b)(m=>{const E=new cM(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(E)}),(0,_t.U)(m=>Object.assign(Object.assign({},m),{guards:mI(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function yI(n,e){return(0,Wr.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?wt(Object.assign(Object.assign({},t),{guardsResult:!0})):function kw(n,e,t,r){return(0,mn.D)(n).pipe((0,Wr.z)(o=>function _I(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?wt(u.map(m=>{const E=pm(m,e,o);let D;if(function Tw(n){return n&&$u(n.canDeactivate)}(E))D=Fs(E.canDeactivate(n,e,t,r));else{if(!$u(E))throw new Error("Invalid CanDeactivate guard");D=Fs(E(n,e,t,r))}return D.pipe(Uu())})).pipe(ic()):wt(!0)}(o.component,o.route,t,e,r)),Uu(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Wr.z)(m=>m&&function nv(n){return"boolean"==typeof n}(m)?function sa(n,e,t,r){return(0,mn.D)(e).pipe($f(o=>Zg(function _o(n,e){return null!==n&&e&&e(new iw(n)),wt(!0)}(o.route.parent,r),function yo(n,e){return null!==n&&e&&e(new fM(n)),wt(!0)}(o.route,r),function Lw(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Ow(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Zl(()=>wt(d.guards.map(E=>{const D=pm(E,d.node,t);let M;if(function rv(n){return n&&$u(n.canActivateChild)}(D))M=Fs(D.canActivateChild(r,n));else{if(!$u(D))throw new Error("Invalid CanActivateChild guard");M=Fs(D(r,n))}return M.pipe(Uu())})).pipe(ic())));return wt(u).pipe(ic())}(n,o.path,t),function Fw(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return wt(!0);const o=r.map(u=>Zl(()=>{const d=pm(u,e,t);let m;if(function ww(n){return n&&$u(n.canActivate)}(d))m=Fs(d.canActivate(e,n));else{if(!$u(d))throw new Error("Invalid CanActivate guard");m=Fs(d(e,n))}return m.pipe(Uu())}));return wt(o).pipe(ic())}(n,o.route,t))),Uu(o=>!0!==o,!0))}(r,u,n,e):wt(m)),(0,_t.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,ds.b)(m=>{if(Qa(m.guardsResult)){const D=L_(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw D.url=m.guardsResult,D}const E=new go(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(E)}),na(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),ym(m=>{if(m.guards.canActivateChecks.length)return wt(m).pipe((0,ds.b)(E=>{const D=new dM(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(D)}),wi(E=>{let D=!1;return wt(E).pipe(function pv(n,e){return(0,Wr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return wt(t);let u=0;return(0,mn.D)(o).pipe($f(d=>function mm(n,e,t,r){return function Hw(n,e,t,r){const o=Object.keys(n);if(0===o.length)return wt({});const u={};return(0,mn.D)(o).pipe((0,Wr.z)(d=>function Gw(n,e,t,r){const o=pm(n,e,r);return Fs(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,ds.b)(m=>{u[d]=m}))),x_(1),(0,Wr.z)(()=>Object.keys(u).length===o.length?wt(u):Yl.E))}(n._resolve,n,e,r).pipe((0,_t.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),G_(n,t).resolve),null)))}(d.route,r,n,e)),(0,ds.b)(()=>u++),x_(1),(0,Wr.z)(d=>u===o.length?wt(t):Yl.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ds.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,ds.b)(E=>{const D=new hM(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(D)}))}),ym(m=>{const{targetSnapshot:E,id:D,extractedUrl:M,rawUrl:x,extras:{skipLocationChange:V,replaceUrl:q}}=m;return this.hooks.afterPreactivation(E,{navigationId:D,appliedUrlTree:M,rawUrlTree:x,skipLocationChange:!!V,replaceUrl:!!q})}),(0,_t.U)(m=>{const E=function im(n,e,t){const r=Wf(n,e._root,t?t._root:void 0);return new sI(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:E})}),(0,ds.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,_t.U)(r=>(new tv(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,ds.b)({next(){u=!0},complete(){u=!0}}),function KD(n){return(0,cs.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),Za(m=>{if(d=!0,function YD(n){return n&&n[ow]}(m)){const E=Qa(m.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const D=new tw(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(D),E?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),x={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||vm(o.source)};this.scheduleNavigation(M,"imperative",null,x,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new nw(o.id,this.serializeUrl(o.extractedUrl),m);r.next(E);try{o.resolve(this.errorHandler(m))}catch(D){o.reject(D)}}return Yl.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const E=Object.assign({},d);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(u.state=E)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){sv(t),this.config=t.map(ov),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:E}=r,D=o||this.routerState.root,M=E?this.currentUrlTree.fragment:d;let x=null;switch(m){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),function uI(n,e,t,r,o){if(0===t.length)return K_(e.root,e.root,e,r,o);const u=function mw(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new gw(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Kr(u.outlets,(E,D)=>{m[D]="string"==typeof E?E.split("/"):E}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,E)=>{0==E&&"."===m||(0==E&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new gw(t,e,r)}(t);if(u.toRoot())return K_(e.root,new Ot([],{}),e,r,o);const d=function Y_(n,e,t){if(n.isAbsolute)return new om(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new om(u,u===e.root,0)}const r=sm(n.commands[0])?0:1;return function yM(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new om(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?J_(d.segmentGroup,d.index,u.commands):yw(d.segmentGroup,d.index,u.commands);return K_(d.segmentGroup,m,e,r,o)}(D,this.currentUrlTree,t,x,null!=M?M:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Qa(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function MI(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},AI):!1===r?Object.assign({},SI):r,Qa(t))return ju(this.currentUrlTree,t,o);const u=this.parseUrl(t);return ju(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Xl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,E,D;if(this.disposed)return Promise.resolve(!1);const M=this.transitions.value,x=vm(r)&&M&&!vm(M.source),V=M.rawUrl.toString()===t.toString(),q=M.id===(null===(m=this.currentNavigation)||void 0===m?void 0:m.id);if(x&&V&&q)return Promise.resolve(!0);let he,Pe,ot;d?(he=d.resolve,Pe=d.reject,ot=d.promise):ot=new Promise((ct,un)=>{he=ct,Pe=un});const yt=++this.navigationId;let Pt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Pt=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(E=this.browserPageId)&&void 0!==E?E:0:(null!==(D=this.browserPageId)&&void 0!==D?D:0)+1):Pt=0,this.setTransition({id:yt,targetPageId:Pt,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:he,reject:Pe,promise:ot,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ot.catch(ct=>Promise.reject(ct))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new tw(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function vm(n){return"imperative"!==n}class Zw{}class Yw{preload(e,t){return wt(null)}}let _v=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new gv(o,r,E=>t.triggerEvent(new P_(E)),E=>t.triggerEvent(new k_(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(na(t=>t instanceof Xl),$f(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(p.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,mn.D)(o).pipe((0,Kg.J)(),(0,_t.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?wt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Wr.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(gs),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(Zw))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Em=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ew?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Xl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Qg&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Qg(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Hu=new p.OlP("ROUTER_CONFIGURATION"),vv=new p.OlP("ROUTER_FORROOT_GUARD"),Qw=[Be,{provide:U_,useClass:B_},{provide:gs,useFactory:function PI(n,e,t,r,o,u,d={},m,E){const D=new gs(null,n,e,t,r,o,aw(u));return m&&(D.urlHandlingStrategy=m),E&&(D.routeReuseStrategy=E),function kI(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,D),d.enableTracing&&D.events.subscribe(M=>{var x,V;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(V=console.groupEnd)||void 0===V||V.call(console)}),D},deps:[U_,Yf,Be,p.zs3,p.Sil,_m,Hu,[class bI{},new p.FiY],[class qw{},new p.FiY]]},Yf,{provide:Kd,useFactory:function Qd(n){return n.routerState.root},deps:[gs]},_v,Yw,class xI{preload(e,t){return t().pipe(Za(()=>wt(null)))}},{provide:Hu,useValue:{enableTracing:!1}}];function Jw(){return new p.PXZ("Router",gs)}let Ev=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Qw,Gu(t),{provide:vv,useFactory:wv,deps:[[gs,new p.FiY,new p.tp0]]},{provide:Hu,useValue:r||{}},{provide:K,useFactory:eT,deps:[oe,[new p.tBr(pe),new p.FiY],Hu]},{provide:Em,useFactory:Xw,deps:[gs,fl,Hu]},{provide:Zw,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Yw},{provide:p.PXZ,multi:!0,useFactory:Jw},[tT,{provide:p.ip1,multi:!0,useFactory:Tv,deps:[tT]},{provide:bv,useFactory:_M,deps:[tT]},{provide:p.tb,multi:!0,useExisting:bv}]]}}static forChild(t){return{ngModule:n,providers:[Gu(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(vv,8),p.LFG(gs,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function Xw(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Em(n,e,t)}function eT(n,e,t={}){return t.useHash?new ge(n,e):new we(n,e)}function wv(n){return"guarded"}function Gu(n){return[{provide:p.deG,multi:!0,useValue:n},{provide:_m,multi:!0,useValue:n}]}let tT=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new bn.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(gs),d=this.injector.get(Hu);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?wt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Hu),o=this.injector.get(_v),u=this.injector.get(Em),d=this.injector.get(gs),m=this.injector.get(p.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Tv(n){return n.appInitializer.bind(n)}function _M(n){return n.bootstrapListener.bind(n)}const bv=new p.OlP("Router Initializer"),mt=[];let FI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[Ev.forRoot(mt)],Ev]}),n})();var LI=P(4986),ti=P(5813);function Jd(){return(0,cs.e)((n,e)=>{let t,r=!1;n.subscribe(new gr.Q(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function wm(n,e){return n===e}P(1119);var Ze,zn=P(3942),ye=P(5861),qu=P(9681),Tm=P(4859),zu=P(1877),Lt=P(2090),rT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},oa={},Iv=Iv||{},It=rT||self;function bm(){}function oc(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function rp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Cv="closure_uid_"+(1e9*Math.random()>>>0),Dm=0;function iT(n,e,t){return n.call.apply(n.bind,arguments)}function sT(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Pr(n,e,t){return(Pr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?iT:sT).apply(null,arguments)}function Im(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function tr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Us(){this.s=this.s,this.o=this.o}var jI={};Us.prototype.s=!1,Us.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function UI(n){return Object.prototype.hasOwnProperty.call(n,Cv)&&n[Cv]||(n[Cv]=++Dm)}(this);delete jI[n]}},Us.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const oT=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Av=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function Sv(n){return Array.prototype.concat.apply([],arguments)}function Mv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ip(n){return/^[\s\xa0]*$/.test(n)}var Gi,uT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ti(n,e){return-1!=n.indexOf(e)}function lT(n,e){return n<e?-1:n>e?1:0}e:{var $I=It.navigator;if($I){var HI=$I.userAgent;if(HI){Gi=HI;break e}}Gi=""}function Cm(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function sp(n){const e={};for(const t in n)e[t]=n[t];return e}var cT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dT(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<cT.length;u++)t=cT[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Am(n){return Am[" "](n),n}Am[" "]=bm;var Sm,n,GI=Ti(Gi,"Opera"),Xd=Ti(Gi,"Trident")||Ti(Gi,"MSIE"),hT=Ti(Gi,"Edge"),Rv=hT||Xd,fT=Ti(Gi,"Gecko")&&!(Ti(Gi.toLowerCase(),"webkit")&&!Ti(Gi,"Edge"))&&!(Ti(Gi,"Trident")||Ti(Gi,"MSIE"))&&!Ti(Gi,"Edge"),pT=Ti(Gi.toLowerCase(),"webkit")&&!Ti(Gi,"Edge");function gT(){var n=It.document;return n?n.documentMode:void 0}e:{var Wu="",Nv=(n=Gi,fT?/rv:([^\);]+)(\)|;)/.exec(n):hT?/Edge\/([\d\.]+)/.exec(n):Xd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):pT?/WebKit\/(\S+)/.exec(n):GI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Nv&&(Wu=Nv?Nv[1]:""),Xd){var Mm=gT();if(null!=Mm&&Mm>parseFloat(Wu)){Sm=String(Mm);break e}}Sm=Wu}var qI={};var zI=It.document&&Xd&&(gT()||parseInt(Sm,10))||void 0,Pv=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",bm,e),It.removeEventListener("test",bm,e)}catch(t){}return n}();function ni(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function eh(n,e){if(ni.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(fT){e:{try{Am(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:yT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&eh.Z.h.call(this)}}ni.prototype.h=function(){this.defaultPrevented=!0},tr(eh,ni);var yT={2:"touch",3:"pen",4:"mouse"};eh.prototype.h=function(){eh.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ap="closure_listenable_"+(1e6*Math.random()|0),WI=0;function KI(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++WI,this.ca=this.fa=!1}function th(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Rm(n){this.src=n,this.g={},this.h=0}function Nm(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=oT(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(th(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function kv(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Rm.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=kv(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new KI(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Fv="closure_lm_"+(1e6*Math.random()|0),Lv={};function _T(n,e,t,r,o){if(r&&r.once)return ET(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)_T(n,e[u],t,r,o);return null}return t=Bv(t),n&&n[ap]?n.N(e,t,rp(r)?!!r.capture:!!r,o):vT(n,e,t,!1,r,o)}function vT(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=rp(o)?!!o.capture:!!o,m=Uv(n);if(m||(n[Fv]=m=new Rm(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function ZI(){var e=YI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Pv||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Vv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ET(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)ET(n,e[u],t,r,o);return null}return t=Bv(t),n&&n[ap]?n.O(e,t,rp(r)?!!r.capture:!!r,o):vT(n,e,t,!0,r,o)}function wT(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)wT(n,e[u],t,r,o);else r=rp(r)?!!r.capture:!!r,t=Bv(t),n&&n[ap]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=kv(u=n.g[e],t,r,o))&&(th(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Uv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=kv(e,t,r,o)),(t=-1<n?e[n]:null)&&xm(t))}function xm(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[ap])Nm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Vv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Uv(e))?(Nm(t,n),0==t.h&&(t.src=null,e[Fv]=null)):th(n)}}}function Vv(n){return n in Lv?Lv[n]:Lv[n]="on"+n}function YI(n,e){if(n.ca)n=!0;else{e=new eh(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&xm(n),n=t.call(r,e)}return n}function Uv(n){return(n=n[Fv])instanceof Rm?n:null}var Om="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bv(n){return"function"==typeof n?n:(n[Om]||(n[Om]=function(e){return n.handleEvent(e)}),n[Om])}function kr(){Us.call(this),this.i=new Rm(this),this.P=this,this.I=null}function Yr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ni(e,n);else if(e instanceof ni)e.target=e.target||n;else{var o=e;dT(e=new ni(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=nh(d,r,!0,e)&&o}if(o=nh(d=e.g=n,r,!0,e)&&o,o=nh(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=nh(d=e.g=t[u],r,!1,e)&&o}function nh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,E=d.ia||d.src;d.fa&&Nm(n.i,d),o=!1!==m.call(E,r)&&o}}return o&&!r.defaultPrevented}tr(kr,Us),kr.prototype[ap]=!0,kr.prototype.removeEventListener=function(n,e,t,r){wT(this,n,e,t,r)},kr.prototype.M=function(){if(kr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)th(t[r]);delete n.g[e],n.h--}}this.I=null},kr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},kr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var up=It.JSON.stringify;function TT(){var n=DT;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Pm,bT=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new QI,n=>n.reset());class QI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function $v(n){It.setTimeout(()=>{throw n},0)}function Hv(n,e){Pm||function JI(){var n=It.Promise.resolve(void 0);Pm=function(){n.then(IT)}}(),km||(Pm(),km=!0),DT.add(n,e)}var km=!1,DT=new class jv{constructor(){this.h=this.g=null}add(e,t){const r=bT.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function IT(){for(var n;n=TT();){try{n.h.call(n.g)}catch(t){$v(t)}var e=bT;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}km=!1}function Gv(n,e){kr.call(this),this.h=n||1,this.g=e||It,this.j=Pr(this.kb,this),this.l=Date.now()}function qv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function ac(n,e,t){if("function"==typeof n)t&&(n=Pr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Pr(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function CT(n){n.g=ac(()=>{n.g=null,n.i&&(n.i=!1,CT(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}tr(Gv,kr),(Ze=Gv.prototype).da=!1,Ze.S=null,Ze.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Yr(this,"tick"),this.da&&(qv(this),this.start()))}},Ze.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ze.M=function(){Gv.Z.M.call(this),qv(this),delete this.g};class rh extends Us{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:CT(this)}M(){super.M(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ja(n){Us.call(this),this.h=n,this.g={}}tr(Ja,Us);var AT=[];function XI(n,e,t,r){Array.isArray(t)||(t&&(AT[0]=t.toString()),t=AT);for(var o=0;o<t.length;o++){var u=_T(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function zv(n){Cm(n.g,function(e,t){this.g.hasOwnProperty(t)&&xm(e)},n),n.g={}}function Fm(){this.g=!0}function ih(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function MT(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return up(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Ja.prototype.M=function(){Ja.Z.M.call(this),zv(this)},Ja.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fm.prototype.Aa=function(){this.g=!1},Fm.prototype.info=function(){};var Xa={},lp=null;function Ku(){return lp=lp||new kr}function RT(n){ni.call(this,Xa.Ma,n)}function sh(n){const e=Ku();Yr(e,new RT(e,n))}function Wv(n,e){ni.call(this,Xa.STAT_EVENT,n),this.stat=e}function bi(n){const e=Ku();Yr(e,new Wv(e,n))}function NT(n,e){ni.call(this,Xa.Na,n),this.size=e}function cp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}Xa.Ma="serverreachability",tr(RT,ni),Xa.STAT_EVENT="statevent",tr(Wv,ni),Xa.Na="timingevent",tr(NT,ni);var oh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},xT={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function OT(){}function kT(){}OT.prototype.h=null;var FT,aa={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Lm(){ni.call(this,"d")}function Zu(){ni.call(this,"c")}function dp(){}function hp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Ja(this),this.P=LT,this.W=new Gv(n=Rv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new nC}function nC(){this.i=null,this.g="",this.h=!1}tr(Lm,ni),tr(Zu,ni),tr(dp,OT),dp.prototype.g=function(){return new XMLHttpRequest},dp.prototype.i=function(){return{}},FT=new dp;var LT=45e3,VT={},fp={};function pp(n,e,t){n.K=1,n.v=Gm(eu(e)),n.s=t,n.U=!0,UT(n,null)}function UT(n,e){n.F=Date.now(),gp(n),n.A=eu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Wm(t.h,"t",r),n.C=0,t=n.l.H,n.h=new nC,n.g=rb(n.l,t?e:null,!n.s),0<n.O&&(n.L=new rh(Pr(n.Ia,n,n.g),n.O)),XI(n.V,n.g,"readystatechange",n.gb),e=n.H?sp(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),sh(1),function eC(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),E=0;E<m.length;E++){var D=m[E].split("=");if(1<D.length){var M=D[0];D=D[1];var x=M.split("_");d=2<=x.length&&"type"==x[1]?d+(M+"=")+D+"&":d+(M+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function BT(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function jT(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=rC(n,t),o==fp){4==e&&(n.o=4,bi(14),r=!1),ih(n.j,n.m,null,"[Incomplete Response]");break}if(o==VT){n.o=4,bi(15),ih(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ih(n.j,n.m,o,null),Kv(n,o)}BT(n)&&o!=fp&&o!=VT&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,bi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),tb(e),e.L=!0,bi(11))):(ih(n.j,n.m,t,"[Invalid Chunked Response]"),uc(n),mp(n))}function rC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?fp:(t=Number(e.substring(t,r)),isNaN(t)?VT:(r+=1)+t>e.length?fp:(e=e.substr(r,t),n.C=r+t,e))}function gp(n){n.Y=Date.now()+n.P,$T(n,n.P)}function $T(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=cp(Pr(n.eb,n),e)}function Vm(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function mp(n){0==n.l.G||n.I||iE(n.l,n)}function uc(n){Vm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,qv(n.W),zv(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Kv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||wp(t.i,n)))if(t.I=n.N,!n.J&&wp(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(D){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=cp(Pr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Xm(t),ph(t)}Sp(t),bi(18)}if(1>=eE(t.i)&&t.ka){try{t.ka()}catch(D){}t.ka=void 0}}else fc(t,11)}else if((n.J||t.g==n)&&Xm(t),!ip(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let D=o[e];if(t.U=D[0],D=D[1],2==t.G)if("c"==D[0]){t.J=D[1],t.la=D[2];const M=D[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const x=D[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const V=D[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const Z=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var u=r.i;!u.g&&(Ti(Z,"spdy")||Ti(Z,"quic")||Ti(Z,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Tp(u,u.h),u.h=null))}if(r.D){const he=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;he&&(r.sa=he,gn(r.F,r.D,he))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=aE(r,r.H?r.la:null,r.W),d.J){qT(r.i,d);var m=d,E=r.K;E&&m.setTimeout(E),m.B&&(Vm(m),gp(m)),r.g=d}else Jm(r);0<t.l.length&&Qm(t)}else"stop"!=D[0]&&"close"!=D[0]||fc(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?fc(t,7):fh(t):"noop"!=D[0]&&t.j&&t.j.wa(D),t.A=0)}sh(4)}catch(D){}}function Um(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(oc(n)||"string"==typeof n)Av(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(oc(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function yp(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(oc(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function lc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof lc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Bm(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Yu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Yu(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Yu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ze=hp.prototype).setTimeout=function(n){this.P=n},Ze.gb=function(n){n=n.target;const e=this.L;e&&3==la(n)?e.l():this.Ia(n)},Ze.Ia=function(n){try{if(n==this.g)e:{const M=la(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>M)&&(3!=M||Rv||this.g&&(this.h.h||this.g.ga()||JT(this.g)))){this.I||4!=M||7==e||sh(8==e||0>=x?3:2),Vm(this);var t=this.g.ba();this.N=t;t:if(BT(this)){var r=JT(this.g);n="";var o=r.length,u=4==la(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){uc(this),mp(this);var d="";break t}this.h.i=new It.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function tC(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ip(m)){var D=m;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,bi(12),uc(this),mp(this);break e}ih(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Kv(this,t)}this.U?(jT(this,M,d),Rv&&this.i&&3==M&&(XI(this.V,this.W,"tick",this.fb),this.W.start())):(ih(this.j,this.m,d,null),Kv(this,d)),4==M&&uc(this),this.i&&!this.I&&(4==M?iE(this.l,this):(this.i=!1,gp(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,bi(12)):(this.o=0,bi(13)),uc(this),mp(this)}}}catch(M){}},Ze.fb=function(){if(this.g){var n=la(this.g),e=this.g.ga();this.C<e.length&&(Vm(this),jT(this,n,e),this.i&&4!=n&&gp(this))}},Ze.cancel=function(){this.I=!0,uc(this)},Ze.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ST(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(sh(3),bi(17)),uc(this),this.o=2,mp(this)):$T(this,this.Y-n)},(Ze=lc.prototype).R=function(){Bm(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ze.T=function(){return Bm(this),this.g.concat()},Ze.get=function(n,e){return Yu(this.h,n)?this.h[n]:e},Ze.set=function(n,e){Yu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ze.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var Zv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function cc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof cc){this.g=void 0!==e?e:n.g,jm(this,n.j),this.s=n.s,$m(this,n.i),Hm(this,n.m),this.l=n.l,e=n.h;var t=new Ep;t.i=e.i,e.g&&(t.g=new lc(e.g),t.h=e.h),HT(this,t),this.o=n.o}else n&&(t=String(n).match(Zv))?(this.g=!!e,jm(this,t[1]||"",!0),this.s=_p(t[2]||""),$m(this,t[3]||"",!0),Hm(this,t[4]),this.l=_p(t[5]||"",!0),HT(this,t[6]||"",!0),this.o=_p(t[7]||"")):(this.g=!!e,this.h=new Ep(null,this.g))}function eu(n){return new cc(n)}function jm(n,e,t){n.j=t?_p(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function $m(n,e,t){n.i=t?_p(e,!0):e}function Hm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function HT(n,e,t){e instanceof Ep?(n.h=e,function aC(n,e){e&&!n.j&&(Qu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Qv(this,r),Wm(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=dc(e,qm)),n.h=new Ep(e,n.g))}function gn(n,e,t){n.h.set(e,t)}function Gm(n){return gn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function _p(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function dc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,vp),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function vp(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}cc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(dc(e,GT,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(dc(e,GT,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(dc(t,"/"==t.charAt(0)?oC:sC,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",dc(t,zm)),n.join("")};var GT=/[#\/\?@]/g,sC=/[#\?:]/g,oC=/[#\?]/g,qm=/[#\?@]/g,zm=/#/g;function Ep(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Qu(n){n.g||(n.g=new lc,n.h=0,n.i&&function iC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Qv(n,e){Qu(n),e=hc(n,e),Yu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Yu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Bm(n)))}function Jv(n,e){return Qu(n),e=hc(n,e),Yu(n.g.h,e)}function Wm(n,e,t){Qv(n,e),0<t.length&&(n.i=null,n.g.set(hc(n,e),Mv(t)),n.h+=t.length)}function hc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function lC(n){this.l=n||Xv,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ea&&It.g.Ea()&&It.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ze=Ep.prototype).add=function(n,e){Qu(this),this.i=null,n=hc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ze.forEach=function(n,e){Qu(this),this.g.forEach(function(t,r){Av(t,function(o){n.call(e,o,r,this)},this)},this)},Ze.T=function(){Qu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Ze.R=function(n){Qu(this);var e=[];if("string"==typeof n)Jv(this,n)&&(e=Sv(e,this.g.get(hc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Sv(e,n[t])}return e},Ze.set=function(n,e){return Qu(this),this.i=null,Jv(this,n=hc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ze.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var Xv=10;function Km(n){return!!n.h||!!n.g&&n.g.size>=n.j}function eE(n){return n.h?1:n.g?n.g.size:0}function wp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Tp(n,e){n.g?n.g.add(e):n.h=e}function qT(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function zT(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Mv(n.i)}function tE(){}function cC(){this.g=new tE}function WT(n,e,t){const r=t||"";try{Um(n,function(o,u){let d=o;rp(o)&&(d=up(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function bp(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Dp(n){this.l=n.$b||null,this.j=n.ib||!1}function Ip(n,e){kr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Zm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}lC.prototype.cancel=function(){if(this.i=zT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},tE.prototype.stringify=function(n){return It.JSON.stringify(n,void 0)},tE.prototype.parse=function(n){return It.JSON.parse(n,void 0)},tr(Dp,OT),Dp.prototype.g=function(){return new Ip(this.l,this.j)},Dp.prototype.i=function(n){return function(){return n}}({}),tr(Ip,kr);var Zm=0;function KT(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ah(n){n.readyState=4,n.l=null,n.j=null,n.A=null,uh(n)}function uh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ze=Ip.prototype).open=function(n,e){if(this.readyState!=Zm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,uh(this)},Ze.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||It).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ah(this)),this.readyState=Zm},Ze.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,uh(this)),this.g&&(this.readyState=3,uh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==It.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;KT(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ze.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ah(this):uh(this),3==this.readyState&&KT(this)}},Ze.Ua=function(n){this.g&&(this.response=this.responseText=n,ah(this))},Ze.Ta=function(n){this.g&&(this.response=n,ah(this))},Ze.ha=function(){this.g&&ah(this)},Ze.setRequestHeader=function(n,e){this.v.append(n,e)},Ze.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ze.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ip.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var dC=It.JSON.parse;function nr(n){kr.call(this),this.headers=new lc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ZT,this.K=this.L=!1}tr(nr,kr);var ZT="",Di=/^https?$/i,lh=["POST","PUT"];function fC(n){return"content-type"==n.toLowerCase()}function pC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ch(n),dh(n)}function ch(n){n.D||(n.D=!0,Yr(n,"complete"),Yr(n,"error"))}function YT(n){if(n.h&&void 0!==Iv&&(!n.C[1]||4!=la(n)||2!=n.ba()))if(n.v&&4==la(n))ac(n.Fa,0,n);else if(Yr(n,"readystatechange"),4==la(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Zv)[1]||null;if(!o&&It.self&&It.self.location){var u=It.self.location.protocol;o=u.substr(0,u.length-1)}r=!Di.test(o?o.toLowerCase():"")}t=r}if(t)Yr(n,"complete"),Yr(n,"success");else{n.m=6;try{var d=2<la(n)?n.g.statusText:""}catch(E){d=""}n.j=d+" ["+n.ba()+"]",ch(n)}}finally{dh(n)}}}function dh(n,e){if(n.g){QT(n);const t=n.g,r=n.C[0]?bm:null;n.g=null,n.C=null,e||Yr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function QT(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function la(n){return n.g?n.g.readyState:0}function JT(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ZT:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Cp(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function gC(n){let e="";return Cm(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):gn(n,e,t))}function hh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function rE(n){this.za=0,this.l=[],this.h=new Fm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=hh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=hh("baseRetryDelayMs",5e3,n),this.$a=hh("retryDelaySeedMs",1e4,n),this.Ya=hh("forwardChannelMaxRetries",2,n),this.ra=hh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new lC(n&&n.concurrentRequestLimit),this.Ca=new cC,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function fh(n){if(mC(n),3==n.G){var e=n.V++,t=eu(n.F);gn(t,"SID",n.J),gn(t,"RID",e),gn(t,"TYPE","terminate"),gh(n,t),(e=new hp(n,n.h,e,void 0)).K=2,e.v=Gm(eu(t)),t=!1,It.navigator&&It.navigator.sendBeacon&&(t=It.navigator.sendBeacon(e.v.toString(),"")),!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=rb(e.l,null),e.g.ea(e.v)),e.F=Date.now(),gp(e)}oE(n)}function ph(n){n.g&&(tb(n),n.g.cancel(),n.g=null)}function mC(n){ph(n),n.u&&(It.clearTimeout(n.u),n.u=null),Xm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function Ym(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Qm(n)}function Qm(n){Km(n.i)||n.m||(n.m=!0,Hv(n.Ha,n),n.C=0)}function Ap(n,e){var t;t=e?e.m:n.V++;const r=eu(n.F);gn(r,"SID",n.J),gn(r,"RID",t),gn(r,"AID",n.U),gh(n,r),n.o&&n.s&&Cp(r,n.o,n.s),t=new hp(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=eb(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Tp(n.i,t),pp(t,r,e)}function gh(n,e){n.j&&Um({},function(t,r){gn(e,r,t)})}function eb(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Pr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let E=0;E<t;E++){let D=o[E].h;const M=o[E].g;if(D-=u,0>D)u=Math.max(0,o[E].h-100),m=!1;else try{WT(M,d,"req"+D+"_")}catch(x){r&&r(M)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Jm(n){n.g||n.u||(n.Y=1,Hv(n.Ga,n),n.A=0)}function Sp(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=cp(Pr(n.Ga,n),sE(n,n.A)),n.A++,0))}function tb(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function nb(n){n.g=new hp(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=eu(n.oa);gn(e,"RID","rpc"),gn(e,"SID",n.J),gn(e,"CI",n.N?"0":"1"),gn(e,"AID",n.U),gh(n,e),gn(e,"TYPE","xmlhttp"),n.o&&n.s&&Cp(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Gm(eu(e)),t.s=null,t.U=!0,UT(t,n)}function Xm(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function iE(n,e){var t=null;if(n.g==e){Xm(n),tb(n),n.g=null;var r=2}else{if(!wp(n.i,e))return;t=e.D,qT(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Yr(r=Ku(),new NT(r,t,e,o)),Qm(n)}else Jm(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function XT(n,e){return!(eE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=cp(Pr(n.Ha,n,e),sE(n,n.C)),n.C++,0)))}(n,e)||2==r&&Sp(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:fc(n,5);break;case 4:fc(n,10);break;case 3:fc(n,6);break;default:fc(n,2)}}function sE(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function fc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Pr(n.jb,n);t||(t=new cc("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||jm(t,"https"),Gm(t)),function nE(n,e){const t=new Fm;if(It.Image){const r=new Image;r.onload=Im(bp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Im(bp,t,r,"TestLoadImage: error",!1,e),r.onabort=Im(bp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Im(bp,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else bi(2);n.G=0,n.j&&n.j.va(e),oE(n),mC(n)}function oE(n){n.G=0,n.I=-1,n.j&&((0!=zT(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Mv(n.l),n.l.length=0),n.j.ua())}function aE(n,e,t){let r=function Yv(n){return n instanceof cc?eu(n):new cc(n,void 0)}(t);if(""!=r.i)e&&$m(r,e+"."+r.i),Hm(r,r.m);else{const o=It.location;r=function ua(n,e,t,r){var o=new cc(null,void 0);return n&&jm(o,n),e&&$m(o,e),t&&Hm(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Cm(n.aa,function(o,u){gn(r,u,o)}),t=n.sa,(e=n.D)&&t&&gn(r,e,t),gn(r,"VER",n.ma),gh(n,r),r}function rb(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new nr(t&&n.Ba&&!n.qa?new Dp({ib:!0}):n.qa)).L=n.H,e}function ib(){}function Mp(){if(Xd&&!(10<=Number(zI)))throw Error("Environmental error: no available transport.")}function ms(n,e){kr.call(this),this.g=new rE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ip(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ip(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new pc(this)}function uE(n){Lm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function lE(){Zu.call(this),this.status=1}function pc(n){this.g=n}(Ze=nr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():FT.g(),this.C=function PT(n){return n.h||(n.h=n.i())}(this.u?this.u:FT),this.g.onreadystatechange=Pr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void pC(this,u)}n=t||"";const o=new lc(this.headers);r&&Um(r,function(u,d){o.set(d,u)}),r=function aT(n){e:{var e=fC;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=It.FormData&&n instanceof It.FormData,!(0<=oT(lh,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{QT(this),0<this.B&&((this.K=function hC(n){return Xd&&function mT(){return function op(n){var e=qI;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=uT(String(Sm)).split("."),t=uT("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=lT(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||lT(0==o[2].length,0==u[2].length)||lT(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pr(this.pa,this)):this.A=ac(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){pC(this,u)}},Ze.pa=function(){void 0!==Iv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yr(this,"timeout"),this.abort(8))},Ze.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Yr(this,"complete"),Yr(this,"abort"),dh(this))},Ze.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),dh(this,!0)),nr.Z.M.call(this)},Ze.Fa=function(){this.s||(this.F||this.v||this.l?YT(this):this.cb())},Ze.cb=function(){YT(this)},Ze.ba=function(){try{return 2<la(this)?this.g.status:-1}catch(n){return-1}},Ze.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ze.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),dC(e)}},Ze.Da=function(){return this.m},Ze.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ze=rE.prototype).ma=8,Ze.G=1,Ze.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ze.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new hp(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=sp(u),dT(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=eb(this,o,e),gn(t=eu(this.F),"RID",n),gn(t,"CVER",22),this.D&&gn(t,"X-HTTP-Session-Id",this.D),gh(this,t),this.o&&u&&Cp(t,this.o,u),Tp(this.i,o),this.Ra&&gn(t,"TYPE","init"),this.ja?(gn(t,"$req",e),gn(t,"SID","null"),o.$=!0,pp(o,t,null)):pp(o,t,e),this.G=2}}else 3==this.G&&(n?Ap(this,n):0==this.l.length||Km(this.i)||Ap(this))},Ze.Ga=function(){if(this.u=null,nb(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=cp(Pr(this.bb,this),n)}},Ze.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,bi(10),ph(this),nb(this))},Ze.ab=function(){null!=this.v&&(this.v=null,ph(this),Sp(this),bi(19))},Ze.jb=function(n){n?(this.h.info("Successfully pinged google.com"),bi(2)):(this.h.info("Failed to ping google.com"),bi(1))},(Ze=ib.prototype).xa=function(){},Ze.wa=function(){},Ze.va=function(){},Ze.ua=function(){},Ze.Oa=function(){},Mp.prototype.g=function(n,e){return new ms(n,e)},tr(ms,kr),ms.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Hv(Pr(n.hb,n,e))),bi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=aE(n,null,n.W),Qm(n)},ms.prototype.close=function(){fh(this.g)},ms.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Ym(this.g,e)}else this.v?((e={}).__data__=up(n),Ym(this.g,e)):Ym(this.g,n)},ms.prototype.M=function(){this.g.j=null,delete this.j,fh(this.g),delete this.g,ms.Z.M.call(this)},tr(uE,Lm),tr(lE,Zu),tr(pc,ib),pc.prototype.xa=function(){Yr(this.g,"a")},pc.prototype.wa=function(n){Yr(this.g,new uE(n))},pc.prototype.va=function(n){Yr(this.g,new lE(n))},pc.prototype.ua=function(){Yr(this.g,"b")},Mp.prototype.createWebChannel=Mp.prototype.g,ms.prototype.send=ms.prototype.u,ms.prototype.open=ms.prototype.m,ms.prototype.close=ms.prototype.close,oh.NO_ERROR=0,oh.TIMEOUT=8,oh.HTTP_ERROR=6,xT.COMPLETE="complete",kT.EventType=aa,aa.OPEN="a",aa.CLOSE="b",aa.ERROR="c",aa.MESSAGE="d",kr.prototype.listen=kr.prototype.N,nr.prototype.listenOnce=nr.prototype.O,nr.prototype.getLastError=nr.prototype.La,nr.prototype.getLastErrorCode=nr.prototype.Da,nr.prototype.getStatus=nr.prototype.ba,nr.prototype.getResponseJson=nr.prototype.Qa,nr.prototype.getResponseText=nr.prototype.ga,nr.prototype.send=nr.prototype.ea;var sb=oa.createWebChannelTransport=function(){return new Mp},yC=oa.getStatEventTarget=function(){return Ku()},cE=oa.ErrorCode=oh,vM=oa.EventType=xT,ob=oa.Event=Xa,_C=oa.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},EM=oa.FetchXmlHttpFactory=Dp,dE=oa.WebChannel=kT,wM=oa.XhrIo=nr;const vC="@firebase/firestore";class ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ri.UNAUTHENTICATED=new ri(null),ri.GOOGLE_CREDENTIALS=new ri("google-credentials-uid"),ri.FIRST_PARTY=new ri("first-party-uid"),ri.MOCK_USER=new ri("mock-user");let Rp="9.6.5";const gc=new zu.Yd("@firebase/firestore");function mh(){return gc.logLevel}function Le(n,...e){if(gc.logLevel<=zu.in.DEBUG){const t=e.map(hE);gc.debug(`Firestore (${Rp}): ${n}`,...t)}}function Dn(n,...e){if(gc.logLevel<=zu.in.ERROR){const t=e.map(hE);gc.error(`Firestore (${Rp}): ${n}`,...t)}}function yh(n,...e){if(gc.logLevel<=zu.in.WARN){const t=e.map(hE);gc.warn(`Firestore (${Rp}): ${n}`,...t)}}function hE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${Rp}) INTERNAL ASSERTION FAILED: `+n;throw Dn(e),new Error(e)}function Et(n,e){n||lt()}function je(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Lt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Np{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ub{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ri.UNAUTHENTICATED))}shutdown(){}}class bM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class DM{constructor(e){this.t=e,this.currentUser=ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=D=>this.i!==o?(o=this.i,t(D)):Promise.resolve();let d=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new vr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const D=d;e.enqueueRetryable((0,ye.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},E=D=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(D=>E(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?E(D):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new vr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et("string"==typeof r.accessToken),new Np(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(null===e||"string"==typeof e),new ri(e)}}class IM{constructor(e,t,r){this.type="FirstParty",this.user=ri.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class EC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new IM(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ey{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wC{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=o=>{e.enqueueRetryable(()=>{return null!=(u=o).error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`),t(u.token);var u})};const r=o=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?r(o):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et("string"==typeof t.token),new ey(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ys{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.p(r),this.T=r=>t.writeSequenceNumber(r))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function fE(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ys.I=-1;class lb{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=fE(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Tt(n,e){return n<e?-1:n>e?1:0}function _h(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function ty(n){return n+"\0"}class Fr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fr.fromMillis(Date.now())}static fromDate(e){return Fr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Fr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new Fr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function ny(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ju(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class xp{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===xp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends xp{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const cb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qr extends xp{construct(e,t,r){return new Qr(e,t,r)}static isValidIdentifier(e){return cb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Re(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Re(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new Re(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new Re(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qr(t)}static emptyPath(){return new Qr([])}}class vh{constructor(e){this.fields=e,e.sort(Qr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _h(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new fn(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const TC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mc(n){if(Et(!!n),"string"==typeof n){let e=0;const t=TC.exec(n);if(Et(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:cr(n.seconds),nanos:cr(n.nanos)}}function cr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function yc(n){return"string"==typeof n?fn.fromBase64String(n):fn.fromUint8Array(n)}function mE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function db(n){const e=n.mapValue.fields.__previous_value__;return mE(e)?db(e):e}function Eh(n){const e=mc(n.mapValue.fields.__local_write_time__.timestampValue);return new Fr(e.seconds,e.nanos)}function _c(n){return null==n}function yE(n){return 0===n&&1/n==-1/0}function _E(n){return"number"==typeof n&&Number.isInteger(n)&&!yE(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class rt{constructor(e){this.path=e}static fromPath(e){return new rt(Qt.fromString(e))}static fromName(e){return new rt(Qt.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new Qt(e.slice()))}}function vc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mE(n)?4:10:lt()}function ca(n,e){if(n===e)return!0;const t=vc(n);if(t!==vc(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Eh(n).isEqual(Eh(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=mc(r.timestampValue),d=mc(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,yc(n.bytesValue).isEqual(yc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return cr(r.geoPointValue.latitude)===cr(o.geoPointValue.latitude)&&cr(r.geoPointValue.longitude)===cr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return cr(r.integerValue)===cr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=cr(r.doubleValue),d=cr(o.doubleValue);return u===d?yE(u)===yE(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return _h(n.arrayValue.values||[],e.arrayValue.values||[],ca);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(ny(u)!==ny(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!ca(u[m],d[m])))return!1;return!0}(n,e);default:return lt()}var o}function wh(n,e){return void 0!==(n.values||[]).find(t=>ca(t,e))}function da(n,e){if(n===e)return 0;const t=vc(n),r=vc(e);if(t!==r)return Tt(t,r);switch(t){case 0:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=cr(o.integerValue||o.doubleValue),m=cr(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return ry(n.timestampValue,e.timestampValue);case 4:return ry(Eh(n),Eh(e));case 5:return Tt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=yc(o),m=yc(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let E=0;E<d.length&&E<m.length;E++){const D=Tt(d[E],m[E]);if(0!==D)return D}return Tt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Tt(cr(o.latitude),cr(u.latitude));return 0!==d?d:Tt(cr(o.longitude),cr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let E=0;E<d.length&&E<m.length;++E){const D=da(d[E],m[E]);if(D)return D}return Tt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const d=o.fields||{},m=Object.keys(d),E=u.fields||{},D=Object.keys(E);m.sort(),D.sort();for(let M=0;M<m.length&&M<D.length;++M){const x=Tt(m[M],D[M]);if(0!==x)return x;const V=da(d[m[M]],E[D[M]]);if(0!==V)return V}return Tt(m.length,D.length)}(n.mapValue,e.mapValue);default:throw lt()}}function ry(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Tt(n,e);const t=mc(n),r=mc(e),o=Tt(t.seconds,r.seconds);return 0!==o?o:Tt(t.nanos,r.nanos)}function iy(n){return vE(n)}function vE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=mc(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?yc(n.bytesValue).toBase64():"referenceValue"in n?rt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=vE(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${vE(r.fields[m])}`;return u+"}"}(n.mapValue):lt();var e}function Op(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function sy(n){return!!n&&"integerValue"in n}function EE(n){return!!n&&"arrayValue"in n}function hb(n){return!!n&&"nullValue"in n}function bC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wE(n){return!!n&&"mapValue"in n}function Th(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ju(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Th(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Th(n.arrayValue.values[t]);return e}return Object.assign({},n)}class ii{constructor(e){this.value=e}static empty(){return new ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Th(t)}setAll(e){let t=Qr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Th(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());wE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ca(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];wE(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ju(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new ii(Th(this.value))}}function fb(n){const e=[];return Ju(n.fields,(t,r)=>{const o=new Qr([t]);if(wE(r)){const u=fb(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new vh(e)}class Rn{constructor(e,t,r,o,u){this.key=e,this.documentType=t,this.version=r,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Rn(e,0,St.min(),ii.empty(),0)}static newFoundDocument(e,t,r){return new Rn(e,1,t,r,0)}static newNoDocument(e,t){return new Rn(e,2,t,ii.empty(),0)}static newUnknownDocument(e,t){return new Rn(e,3,t,ii.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class CM{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.R=null}}function DC(n,e=null,t=[],r=[],o=null,u=null,d=null){return new CM(n,e,t,r,o,u,d)}function oy(n){const e=je(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function IC(n){return n.field.canonicalString()+n.op.toString()+iy(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),_c(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Pp(e.startAt)),e.endAt&&(t+="|ub:",t+=Pp(e.endAt)),e.R=t}return e.R}function TE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!SM(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!ca(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MC(n.startAt,e.startAt)&&MC(n.endAt,e.endAt)}function ay(n){return rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Lr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new CC(e,t,r):"array-contains"===t?new DE(e,r):"in"===t?new IE(e,r):"not-in"===t?new AC(e,r):"array-contains-any"===t?new CE(e,r):new Lr(e,t,r)}static P(e,t,r){return"in"===t?new pb(e,r):new Ec(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(da(t,this.value)):null!==t&&vc(this.value)===vc(t)&&this.v(da(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class CC extends Lr{constructor(e,t,r){super(e,t,r),this.key=rt.fromName(r.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.v(t)}}class pb extends Lr{constructor(e,t){super(e,"in",t),this.keys=bE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ec extends Lr{constructor(e,t){super(e,"not-in",t),this.keys=bE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function bE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>rt.fromName(r.referenceValue))}class DE extends Lr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return EE(t)&&wh(t.arrayValue,this.value)}}class IE extends Lr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wh(this.value.arrayValue,t)}}class AC extends Lr{constructor(e,t){super(e,"not-in",t)}matches(e){if(wh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wh(this.value.arrayValue,t)}}class CE extends Lr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!EE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wh(this.value.arrayValue,r))}}class wc{constructor(e,t){this.position=e,this.before=t}}function Pp(n){return`${n.before?"b":"a"}:${n.position.map(e=>iy(e)).join(",")}`}class Tc{constructor(e,t="asc"){this.field=e,this.dir=t}}function SM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function SC(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?rt.comparator(rt.fromName(d.referenceValue),t.key):da(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function MC(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ca(n.position[t],e.position[t]))return!1;return!0}class Xu{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=E,this.S=null,this.D=null}}function RC(n,e,t,r,o,u,d,m){return new Xu(n,e,t,r,o,u,d,m)}function kp(n){return new Xu(n)}function AE(n){return!_c(n.limit)&&"F"===n.limitType}function Fp(n){return!_c(n.limit)&&"L"===n.limitType}function SE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ME(n){for(const e of n.filters)if(e.V())return e.field;return null}function RE(n){return null!==n.collectionGroup}function bh(n){const e=je(n);if(null===e.S){e.S=[];const t=ME(e),r=SE(e);if(null!==t&&null===r)t.isKeyField()||e.S.push(new Tc(t)),e.S.push(new Tc(Qr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.S.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Tc(Qr.keyField(),u))}}}return e.S}function _s(n){const e=je(n);if(!e.D)if("F"===e.limitType)e.D=DC(e.path,e.collectionGroup,bh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of bh(e))t.push(new Tc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new wc(e.endAt.position,!e.endAt.before):null,o=e.startAt?new wc(e.startAt.position,!e.startAt.before):null;e.D=DC(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.D}function NE(n,e,t){return new Xu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Dh(n,e){return TE(_s(n),_s(e))&&n.limitType===e.limitType}function gb(n){return`${oy(_s(n))}|lt:${n.limitType}`}function xE(n){return`Query(target=${function AM(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${iy(r.value)}`;var r}).join(", ")}]`),_c(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+Pp(n.startAt)),n.endAt&&(e+=", endAt: "+Pp(n.endAt)),`Target(${e})`}(_s(n))}; limitType=${n.limitType})`}function Ih(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):rt.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!SC(t.startAt,bh(t),r)||t.endAt&&SC(t.endAt,bh(t),r)));var t,r}function Lp(n){return(e,t)=>{let r=!1;for(const o of bh(n)){const u=MM(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function MM(n,e,t){const r=n.field.isKeyField()?rt.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),E=d.data.field(o);return null!==m&&null!==E?da(m,E):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}function OE(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yE(e)?"-0":e}}function Vp(n){return{integerValue:""+n}}function mb(n,e){return _E(e)?Vp(e):OE(n,e)}class uy{constructor(){this._=void 0}}function NC(n,e,t){return n instanceof Ch?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof bc?yb(n,e):n instanceof Dc?_b(n,e):function(r,o){const u=OC(r,o),d=vb(u)+vb(r.N);return sy(u)&&sy(r.N)?Vp(d):OE(r.k,d)}(n,e)}function xC(n,e,t){return n instanceof bc?yb(n,e):n instanceof Dc?_b(n,e):t}function OC(n,e){return n instanceof Ah?sy(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ch extends uy{}class bc extends uy{constructor(e){super(),this.elements=e}}function yb(n,e){const t=Eb(e);for(const r of n.elements)t.some(o=>ca(o,r))||t.push(r);return{arrayValue:{values:t}}}class Dc extends uy{constructor(e){super(),this.elements=e}}function _b(n,e){let t=Eb(e);for(const r of n.elements)t=t.filter(o=>!ca(o,r));return{arrayValue:{values:t}}}class Ah extends uy{constructor(e,t){super(),this.k=e,this.N=t}}function vb(n){return cr(n.integerValue||n.doubleValue)}function Eb(n){return EE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ly{constructor(e,t){this.field=e,this.transform=t}}class NM{constructor(e,t){this.version=e,this.transformResults=t}}class Er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Er}static exists(e){return new Er(void 0,e)}static updateTime(e){return new Er(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function PE(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class cy{}function xM(n,e,t){n instanceof s?function(r,o,u){const d=r.value.clone(),m=c(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof a?function(r,o,u){if(!PE(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=c(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(l(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function wb(n,e,t){var o;n instanceof s?function(r,o,u){if(!PE(r.precondition,o))return;const d=r.value.clone(),m=g(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(i(o),d).setHasLocalMutations()}(n,e,t):n instanceof a?function(r,o,u){if(!PE(r.precondition,o))return;const d=g(r.fieldTransforms,u,o),m=o.data;m.setAll(l(r)),m.setAll(d),o.convertToFoundDocument(i(o),m).setHasLocalMutations()}(n,e,t):PE(n.precondition,o=e)&&o.convertToNoDocument(St.min())}function OM(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=OC(r.transform,o||null);null!=u&&(null==t&&(t=ii.empty()),t.set(r.field,u))}return t||null}function PC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&_h(t,r,(o,u)=>function RM(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof bc&&r instanceof bc||t instanceof Dc&&r instanceof Dc?_h(t.elements,r.elements,ca):t instanceof Ah&&r instanceof Ah?ca(t.N,r.N):t instanceof Ch&&r instanceof Ch);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function i(n){return n.isFoundDocument()?n.version:St.min()}class s extends cy{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class a extends cy{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function l(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function c(n,e,t){const r=new Map;Et(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,xC(d,m,t[o]))}return r}function g(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,NC(u,d,e))}return r}class _ extends cy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class w extends cy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class T{constructor(e){this.count=e}}var A,S;function k(n){switch(n){default:return lt();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function $(n){if(void 0===n)return Dn("GRPC error has no .code"),ae.UNKNOWN;switch(n){case A.OK:return ae.OK;case A.CANCELLED:return ae.CANCELLED;case A.UNKNOWN:return ae.UNKNOWN;case A.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case A.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case A.INTERNAL:return ae.INTERNAL;case A.UNAVAILABLE:return ae.UNAVAILABLE;case A.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case A.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case A.NOT_FOUND:return ae.NOT_FOUND;case A.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case A.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case A.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case A.ABORTED:return ae.ABORTED;case A.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case A.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case A.DATA_LOSS:return ae.DATA_LOSS;default:return lt()}}(S=A||(A={}))[S.OK=0]="OK",S[S.CANCELLED=1]="CANCELLED",S[S.UNKNOWN=2]="UNKNOWN",S[S.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",S[S.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",S[S.NOT_FOUND=5]="NOT_FOUND",S[S.ALREADY_EXISTS=6]="ALREADY_EXISTS",S[S.PERMISSION_DENIED=7]="PERMISSION_DENIED",S[S.UNAUTHENTICATED=16]="UNAUTHENTICATED",S[S.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",S[S.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",S[S.ABORTED=10]="ABORTED",S[S.OUT_OF_RANGE=11]="OUT_OF_RANGE",S[S.UNIMPLEMENTED=12]="UNIMPLEMENTED",S[S.INTERNAL=13]="INTERNAL",S[S.UNAVAILABLE=14]="UNAVAILABLE",S[S.DATA_LOSS=15]="DATA_LOSS";class W{constructor(e,t){this.comparator=e,this.root=t||Ce.EMPTY}insert(e,t){return new W(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ce.BLACK,null,null))}remove(e){return new W(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ce.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new de(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new de(this.root,e,this.comparator,!1)}getReverseIterator(){return new de(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new de(this.root,e,this.comparator,!0)}}class de{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ce{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Ce.RED,this.left=null!=o?o:Ce.EMPTY,this.right=null!=u?u:Ce.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Ce(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ce.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Ce.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ce.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ce.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}Ce.EMPTY=null,Ce.RED=!0,Ce.BLACK=!1,Ce.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Ce(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xe{constructor(e){this.comparator=e,this.data=new W(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ye(this.data.getIterator())}getIteratorFrom(e){return new Ye(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new xe(this.comparator);return t.data=e,t}}class Ye{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const be=new W(rt.comparator);function Qe(){return be}const Bt=new W(rt.comparator);function Jt(){return Bt}const vs=new W(rt.comparator);function el(){return vs}const kE=new xe(rt.comparator);function tn(...n){let e=kE;for(const t of n)e=e.add(t);return e}const FE=new xe(Tt);function Sh(){return FE}class Ic{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Cc.createSynthesizedTargetChangeForCurrentChange(e,t)),new Ic(St.min(),r,Sh(),Qe(),tn())}}class Cc{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Cc(fn.EMPTY_BYTE_STRING,t,tn(),tn(),tn())}}class Mh{constructor(e,t,r,o){this.$=e,this.removedTargetIds=t,this.key=r,this.O=o}}class dy{constructor(e,t){this.targetId=e,this.M=t}}class hy{constructor(e,t,r=fn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class PM{constructor(){this.F=0,this.L=FM(),this.B=fn.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.F}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=tn(),t=tn(),r=tn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:lt()}}),new Cc(this.B,this.U,e,t,r)}H(){this.q=!1,this.L=FM()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.F+=1}Z(){this.F-=1}tt(){this.q=!0,this.U=!0}}class Lx{constructor(e){this.et=e,this.nt=new Map,this.st=Qe(),this.it=kM(),this.rt=new xe(Tt)}ot(e){for(const t of e.$)e.O&&e.O.isFoundDocument()?this.ct(t,e.O):this.at(t,e.key,e.O);for(const t of e.removedTargetIds)this.at(t,e.key,e.O)}ut(e){this.forEachTarget(e,t=>{const r=this.ht(t);switch(e.state){case 0:this.lt(t)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||this.removeTarget(t);break;case 3:this.lt(t)&&(r.tt(),r.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),r.W(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((r,o)=>{this.lt(o)&&t(o)})}dt(e){const t=e.targetId,r=e.M.count,o=this.wt(t);if(o){const u=o.target;if(ay(u))if(0===r){const d=new rt(u.path);this.at(t,d,Rn.newNoDocument(d,St.min()))}else Et(1===r);else this._t(t)!==r&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&ay(m.target)){const E=new rt(m.target.path);null!==this.st.get(E)||this.yt(d,E)||this.at(d,E,Rn.newNoDocument(E,e))}u.j&&(t.set(d,u.G()),u.H())}});let r=tn();this.it.forEach((u,d)=>{let m=!0;d.forEachWhile(E=>{const D=this.wt(E);return!D||2===D.purpose||(m=!1,!1)}),m&&(r=r.add(u))});const o=new Ic(e,t,this.rt,this.st,r);return this.st=Qe(),this.it=kM(),this.rt=new xe(Tt),o}ct(e,t){if(!this.lt(e))return;const r=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,r),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}at(e,t,r){if(!this.lt(e))return;const o=this.ht(e);this.yt(e,t)?o.J(t,1):o.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),r&&(this.st=this.st.insert(t,r))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new PM,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new xe(Tt),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new PM),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function kM(){return new W(rt.comparator)}function FM(){return new W(rt.comparator)}const Vx={asc:"ASCENDING",desc:"DESCENDING"},Ux={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Bx{constructor(e,t){this.databaseId=e,this.C=t}}function LE(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LM(n,e){return n.C?e.toBase64():e.toUint8Array()}function jx(n,e){return LE(n,e.toTimestamp())}function si(n){return Et(!!n),St.fromTimestamp(function(e){const t=mc(e);return new Fr(t.seconds,t.nanos)}(n))}function kC(n,e){return(t=n,new Qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function VM(n){const e=Qt.fromString(n);return Et(YM(e)),e}function VE(n,e){return kC(n.databaseId,e.path)}function tl(n,e){const t=VM(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(BM(t))}function FC(n,e){return kC(n.databaseId,e)}function UM(n){const e=VM(n);return 4===e.length?Qt.emptyPath():BM(e)}function UE(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function BM(n){return Et(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function jM(n,e,t){return{name:VE(n,e),fields:t.value.mapValue.fields}}function $M(n,e,t){const r=tl(n,e.name),o=si(e.updateTime),u=new ii({mapValue:{fields:e.fields}}),d=Rn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Tb(n,e){let t;if(e instanceof s)t={update:jM(n,e.key,e.value)};else if(e instanceof _)t={delete:VE(n,e.key)};else if(e instanceof a)t={update:jM(n,e.key,e.data),updateMask:Yx(e.fieldMask)};else{if(!(e instanceof w))return lt();t={verify:VE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Ch)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof bc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Dc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ah)return{fieldPath:u.field.canonicalString(),increment:d.N};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:jx(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:lt()),t;var o}function HM(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Er.updateTime(si(o.updateTime)):void 0!==o.exists?Er.exists(o.exists):Er.none():Er.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(Et("REQUEST_TIME"===d.setToServerValue),m=new Ch):"appendMissingElements"in d?m=new bc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Dc(d.removeAllFromArray.values||[]):"increment"in d?m=new Ah(u,d.increment):lt();const E=Qr.fromServerFormat(d.fieldPath);return new ly(E,m)}(n,o)):[];var o;if(e.update){const o=tl(n,e.update.name),u=new ii({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new vh((e.updateMask.fieldPaths||[]).map(D=>Qr.fromServerFormat(D)));return new a(o,u,d,t,r)}return new s(o,u,t,r)}if(e.delete){const o=tl(n,e.delete);return new _(o,t)}if(e.verify){const o=tl(n,e.verify);return new w(o,t)}return lt()}function GM(n,e){return{documents:[FC(n,e.path)]}}function qM(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=FC(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=FC(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(m){if(0===m.length)return;const E=m.map(D=>function(M){if("=="===M.op){if(bC(M.value))return{unaryFilter:{field:fy(M.field),op:"IS_NAN"}};if(hb(M.value))return{unaryFilter:{field:fy(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(bC(M.value))return{unaryFilter:{field:fy(M.field),op:"IS_NOT_NAN"}};if(hb(M.value))return{unaryFilter:{field:fy(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fy(M.field),op:Wx(M.op),value:M.value}}}(D));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(m){if(0!==m.length)return m.map(E=>{return{field:fy((D=E).field),direction:zx(D.dir)};var D})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(E=e.limit,n.C||_c(E)?E:{value:E});var E;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=KM(e.startAt)),e.endAt&&(t.structuredQuery.endAt=KM(e.endAt)),t}function zM(n){let e=UM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Et(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let u=[];t.where&&(u=WM(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(M=>{return new Tc(py((x=M).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let m=null;t.limit&&(m=function(M){let x;return x="object"==typeof M?M.value:M,_c(x)?null:x}(t.limit));let E=null;t.startAt&&(E=ZM(t.startAt));let D=null;return t.endAt&&(D=ZM(t.endAt)),RC(e,o,d,u,m,"F",E,D)}function WM(n){return n?void 0!==n.unaryFilter?[Zx(n)]:void 0!==n.fieldFilter?[Kx(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>WM(e)).reduce((e,t)=>e.concat(t)):lt():[]}function KM(n){return{before:n.before,values:n.position}}function ZM(n){return new wc(n.values||[],!!n.before)}function zx(n){return Vx[n]}function Wx(n){return Ux[n]}function fy(n){return{fieldPath:n.canonicalString()}}function py(n){return Qr.fromServerFormat(n.fieldPath)}function Kx(n){return Lr.create(py(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Zx(n){switch(n.unaryFilter.op){case"IS_NAN":const e=py(n.unaryFilter.field);return Lr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=py(n.unaryFilter.field);return Lr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=py(n.unaryFilter.field);return Lr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=py(n.unaryFilter.field);return Lr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function Yx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function YM(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function tu(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=QM(e)),e=Qx(n.get(t),e);return QM(e)}function Qx(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function QM(n){return n+"\x01\x01"}function Ac(n){const e=n.length;if(Et(e>=2),2===e)return Et("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Qt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&lt(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let E;0===o.length?E=m:(o+=m,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:lt()}u=d+2}return new Qt(r)}class Jx{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class vo{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}vo.store="owner",vo.key="owner";class Rh{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}Rh.store="mutationQueues",Rh.keyPath="userId";class kn{constructor(e,t,r,o,u){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=u}}kn.store="mutations",kn.keyPath="batchId",kn.userMutationsIndex="userMutationsIndex",kn.userMutationsKeyPath=["userId","batchId"];class qi{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,tu(t)]}static key(e,t,r){return[e,tu(t),r]}}qi.store="documentMutations",qi.PLACEHOLDER=new qi;class Xx{constructor(e,t){this.path=e,this.readTime=t}}class eO{constructor(e,t){this.path=e,this.version=t}}class dr{constructor(e,t,r,o,u,d){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=u,this.parentPath=d}}dr.store="remoteDocuments",dr.readTimeIndex="readTimeIndex",dr.readTimeIndexPath="readTime",dr.collectionReadTimeIndex="collectionReadTimeIndex",dr.collectionReadTimeIndexPath=["parentPath","readTime"];class nl{constructor(e){this.byteSize=e}}nl.store="remoteDocumentGlobal",nl.key="remoteDocumentGlobalKey";class Bs{constructor(e,t,r,o,u,d,m){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=u,this.lastLimboFreeSnapshotVersion=d,this.query=m}}Bs.store="targets",Bs.keyPath="targetId",Bs.queryTargetsIndexName="queryTargetsIndex",Bs.queryTargetsKeyPath=["canonicalId","targetId"];class Ii{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Ii.store="targetDocuments",Ii.keyPath=["targetId","path"],Ii.documentTargetsIndex="documentTargetsIndex",Ii.documentTargetsKeyPath=["path","targetId"];class Eo{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}Eo.key="targetGlobalKey",Eo.store="targetGlobal";class Up{constructor(e,t){this.collectionId=e,this.parent=t}}Up.store="collectionParents",Up.keyPath=["collectionId","parent"];class Sc{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}Sc.store="clientMetadata",Sc.keyPath="clientId";class gy{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}gy.store="bundles",gy.keyPath="bundleId";class my{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}my.store="namedQueries",my.keyPath="name";const tO=[Rh.store,kn.store,qi.store,dr.store,Bs.store,vo.store,Eo.store,Ii.store,Sc.store,nl.store,Up.store,gy.store,my.store],JM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ne((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ne?t:Ne.resolve(t)}catch(t){return Ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.reject(t)}static resolve(e){return new Ne((t,r)=>{t(e)})}static reject(e){return new Ne((t,r)=>{r(e)})}static waitFor(e){return new Ne((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},E=>r(E))}),d=!0,u===o&&t()})}static or(e){let t=Ne.resolve(!1);for(const r of e)t=t.next(o=>o?Ne.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class bb{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new vr,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new BE(e,t.error)):this.It.resolve()},this.transaction.onerror=r=>{const o=LC(r.target.error);this.It.reject(new BE(e,o))}}static open(e,t,r,o){try{return new bb(t,e.transaction(o,r))}catch(u){throw new BE(t,u)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new rO(t)}}class nu{constructor(e,t,r){this.name=e,this.version=t,this.Rt=r,12.2===nu.bt((0,Lt.z$)())&&Dn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),jp(window.indexedDB.deleteDatabase(e)).toPromise()}static Pt(){if(!(0,Lt.hl)())return!1;if(nu.vt())return!0;const e=(0,Lt.z$)(),t=nu.bt(e),r=0<t&&t<10,o=nu.Vt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static bt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Ct(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new BE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Re(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Re(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new BE(e,m))},u.onupgradeneeded=d=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Rt.Nt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=r=>t.kt(r)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ye.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Ct(e);const E=bb.open(u.db,e,d?"readonly":"readwrite",r),D=o(E).catch(M=>(E.abort(M),Ne.reject(M))).toPromise();return D.catch(()=>{}),yield E.At,D}catch(E){const D="FirebaseError"!==E.name&&m<3;if(Le("SimpleDb","Transaction failed with error:",E.message,"Retrying:",D),u.close(),!D)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class nO{constructor(e){this.$t=e,this.Ot=!1,this.Mt=null}get isDone(){return this.Ot}get Ft(){return this.Mt}set cursor(e){this.$t=e}done(){this.Ot=!0}Lt(e){this.Mt=e}delete(){return jp(this.$t.delete())}}class BE extends Re{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bp(n){return"IndexedDbTransactionError"===n.name}class rO{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),jp(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),jp(this.store.add(e))}get(e){return jp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),jp(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),jp(this.store.count())}Bt(e,t){const r=this.cursor(this.options(e,t)),o=[];return this.Ut(r,(u,d)=>{o.push(d)}).next(()=>o)}qt(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Kt=!1;const o=this.cursor(r);return this.Ut(o,(u,d,m)=>m.delete())}jt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Ut(o,t)}Qt(e){const t=this.cursor({});return new Ne((r,o)=>{t.onerror=u=>{const d=LC(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Ut(e,t){const r=[];return new Ne((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const E=new nO(m),D=t(m.primaryKey,m.value,E);if(D instanceof Ne){const M=D.catch(x=>(E.done(),Ne.reject(x)));r.push(M)}E.isDone?o():null===E.Ft?m.continue():m.continue(E.Ft)}}).next(()=>Ne.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Kt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function jp(n){return new Ne((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=LC(r.target.error);t(o)}})}let eR=!1;function LC(n){const e=nu.bt((0,Lt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return eR||(eR=!0,setTimeout(()=>{throw r},0)),r}}return n}class tR extends XM{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function js(n,e){const t=je(n);return nu.Dt(t.Wt,e)}class VC{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&xM(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&wb(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&wb(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(St.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),tn())}isEqual(e){return this.batchId===e.batchId&&_h(this.mutations,e.mutations,(t,r)=>PC(t,r))&&_h(this.baseMutations,e.baseMutations,(t,r)=>PC(t,r))}}class UC{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Et(e.mutations.length===r.length);let o=el();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new UC(e,t,r,o)}}class Nh{constructor(e,t,r,o,u=St.min(),d=St.min(),m=fn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Nh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Nh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Nh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class nR{constructor(e){this.Gt=e}}function BC(n,e){if(e.document)return $M(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=rt.fromSegments(e.noDocument.path),r=_y(e.noDocument.readTime),o=Rn.newNoDocument(t,r);return e.hasCommittedMutations?o.setHasCommittedMutations():o}if(e.unknownDocument){const t=rt.fromSegments(e.unknownDocument.path),r=_y(e.unknownDocument.version);return Rn.newUnknownDocument(t,r)}return lt()}function rR(n,e,t){const r=jC(t),o=e.key.path.popLast().toArray();if(e.isFoundDocument()){const u={name:VE(m=n.Gt,(E=e).key),fields:E.data.value.mapValue.fields,updateTime:LE(m,E.version.toTimestamp())};return new dr(null,null,u,e.hasCommittedMutations,r,o)}var m,E;if(e.isNoDocument()){const u=e.key.path.toArray(),d=yy(e.version),m=e.hasCommittedMutations;return new dr(null,new Xx(u,d),null,m,r,o)}if(e.isUnknownDocument()){const u=e.key.path.toArray(),d=yy(e.version);return new dr(new eO(u,d),null,null,!0,r,o)}return lt()}function jC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function iR(n){const e=new Fr(n[0],n[1]);return St.fromTimestamp(e)}function yy(n){const e=n.toTimestamp();return new Jx(e.seconds,e.nanoseconds)}function _y(n){const e=new Fr(n.seconds,n.nanoseconds);return St.fromTimestamp(e)}function vy(n,e){const t=(e.baseMutations||[]).map(u=>HM(n.Gt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>HM(n.Gt,u)),o=Fr.fromMillis(e.localWriteTimeMs);return new VC(e.batchId,o,t,r)}function jE(n){const e=_y(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?_y(n.lastLimboFreeSnapshotVersion):St.min();let r;var o;return void 0!==n.query.documents?(Et(1===(o=n.query).documents.length),r=_s(kp(UM(o.documents[0])))):r=_s(zM(n.query)),new Nh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,fn.fromBase64String(n.resumeToken))}function sR(n,e){const t=yy(e.snapshotVersion),r=yy(e.lastLimboFreeSnapshotVersion);let o;o=ay(e.target)?GM(n.Gt,e.target):qM(n.Gt,e.target);const u=e.resumeToken.toBase64();return new Bs(e.targetId,oy(e.target),t,u,e.sequenceNumber,r,o)}function $C(n){const e=zM({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?NE(e,e.limit,"L"):e}class iO{getBundleMetadata(e,t){return oR(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:_y(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return oR(e).put({bundleId:(r=t).id,createTime:yy(si(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return aR(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:$C(o.bundledQuery),readTime:_y(o.readTime)};var o})}saveNamedQuery(e,t){return aR(e).put({name:(r=t).name,readTime:yy(si(r.readTime)),bundledQuery:r.bundledQuery});var r}}function oR(n){return js(n,gy.store)}function aR(n){return js(n,my.store)}class sO{constructor(){this.zt=new HC}addToCollectionParentIndex(e,t){return this.zt.add(t),Ne.resolve()}getCollectionParents(e,t){return Ne.resolve(this.zt.getEntries(t))}}class HC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new xe(Qt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new xe(Qt.comparator)).toArray()}}class oO{constructor(){this.Ht=new HC}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const u={collectionId:r,parent:tu(o)};return uR(e).put(u)}return Ne.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[ty(t),""],!1,!0);return uR(e).Bt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Ac(d.parent))}return r})}}function uR(n){return js(n,Up.store)}const lR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $s{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new $s(e,$s.DEFAULT_COLLECTION_PERCENTILE,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function cR(n,e,t){const r=n.store(kn.store),o=n.store(qi.store),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const E=r.jt({range:d},(M,x,V)=>(m++,V.delete()));u.push(E.next(()=>{Et(1===m)}));const D=[];for(const M of t.mutations){const x=qi.key(e,M.key.path,t.batchId);u.push(o.delete(x)),D.push(M.key)}return Ne.waitFor(u).next(()=>D)}function Db(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}$s.DEFAULT_COLLECTION_PERCENTILE=10,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$s.DEFAULT=new $s(41943040,$s.DEFAULT_COLLECTION_PERCENTILE,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$s.DISABLED=new $s(-1,0,0);class GC{constructor(e,t,r,o){this.userId=e,this.k=t,this.Jt=r,this.referenceDelegate=o,this.Yt={}}static Xt(e,t,r,o){Et(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new GC(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xh(e).jt({index:kn.userMutationsIndex,range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Ey(e),d=xh(e);return d.add({}).next(m=>{Et("number"==typeof m);const E=new VC(m,t,r,o),D=function(V,q,Z){const he=Z.baseMutations.map(ot=>Tb(V.Gt,ot)),Pe=Z.mutations.map(ot=>Tb(V.Gt,ot));return new kn(q,Z.batchId,Z.localWriteTime.toMillis(),he,Pe)}(this.k,this.userId,E),M=[];let x=new xe((V,q)=>Tt(V.canonicalString(),q.canonicalString()));for(const V of o){const q=qi.key(this.userId,V.key.path,m);x=x.add(V.key.path.popLast()),M.push(d.put(D)),M.push(u.put(q,qi.PLACEHOLDER))}return x.forEach(V=>{M.push(this.Jt.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.Yt[m]=E.keys()}),Ne.waitFor(M).next(()=>E)})}lookupMutationBatch(e,t){return xh(e).get(t).next(r=>r?(Et(r.userId===this.userId),vy(this.k,r)):null)}Zt(e,t){return this.Yt[t]?Ne.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Yt[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return xh(e).jt({index:kn.userMutationsIndex,range:o},(d,m,E)=>{m.userId===this.userId&&(Et(m.batchId>=r),u=vy(this.k,m)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return xh(e).jt({index:kn.userMutationsIndex,range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xh(e).Bt(kn.userMutationsIndex,t).next(r=>r.map(o=>vy(this.k,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=qi.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Ey(e).jt({range:o},(d,m,E)=>{const[D,M,x]=d,V=Ac(M);if(D===this.userId&&t.path.isEqual(V))return xh(e).get(x).next(q=>{if(!q)throw lt();Et(q.userId===this.userId),u.push(vy(this.k,q))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(Tt);const o=[];return t.forEach(u=>{const d=qi.prefixForPath(this.userId,u.path),m=IDBKeyRange.lowerBound(d),E=Ey(e).jt({range:m},(D,M,x)=>{const[V,q,Z]=D,he=Ac(q);V===this.userId&&u.path.isEqual(he)?r=r.add(Z):x.done()});o.push(E)}),Ne.waitFor(o).next(()=>this.te(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=qi.prefixForPath(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new xe(Tt);return Ey(e).jt({range:d},(E,D,M)=>{const[x,V,q]=E,Z=Ac(V);x===this.userId&&r.isPrefixOf(Z)?Z.length===o&&(m=m.add(q)):M.done()}).next(()=>this.te(e,m))}te(e,t){const r=[],o=[];return t.forEach(u=>{o.push(xh(e).get(u).next(d=>{if(null===d)throw lt();Et(d.userId===this.userId),r.push(vy(this.k,d))}))}),Ne.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return cR(e.Wt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),Ne.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ne.resolve();const r=IDBKeyRange.lowerBound(qi.prefixForUser(this.userId)),o=[];return Ey(e).jt({range:r},(u,d,m)=>{if(u[0]===this.userId){const E=Ac(u[1]);o.push(E)}else m.done()}).next(()=>{Et(0===o.length)})})}containsKey(e,t){return dR(e,this.userId,t)}ne(e){return hR(e).get(this.userId).next(t=>t||new Rh(this.userId,-1,""))}}function dR(n,e,t){const r=qi.prefixForPath(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Ey(n).jt({range:u,Kt:!0},(m,E,D)=>{const[M,x,V]=m;M===e&&x===o&&(d=!0),D.done()}).next(()=>d)}function xh(n){return js(n,kn.store)}function Ey(n){return js(n,qi.store)}function hR(n){return js(n,Rh.store)}class $p{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new $p(0)}static re(){return new $p(-1)}}class aO{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const r=new $p(t.highestTargetId);return t.highestTargetId=r.next(),this.ce(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>St.fromTimestamp(new Fr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.oe(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.ce(e,o)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.oe(e).next(r=>(r.targetCount+=1,this.ue(t,r),this.ce(e,r))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>wy(e).delete(t.targetId)).next(()=>this.oe(e)).next(r=>(Et(r.targetCount>0),r.targetCount-=1,this.ce(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return wy(e).jt((d,m)=>{const E=jE(m);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>Ne.waitFor(u)).next(()=>o)}forEachTarget(e,t){return wy(e).jt((r,o)=>{const u=jE(o);t(u)})}oe(e){return fR(e).get(Eo.key).next(t=>(Et(null!==t),t))}ce(e,t){return fR(e).put(Eo.key,t)}ae(e,t){return wy(e).put(sR(this.k,t))}ue(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const r=oy(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return wy(e).jt({range:o,index:Bs.queryTargetsIndexName},(d,m,E)=>{const D=jE(m);TE(t,D.target)&&(u=D,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Oh(e);return t.forEach(d=>{const m=tu(d.path);o.push(u.put(new Ii(r,m))),o.push(this.referenceDelegate.addReference(e,r,d))}),Ne.waitFor(o)}removeMatchingKeys(e,t,r){const o=Oh(e);return Ne.forEach(t,u=>{const d=tu(u.path);return Ne.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Oh(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Oh(e);let u=tn();return o.jt({range:r,Kt:!0},(d,m,E)=>{const D=Ac(d[1]),M=new rt(D);u=u.add(M)}).next(()=>u)}containsKey(e,t){const r=tu(t.path),o=IDBKeyRange.bound([r],[ty(r)],!1,!0);let u=0;return Oh(e).jt({index:Ii.documentTargetsIndex,Kt:!0,range:o},([d,m],E,D)=>{0!==d&&(u++,D.done())}).next(()=>u>0)}Et(e,t){return wy(e).get(t).next(r=>r?jE(r):null)}}function wy(n){return js(n,Bs.store)}function fR(n){return js(n,Eo.store)}function Oh(n){return js(n,Ii.store)}function Hp(n){return qC.apply(this,arguments)}function qC(){return qC=(0,ye.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==JM)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),qC.apply(this,arguments)}function pR([n,e],[t,r]){const o=Tt(n,t);return 0===o?Tt(e,r):o}class uO{constructor(e){this.he=e,this.buffer=new xe(pR),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();pR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lO{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const r=this.we?3e5:6e4;Le("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Bp(o)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Hp(o)}yield t.me(e)}))}}class cO{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ne.resolve(ys.I);const r=new uO(t);return this.ge.forEachTarget(e,o=>r.de(o.sequenceNumber)).next(()=>this.ge.pe(e,o=>r.de(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.ge.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(lR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lR):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let r,o,u,d,m,E,D;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,d=Date.now(),this.nthSequenceNumber(e,o))).next(x=>(r=x,m=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(D=Date.now(),mh()<=zu.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-M}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(E-m)+`ms\n\tRemoved ${x} documents in `+(D-E)+`ms\nTotal Duration: ${D-M}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x})))}}class dO{constructor(e,t){this.db=e,this.garbageCollector=new cO(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Ee(e){let t=0;return this.pe(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(r,o)=>t(o))}addReference(e,t,r){return Ib(e,r)}removeReference(e,t,r){return Ib(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ib(e,t)}Ae(e,t){return function(r,o){let u=!1;return hR(r).Qt(d=>dR(r,d,o).next(m=>(m&&(u=!0),Ne.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Ie(e,(d,m)=>{if(m<=t){const E=this.Ae(e,d).next(D=>{if(!D)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d),Oh(e).delete([0,tu(d.path)])))});o.push(E)}}).next(()=>Ne.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ib(e,t)}Ie(e,t){const r=Oh(e);let o,u=ys.I;return r.jt({index:Ii.documentTargetsIndex},([d,m],{path:E,sequenceNumber:D})=>{0===d?(u!==ys.I&&t(new rt(Ac(o)),u),u=D,o=E):u=ys.I}).next(()=>{u!==ys.I&&t(new rt(Ac(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ib(n,e){return Oh(n).put((r=n.currentSequenceNumber,new Ii(0,tu(e.path),r)));var r}class Ty{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){Ju(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return pE(this.inner)}}class gR{constructor(){this.changes=new Ty(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:St.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Rn.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ne.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hO{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,r){return Ph(e).put(Cb(t),r)}removeEntry(e,t){const r=Ph(e),o=Cb(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Re(e,r)))}getEntry(e,t){return Ph(e).get(Cb(t)).next(r=>this.be(t,r))}Pe(e,t){return Ph(e).get(Cb(t)).next(r=>({document:this.be(t,r),size:Db(r)}))}getEntries(e,t){let r=Qe();return this.ve(e,t,(o,u)=>{const d=this.be(o,u);r=r.insert(o,d)}).next(()=>r)}Ve(e,t){let r=Qe(),o=new W(rt.comparator);return this.ve(e,t,(u,d)=>{const m=this.be(u,d);r=r.insert(u,m),o=o.insert(u,Db(d))}).next(()=>({documents:r,Se:o}))}ve(e,t,r){if(t.isEmpty())return Ne.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),u=t.getIterator();let d=u.getNext();return Ph(e).jt({range:o},(m,E,D)=>{const M=rt.fromSegments(m);for(;d&&rt.comparator(d,M)<0;)r(d,null),d=u.getNext();d&&d.isEqual(M)&&(r(d,E),d=u.hasNext()?u.getNext():null),d?D.Lt(d.path.toArray()):D.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r){let o=Qe();const u=t.path.length+1,d={};if(r.isEqual(St.min())){const m=t.path.toArray();d.range=IDBKeyRange.lowerBound(m)}else{const m=t.path.toArray(),E=jC(r);d.range=IDBKeyRange.lowerBound([m,E],!0),d.index=dr.collectionReadTimeIndex}return Ph(e).jt(d,(m,E,D)=>{if(m.length!==u)return;const M=BC(this.k,E);t.path.isPrefixOf(M.key.path)?Ih(t,M)&&(o=o.insert(M.key,M)):D.done()}).next(()=>o)}newChangeBuffer(e){return new fO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return mR(e).get(nl.key).next(t=>(Et(!!t),t))}Re(e,t){return mR(e).put(nl.key,t)}be(e,t){if(t){const r=BC(this.k,t);if(!r.isNoDocument()||!r.version.isEqual(St.min()))return r}return Rn.newInvalidDocument(e)}}class fO extends gR{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new Ty(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new xe((u,d)=>Tt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Ce.get(u);if(d.document.isValidDocument()){const E=rR(this.De.k,d.document,this.getReadTime(u));o=o.add(u.path.popLast()),r+=Db(E)-m,t.push(this.De.addEntry(e,u,E))}else if(r-=m,this.trackRemovals){const E=rR(this.De.k,Rn.newNoDocument(u,St.min()),this.getReadTime(u));t.push(this.De.addEntry(e,u,E))}else t.push(this.De.removeEntry(e,u))}),o.forEach(u=>{t.push(this.De.Jt.addToCollectionParentIndex(e,u))}),t.push(this.De.updateMetadata(e,r)),Ne.waitFor(t)}getFromCache(e,t){return this.De.Pe(e,t).next(r=>(this.Ce.set(t,r.size),r.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:r,Se:o})=>(o.forEach((u,d)=>{this.Ce.set(u,d)}),r))}}function mR(n){return js(n,nl.store)}function Ph(n){return js(n,dr.store)}function Cb(n){return n.path.toArray()}class pO{constructor(e){this.k=e}Nt(e,t,r,o){Et(r<o&&r>=0&&o<=11);const u=new bb("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore(vo.store),(m=e).createObjectStore(Rh.store,{keyPath:Rh.keyPath}),m.createObjectStore(kn.store,{keyPath:kn.keyPath,autoIncrement:!0}).createIndex(kn.userMutationsIndex,kn.userMutationsKeyPath,{unique:!0}),m.createObjectStore(qi.store),yR(e),function(m){m.createObjectStore(dr.store)}(e));let d=Ne.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore(Ii.store),m.deleteObjectStore(Bs.store),m.deleteObjectStore(Eo.store)}(e),yR(e)),d=d.next(()=>function(m){const E=m.store(Eo.store),D=new Eo(0,0,St.min().toTimestamp(),0);return E.put(Eo.key,D)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,E){return E.store(kn.store).Bt().next(D=>{m.deleteObjectStore(kn.store),m.createObjectStore(kn.store,{keyPath:kn.keyPath,autoIncrement:!0}).createIndex(kn.userMutationsIndex,kn.userMutationsKeyPath,{unique:!0});const M=E.store(kn.store),x=D.map(V=>M.put(V));return Ne.waitFor(x)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore(Sc.store,{keyPath:Sc.keyPath})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Ne(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore(nl.store)}(e),this.ke(u)))),r<7&&o>=7&&(d=d.next(()=>this.xe(u))),r<8&&o>=8&&(d=d.next(()=>this.$e(e,u))),r<9&&o>=9&&(d=d.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e),function(m){const E=m.objectStore(dr.store);E.createIndex(dr.readTimeIndex,dr.readTimeIndexPath,{unique:!1}),E.createIndex(dr.collectionReadTimeIndex,dr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(d=d.next(()=>this.Oe(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore(gy.store,{keyPath:gy.keyPath})})(e),function(m){m.createObjectStore(my.store,{keyPath:my.keyPath})}(e)})),d}ke(e){let t=0;return e.store(dr.store).jt((r,o)=>{t+=Db(o)}).next(()=>{const r=new nl(t);return e.store(nl.store).put(nl.key,r)})}Ne(e){const t=e.store(Rh.store),r=e.store(kn.store);return t.Bt().next(o=>Ne.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.Bt(kn.userMutationsIndex,d).next(m=>Ne.forEach(m,E=>{Et(E.userId===u.userId);const D=vy(this.k,E);return cR(e,u.userId,D).next(()=>{})}))}))}xe(e){const t=e.store(Ii.store),r=e.store(dr.store);return e.store(Eo.store).get(Eo.key).next(o=>{const u=[];return r.jt((d,m)=>{const E=new Qt(d),D=[0,tu(E)];u.push(t.get(D).next(M=>M?Ne.resolve():t.put(new Ii(0,tu(E),o.highestListenSequenceNumber))))}).next(()=>Ne.waitFor(u))})}$e(e,t){e.createObjectStore(Up.store,{keyPath:Up.keyPath});const r=t.store(Up.store),o=new HC,u=d=>{if(o.add(d)){const m=d.lastSegment(),E=d.popLast();return r.put({collectionId:m,parent:tu(E)})}};return t.store(dr.store).jt({Kt:!0},(d,m)=>{const E=new Qt(d);return u(E.popLast())}).next(()=>t.store(qi.store).jt({Kt:!0},([d,m,E],D)=>{const M=Ac(m);return u(M.popLast())}))}Oe(e){const t=e.store(Bs.store);return t.jt((r,o)=>{const u=jE(o),d=sR(this.k,u);return t.put(d)})}}function yR(n){n.createObjectStore(Ii.store,{keyPath:Ii.keyPath}).createIndex(Ii.documentTargetsIndex,Ii.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Bs.store,{keyPath:Bs.keyPath}).createIndex(Bs.queryTargetsIndexName,Bs.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Eo.store)}const zC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class WC{constructor(e,t,r,o,u,d,m,E,D,M){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Me=u,this.window=d,this.document=m,this.Fe=D,this.Le=M,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=x=>Promise.resolve(),!WC.Pt())throw new Re(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dO(this,o),this.Ge=t+"main",this.k=new nR(E),this.ze=new nu(this.Ge,11,new pO(this.k)),this.He=new aO(this.referenceDelegate,this.k),this.Jt=new oO,this.Je=new hO(this.k,this.Jt),this.Ye=new iO,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===M&&Dn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ae.FAILED_PRECONDITION,zC);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new ys(e,this.Fe)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var r=(0,ye.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Me.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ab(e).put(new Sc(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Me.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.cn(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(Bp(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Me.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return $E(e).get(vo.key).next(t=>Ne.resolve(this.un(t)))}hn(e){return Ab(e).delete(this.clientId)}ln(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=js(r,Sc.store);return o.Bt().next(u=>{const d=e.dn(u,18e5),m=u.filter(E=>-1===d.indexOf(E));return Ne.forEach(m,E=>o.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(e.Xe)for(const r of t)e.Xe.removeItem(e.wn(r.clientId))}})()}nn(){this.je=this.Me.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Ne.resolve(!0):$E(e).get(vo.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new Re(ae.FAILED_PRECONDITION,zC);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ab(e).Bt().next(r=>void 0===this.dn(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[vo.store,Sc.store],t=>{const r=new tR(t,ys.I);return e.cn(r).next(()=>e.hn(r))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(r=>this.fn(r.updateTimeMs,t)&&!this._n(r.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>Ab(e).Bt().next(t=>this.dn(t,18e5).map(r=>r.clientId)))}get started(){return this.Ue}getMutationQueue(e){return GC.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,r){let u;return Le("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",tO,d=>(u=new tR(d,this.Be?this.Be.next():ys.I),"readwrite-primary"===t?this.rn(u).next(m=>!!m||this.on(u)).next(m=>{if(!m)throw Dn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Me.enqueueRetryable(()=>this.We(!1)),new Re(ae.FAILED_PRECONDITION,JM);return r(u)}).next(m=>this.an(u).next(()=>m)):this.En(u).next(()=>r(u)))).then(d=>(u.raiseOnCommittedEvent(),d))}En(e){return $E(e).get(vo.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ae.FAILED_PRECONDITION,zC)})}an(e){const t=new vo(this.clientId,this.allowTabSynchronization,Date.now());return $E(e).put(vo.key,t)}static Pt(){return nu.Pt()}cn(e){const t=$E(e);return t.get(vo.key).next(r=>this.un(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete(vo.key)):Ne.resolve())}fn(e,t){const r=Date.now();return!(e<r-t||e>r&&(Dn(`Detected an update time that is in the future: ${e} > ${r}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Me.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,Lt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Me.enterRestrictedMode(!0),this.Me.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const r=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Dn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){Dn("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $E(n){return js(n,vo.store)}function Ab(n){return js(n,Sc.store)}function KC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class gO{constructor(e,t){this.progress=e,this.In=t}}class _R{constructor(e,t,r){this.Je=e,this.An=t,this.Jt=r}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.bn(e,t,r))}bn(e,t,r){return this.Je.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}Pn(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}vn(e,t){return this.Je.getEntries(e,t).next(r=>this.Vn(e,r).next(()=>r))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Pn(t,r))}getDocumentsMatchingQuery(e,t,r){return rt.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Sn(e,t.path):RE(t)?this.Dn(e,t,r):this.Cn(e,t,r);var o}Sn(e,t){return this.Rn(e,new rt(t)).next(r=>{let o=Jt();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Dn(e,t,r){const o=t.collectionGroup;let u=Jt();return this.Jt.getCollectionParents(e,o).next(d=>Ne.forEach(d,m=>{const E=(D=t,M=m.child(o),new Xu(M,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,M;return this.Cn(e,E,r).next(D=>{D.forEach((M,x)=>{u=u.insert(M,x)})})}).next(()=>u))}Cn(e,t,r){let o,u;return this.Je.getDocumentsMatchingQuery(e,t,r).next(d=>(o=d,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(d=>(u=d,this.Nn(e,u,o).next(m=>{o=m;for(const E of u)for(const D of E.mutations){const M=D.key;let x=o.get(M);null==x&&(x=Rn.newInvalidDocument(M),o=o.insert(M,x)),wb(D,x,E.localWriteTime),x.isFoundDocument()||(o=o.remove(M))}}))).next(()=>(o.forEach((d,m)=>{Ih(t,m)||(o=o.remove(d))}),o))}Nn(e,t,r){let o=tn();for(const d of t)for(const m of d.mutations)m instanceof a&&null===r.get(m.key)&&(o=o.add(m.key));let u=r;return this.Je.getEntries(e,o).next(d=>(d.forEach((m,E)=>{E.isFoundDocument()&&(u=u.insert(m,E))}),u))}}class ZC{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.kn=r,this.xn=o}static $n(e,t){let r=tn(),o=tn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new ZC(e,t.fromCache,r,o)}}class vR{On(e){this.Mn=e}getDocumentsMatchingQuery(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(St.min())?this.Fn(e,t):this.Mn.vn(e,o).next(u=>{const d=this.Ln(t,u);return(AE(t)||Fp(t))&&this.Bn(t.limitType,d,o,r)?this.Fn(e,t):(mh()<=zu.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xE(t)),this.Mn.getDocumentsMatchingQuery(e,t,r).next(m=>(d.forEach(E=>{m=m.insert(E.key,E)}),m)))});var u}Ln(e,t){let r=new xe(Lp(e));return t.forEach((o,u)=>{Ih(e,u)&&(r=r.add(u))}),r}Bn(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Fn(e,t){return mh()<=zu.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",xE(t)),this.Mn.getDocumentsMatchingQuery(e,t,St.min())}}class mO{constructor(e,t,r,o){this.persistence=e,this.Un=t,this.k=o,this.qn=new W(Tt),this.Kn=new Ty(u=>oy(u),TE),this.jn=St.min(),this.An=e.getMutationQueue(r),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new _R(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.On(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function ER(n,e,t,r){return new mO(n,e,t,r)}function wR(n,e){return YC.apply(this,arguments)}function YC(){return YC=(0,ye.Z)(function*(n,e){const t=je(n);let r=t.An,o=t.Wn;const u=yield t.persistence.runTransaction("Handle user change","readonly",d=>{let m;return t.An.getAllMutationBatches(d).next(E=>(m=E,r=t.persistence.getMutationQueue(e),o=new _R(t.Qn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(d))).next(E=>{const D=[],M=[];let x=tn();for(const V of m){D.push(V.batchId);for(const q of V.mutations)x=x.add(q.key)}for(const V of E){M.push(V.batchId);for(const q of V.mutations)x=x.add(q.key)}return o.vn(d,x).next(V=>({Gn:V,removedBatchIds:D,addedBatchIds:M}))})});return t.An=r,t.Wn=o,t.Un.On(t.Wn),u}),YC.apply(this,arguments)}function yO(n,e){const t=je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Qn.newChangeBuffer({trackRemovals:!0});return function(d,m,E,D){const M=E.batch,x=M.keys();let V=Ne.resolve();return x.forEach(q=>{V=V.next(()=>D.getEntry(m,q)).next(Z=>{const he=E.docVersions.get(q);Et(null!==he),Z.version.compareTo(he)<0&&(M.applyToRemoteDocument(Z,E),Z.isValidDocument()&&D.addEntry(Z,E.commitVersion))})}),V.next(()=>d.An.removeMutationBatch(m,M))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.An.performConsistencyCheck(r)).next(()=>t.Wn.vn(r,o))})}function TR(n){const e=je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function _O(n,e){const t=je(n),r=e.snapshotVersion;let o=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Qn.newChangeBuffer({trackRemovals:!0});o=t.qn;const m=[];e.targetChanges.forEach((D,M)=>{const x=o.get(M);if(!x)return;m.push(t.He.removeMatchingKeys(u,D.removedDocuments,M).next(()=>t.He.addMatchingKeys(u,D.addedDocuments,M)));let V=x.withSequenceNumber(u.currentSequenceNumber);var q,Z,he;e.targetMismatches.has(M)?V=V.withResumeToken(fn.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):D.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(D.resumeToken,r)),o=o.insert(M,V),Z=V,he=D,(0===(q=x).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0)&&m.push(t.He.updateTargetData(u,V))});let E=Qe();if(e.documentUpdates.forEach((D,M)=>{e.resolvedLimboDocuments.has(D)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,D))}),m.push(bR(u,d,e.documentUpdates,r,void 0).next(D=>{E=D})),!r.isEqual(St.min())){const D=t.He.getLastRemoteSnapshotVersion(u).next(M=>t.He.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(D)}return Ne.waitFor(m).next(()=>d.apply(u)).next(()=>t.Wn.Vn(u,E)).next(()=>E)}).then(u=>(t.qn=o,u))}function bR(n,e,t,r,o){let u=tn();return t.forEach(d=>u=u.add(d)),e.getEntries(n,u).next(d=>{let m=Qe();return t.forEach((E,D)=>{const M=d.get(E),x=(null==o?void 0:o.get(E))||r;D.isNoDocument()&&D.version.isEqual(St.min())?(e.removeEntry(E,x),m=m.insert(E,D)):!M.isValidDocument()||D.version.compareTo(M.version)>0||0===D.version.compareTo(M.version)&&M.hasPendingWrites?(e.addEntry(D,x),m=m.insert(E,D)):Le("LocalStore","Ignoring outdated watch update for ",E,". Current version:",M.version," Watch version:",D.version)}),m})}function vO(n,e){const t=je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(r,e)))}function by(n,e){const t=je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.He.getTargetData(r,e).next(u=>u?(o=u,Ne.resolve(o)):t.He.allocateTargetId(r).next(d=>(o=new Nh(e,d,0,r.currentSequenceNumber),t.He.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.qn.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.qn=t.qn.insert(r.targetId,r),t.Kn.set(e,r.targetId)),r})}function Dy(n,e,t){return QC.apply(this,arguments)}function QC(){return QC=(0,ye.Z)(function*(n,e,t){const r=je(n),o=r.qn.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Bp(d))throw d;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.qn=r.qn.remove(e),r.Kn.delete(o.target)}),QC.apply(this,arguments)}function Sb(n,e,t){const r=je(n);let o=St.min(),u=tn();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,E,D){const M=je(m),x=M.Kn.get(D);return void 0!==x?Ne.resolve(M.qn.get(x)):M.He.getTargetData(E,D)}(r,d,_s(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(d,m.targetId).next(E=>{u=E})}).next(()=>r.Un.getDocumentsMatchingQuery(d,e,t?o:St.min(),t?u:tn())).next(m=>({documents:m,zn:u})))}function DR(n,e){const t=je(n),r=je(t.He),o=t.qn.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function IR(n){const e=je(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,u){const d=je(r);let m=Qe(),E=jC(u);const D=Ph(o),M=IDBKeyRange.lowerBound(E,!0);return D.jt({index:dr.readTimeIndex,range:M},(x,V)=>{const q=BC(d.k,V);m=m.insert(q.key,q),E=V.readTime}).next(()=>({In:m,readTime:iR(E)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:r})=>(e.jn=r,t))}function JC(){return JC=(0,ye.Z)(function*(n){const e=je(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=Ph(r);let u=St.min();return o.jt({index:dr.readTimeIndex,reverse:!0},(d,m,E)=>{m.readTime&&(u=iR(m.readTime)),E.done()}).next(()=>u)}(t)).then(t=>{e.jn=t})}),JC.apply(this,arguments)}function XC(){return XC=(0,ye.Z)(function*(n,e,t,r){const o=je(n);let u=tn(),d=Qe(),m=el();for(const M of t){const x=e.Hn(M.metadata.name);M.document&&(u=u.add(x)),d=d.insert(x,e.Jn(M)),m=m.insert(x,e.Yn(M.metadata.readTime))}const E=o.Qn.newChangeBuffer({trackRemovals:!0}),D=yield by(o,(M=r,_s(kp(Qt.fromString(`__bundle__/docs/${M}`)))));var M;return o.persistence.runTransaction("Apply bundle documents","readwrite",M=>bR(M,E,d,St.min(),m).next(x=>(E.apply(M),x)).next(x=>o.He.removeMatchingKeysForTargetId(M,D.targetId).next(()=>o.He.addMatchingKeys(M,u,D.targetId)).next(()=>o.Wn.Vn(M,x)).next(()=>x)))}),XC.apply(this,arguments)}function TO(n,e){return eA.apply(this,arguments)}function eA(){return eA=(0,ye.Z)(function*(n,e,t=tn()){const r=yield by(n,_s($C(e.bundledQuery))),o=je(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=si(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ye.saveNamedQuery(u,e);const m=r.withResumeToken(fn.EMPTY_BYTE_STRING,d);return o.qn=o.qn.insert(m.targetId,m),o.He.updateTargetData(u,m).next(()=>o.He.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.He.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ye.saveNamedQuery(u,e))})}),eA.apply(this,arguments)}class bO{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return Ne.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var r;return this.Xn.set(t.id,{id:(r=t).id,version:r.version,createTime:si(r.createTime)}),Ne.resolve()}getNamedQuery(e,t){return Ne.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(r=t).name,query:$C(r.bundledQuery),readTime:si(r.readTime)}),Ne.resolve();var r}}class tA{constructor(){this.ts=new xe(oi.es),this.ns=new xe(oi.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const r=new oi(e,t);this.ts=this.ts.add(r),this.ns=this.ns.add(r)}rs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.os(new oi(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new rt(new Qt([])),r=new oi(t,e),o=new oi(t,e+1),u=[];return this.ns.forEachInRange([r,o],d=>{this.os(d),u.push(d.key)}),u}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new rt(new Qt([])),r=new oi(t,e),o=new oi(t,e+1);let u=tn();return this.ns.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new oi(e,0),r=this.ts.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class oi{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return rt.comparator(e.key,t.key)||Tt(e.fs,t.fs)}static ss(e,t){return Tt(e.fs,t.fs)||rt.comparator(e.key,t.key)}}class DO{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new xe(oi.es)}checkEmpty(e){return Ne.resolve(0===this.An.length)}addMutationBatch(e,t,r,o){const u=this.ds;this.ds++;const d=new VC(u,t,r,o);this.An.push(d);for(const m of o)this.ws=this.ws.add(new oi(m.key,u)),this.Jt.addToCollectionParentIndex(e,m.key.path.popLast());return Ne.resolve(d)}lookupMutationBatch(e,t){return Ne.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.gs(t+1),u=o<0?0:o;return Ne.resolve(this.An.length>u?this.An[u]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Ne.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new oi(t,0),o=new oi(t,Number.POSITIVE_INFINITY),u=[];return this.ws.forEachInRange([r,o],d=>{const m=this._s(d.fs);u.push(m)}),Ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(Tt);return t.forEach(o=>{const u=new oi(o,0),d=new oi(o,Number.POSITIVE_INFINITY);this.ws.forEachInRange([u,d],m=>{r=r.add(m.fs)})}),Ne.resolve(this.ys(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;rt.isDocumentKey(u)||(u=u.child(""));const d=new oi(new rt(u),0);let m=new xe(Tt);return this.ws.forEachWhile(E=>{const D=E.key.path;return!!r.isPrefixOf(D)&&(D.length===o&&(m=m.add(E.fs)),!0)},d),Ne.resolve(this.ys(m))}ys(e){const t=[];return e.forEach(r=>{const o=this._s(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Et(0===this.ps(t.batchId,"removed")),this.An.shift();let r=this.ws;return Ne.forEach(t.mutations,o=>{const u=new oi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ws=r})}ee(e){}containsKey(e,t){const r=new oi(t,0),o=this.ws.firstAfterOrEqual(r);return Ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return Ne.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class IO{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new W(rt.comparator),this.size=0}addEntry(e,t,r){const o=t.key,u=this.docs.get(o),d=u?u.size:0,m=this.Ts(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:m,readTime:r}),this.size+=m-d,this.Jt.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ne.resolve(r?r.document.mutableCopy():Rn.newInvalidDocument(t))}getEntries(e,t){let r=Qe();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Rn.newInvalidDocument(o))}),Ne.resolve(r)}getDocumentsMatchingQuery(e,t,r){let o=Qe();const u=new rt(t.path.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:E,readTime:D}}=d.getNext();if(!t.path.isPrefixOf(m.path))break;D.compareTo(r)<=0||Ih(t,E)&&(o=o.insert(E.key,E.mutableCopy()))}return Ne.resolve(o)}Es(e,t){return Ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new CO(this)}getSize(e){return Ne.resolve(this.size)}}class CO extends gR{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.document.isValidDocument()?t.push(this.De.addEntry(e,o.document,this.getReadTime(r))):this.De.removeEntry(r)}),Ne.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class AO{constructor(e){this.persistence=e,this.Is=new Ty(t=>oy(t),TE),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.As=0,this.Rs=new tA,this.targetCount=0,this.bs=$p.ie()}forEachTarget(e,t){return this.Is.forEach((r,o)=>t(o)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.As&&(this.As=t),Ne.resolve()}ae(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new $p(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,Ne.resolve()}updateTargetData(e,t){return this.ae(t),Ne.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Is.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Is.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),Ne.waitFor(u).next(()=>o)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.Is.get(t)||null;return Ne.resolve(r)}addMatchingKeys(e,t,r){return this.Rs.rs(t,r),Ne.resolve()}removeMatchingKeys(e,t,r){this.Rs.cs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),Ne.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),Ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Rs.ls(t);return Ne.resolve(r)}containsKey(e,t){return Ne.resolve(this.Rs.containsKey(t))}}class SO{constructor(e,t){this.Ps={},this.Be=new ys(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new AO(this),this.Jt=new sO,this.Je=new IO(this.Jt,r=>this.referenceDelegate.vs(r)),this.k=new nR(t),this.Ye=new bO(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.Ps[e.toKey()];return t||(t=new DO(this.Jt,this.referenceDelegate),this.Ps[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const o=new MO(this.Be.next());return this.referenceDelegate.Vs(),r(o).next(u=>this.referenceDelegate.Ss(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ds(e,t){return Ne.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class MO extends XM{constructor(e){super(),this.currentSequenceNumber=e}}class nA{constructor(e){this.persistence=e,this.Cs=new tA,this.Ns=null}static ks(e){return new nA(e)}get xs(){if(this.Ns)return this.Ns;throw lt()}addReference(e,t,r){return this.Cs.addReference(r,t),this.xs.delete(r.toString()),Ne.resolve()}removeReference(e,t,r){return this.Cs.removeReference(r,t),this.xs.add(r.toString()),Ne.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Ne.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(o=>this.xs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.xs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.xs,r=>{const o=rt.fromPath(r);return this.$s(e,o).next(u=>{u||t.removeEntry(o)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return Ne.or([()=>Ne.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function CR(n,e){return`firestore_clients_${n}_${e}`}function AR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function rA(n,e){return`firestore_targets_${n}_${e}`}class Mb{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Os(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Re(o.error.code,o.error.message))),d?new Mb(e,t,o.state,u):(Dn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class HE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Os(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Re(r.error.code,r.error.message))),u?new HE(e,r.state,o):(Dn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Os(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Sh();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=_E(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new Rb(e,u):(Dn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class iA{constructor(e,t){this.clientId=e,this.onlineState=t}static Os(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new iA(t.clientId,t.onlineState):(Dn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class sA{constructor(){this.activeTargetIds=Sh()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ms(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oA{constructor(e,t,r,o,u){this.window=e,this.Me=t,this.persistenceKey=r,this.Bs=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new W(Tt),this.started=!1,this.js=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Qs=CR(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new sA),this.Gs=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(m){return`firestore_bundle_loaded_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static Pt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Tn();for(const o of t){if(o===e.Bs)continue;const u=e.getItem(CR(e.persistenceKey,o));if(u){const d=Rb.Os(o,u);d&&(e.Ks=e.Ks.insert(d.clientId,d))}}e.Xs();const r=e.storage.getItem(e.Js);if(r){const o=e.Zs(r);o&&e.ti(o)}for(const o of e.js)e.qs(o);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,r){this.ni(e,t,r),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(rA(this.persistenceKey,e));if(r){const o=HE.Os(e,r);o&&(t=o.state)}}return this.ii.Fs(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rA(this.persistenceKey,e))}updateQueryState(e,t,r){this.ri(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.si(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ci()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Qs)return void Dn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Me.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.Gs.test(r.key)){if(null==r.newValue){const o=t.ai(r.key);return t.ui(o,null)}{const o=t.hi(r.key,r.newValue);if(o)return t.ui(o.clientId,o)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const o=t.li(r.key,r.newValue);if(o)return t.fi(o)}}else if(t.Hs.test(r.key)){if(null!==r.newValue){const o=t.di(r.key,r.newValue);if(o)return t.wi(o)}}else if(r.key===t.Js){if(null!==r.newValue){const o=t.Zs(r.newValue);if(o)return t.ti(o)}}else if(r.key===t.Ws){const o=function(u){let d=ys.I;if(null!=u)try{const m=JSON.parse(u);Et("number"==typeof m),d=m}catch(m){Dn("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==ys.I&&t.sequenceNumberHandler(o)}else if(r.key===t.Ys)return t.syncEngine._i()}else t.js.push(r)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Ms())}ni(e,t,r){const o=new Mb(this.currentUser,e,t,r),u=AR(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Ms())}si(e){const t=AR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,r){const o=rA(this.persistenceKey,e),u=new HE(e,t,r);this.setItem(o,u.Ms())}ci(){this.setItem(this.Ys,"value-not-used")}ai(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const r=this.ai(e);return Rb.Os(r,t)}li(e,t){const r=this.zs.exec(e),o=Number(r[1]);return Mb.Os(new ri(void 0!==r[2]?r[2]:null),o,t)}di(e,t){const r=this.Hs.exec(e),o=Number(r[1]);return HE.Os(o,t)}Zs(e){return iA.Os(e)}fi(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const r=t?this.Ks.insert(e,t):this.Ks.remove(e),o=this.ei(this.Ks),u=this.ei(r),d=[],m=[];return u.forEach(E=>{o.has(E)||d.push(E)}),o.forEach(E=>{u.has(E)||m.push(E)}),this.syncEngine.yi(d,m).then(()=>{this.Ks=r})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=Sh();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class SR{constructor(){this.pi=new sA,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.pi.Fs(e),this.Ti[e]||"not-current"}updateQueryState(e,t,r){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new sA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class RO{Ei(e){}shutdown(){}}class MR{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.bi(),this.Pi=[],this.vi()}Ei(e){this.Pi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Pi)e(0)}bi(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Pi)e(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const NO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class xO{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Oi(e){this.ki(e)}Mi(e){this.xi(e)}}class OO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,r,o,u){const d=this.Ui(e,t);Le("RestConnection","Sending: ",d,r);const m={};return this.qi(m,o,u),this.Ki(e,d,m,r).then(E=>(Le("RestConnection","Received: ",E),E),E=>{throw yh("RestConnection",`${e} failed with error: `,E,"url: ",d,"request:",r),E})}ji(e,t,r,o,u){return this.Bi(e,t,r,o,u)}qi(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Rp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}Ui(e,t){return`${this.Fi}/v1/${t}:${NO[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,r,o){return new Promise((u,d)=>{const m=new wM;m.listenOnce(vM.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case cE.NO_ERROR:const D=m.getResponseJson();Le("Connection","XHR received:",JSON.stringify(D)),u(D);break;case cE.TIMEOUT:Le("Connection",'RPC "'+e+'" timed out'),d(new Re(ae.DEADLINE_EXCEEDED,"Request time out"));break;case cE.HTTP_ERROR:const M=m.getStatus();if(Le("Connection",'RPC "'+e+'" failed with status:',M,"response text:",m.getResponseText()),M>0){const x=m.getResponseJson().error;if(x&&x.status&&x.message){const V=function(q){const Z=q.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Z)>=0?Z:ae.UNKNOWN}(x.status);d(new Re(V,x.message))}else d(new Re(ae.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Re(ae.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Le("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);m.send(t,"POST",E,r,15)})}Qi(e,t,r){const o=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=sb(),d=yC(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new EM({})),this.qi(m.initMessageHeaders,t,r),(0,Lt.uI)()||(0,Lt.b$)()||(0,Lt.d)()||(0,Lt.w1)()||(0,Lt.Mn)()||(0,Lt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Le("Connection","Creating WebChannel: "+E,m);const D=u.createWebChannel(E,m);let M=!1,x=!1;const V=new xO({Vi:Z=>{x?Le("Connection","Not sending because WebChannel is closed:",Z):(M||(Le("Connection","Opening WebChannel transport."),D.open(),M=!0),Le("Connection","WebChannel sending:",Z),D.send(Z))},Si:()=>D.close()}),q=(Z,he,Pe)=>{Z.listen(he,ot=>{try{Pe(ot)}catch(yt){setTimeout(()=>{throw yt},0)}})};return q(D,dE.EventType.OPEN,()=>{x||Le("Connection","WebChannel transport opened.")}),q(D,dE.EventType.CLOSE,()=>{x||(x=!0,Le("Connection","WebChannel transport closed"),V.Oi())}),q(D,dE.EventType.ERROR,Z=>{x||(x=!0,yh("Connection","WebChannel transport errored:",Z),V.Oi(new Re(ae.UNAVAILABLE,"The operation could not be completed")))}),q(D,dE.EventType.MESSAGE,Z=>{var he;if(!x){const Pe=Z.data[0];Et(!!Pe);const ot=Pe,yt=ot.error||(null===(he=ot[0])||void 0===he?void 0:he.error);if(yt){Le("Connection","WebChannel received error:",yt);const Pt=yt.status;let ct=function(hr){const Ur=A[hr];if(void 0!==Ur)return $(Ur)}(Pt),un=yt.message;void 0===ct&&(ct=ae.INTERNAL,un="Unknown error status: "+Pt+" with message "+yt.message),x=!0,V.Oi(new Re(ct,un)),D.close()}else Le("Connection","WebChannel received:",Pe),V.Mi(Pe)}}),q(d,ob.STAT_EVENT,Z=>{Z.stat===_C.PROXY?Le("Connection","Detected buffering proxy"):Z.stat===_C.NOPROXY&&Le("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.$i()},0),V}}function RR(){return"undefined"!=typeof window?window:null}function Nb(){return"undefined"!=typeof document?document:null}function GE(n){return new Bx(n,!0)}class aA{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Me=e,this.timerId=t,this.Wi=r,this.Gi=o,this.zi=u,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),o=Math.max(0,t-r);o>0&&Le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ji=this.Me.enqueueAfterDelay(this.timerId,o,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class NR{constructor(e,t,r,o,u,d,m,E){this.Me=e,this.nr=r,this.sr=o,this.ir=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=E,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new aA(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,ye.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.cr&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,ye.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}pr(){this.ar&&(this.ar.cancel(),this.ar=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.yr(),r.pr(),r.ur.cancel(),r.rr++,4!==e?r.ur.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Dn(t.toString()),Dn("Using maximum backoff delay to prevent overloading the backend."),r.ur.Xi()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Tr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.rr===t&&this.Ir(r,o)},r=>{e(()=>{const o=new Re(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ar(o)})})}Ir(e,t){const r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{r(()=>(this.state=2,this.ar=this.Me.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(o=>{r(()=>this.Ar(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}dr(){var e=this;this.state=5,this.ur.Zi((0,ye.Z)(function*(){e.state=0,e.start()}))}Ar(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Me.enqueueAndForget(()=>this.rr===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PO extends NR{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.k=u}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function Hx(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:lt(),o=e.targetChange.targetIds||[],u=function(E,D){return E.C?(Et(void 0===D||"string"==typeof D),fn.fromBase64String(D||"")):(Et(void 0===D||D instanceof Uint8Array),fn.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(E){const D=void 0===E.code?ae.UNKNOWN:$(E.code);return new Re(D,E.message||"")}(d);t=new hy(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=tl(n,r.document.name),u=si(r.document.updateTime),d=new ii({mapValue:{fields:r.document.fields}}),m=Rn.newFoundDocument(o,u,d);t=new Mh(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=tl(n,r.document),u=r.readTime?si(r.readTime):St.min(),d=Rn.newNoDocument(o,u);t=new Mh([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=tl(n,r.document);t=new Mh([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return lt();{const r=e.filter,u=new T(r.count||0);t=new dy(r.targetId,u)}}var E;return t}(this.k,e),r=function(o){if(!("targetChange"in o))return St.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?St.min():u.readTime?si(u.readTime):St.min()}(e);return this.listener.br(t,r)}Pr(e){const t={};t.database=UE(this.k),t.addTarget=function(o,u){let d;const m=u.target;return d=ay(m)?{documents:GM(o,m)}:{query:qM(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=LM(o,u.resumeToken):u.snapshotVersion.compareTo(St.min())>0&&(d.readTime=LE(o,u.snapshotVersion.toTimestamp())),d}(this.k,e);const r=function qx(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.gr(t)}vr(e){const t={};t.database=UE(this.k),t.removeTarget=e,this.gr(t)}}class kO extends NR{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.k=u,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function Gx(n,e){return n&&n.length>0?(Et(void 0!==e),n.map(t=>function(r,o){let u=si(r.updateTime?r.updateTime:o);return u.isEqual(St.min())&&(u=si(o)),new NM(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=si(e.commitTime);return this.listener.Cr(r,t)}return Et(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=UE(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Tb(this.k,r))};this.gr(t)}}class FO extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=r,this.k=o,this.$r=!1}Or(){if(this.$r)throw new Re(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,r){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.ir.Bi(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(ae.UNKNOWN,o.toString())})}ji(e,t,r){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.ir.ji(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(ae.UNKNOWN,o.toString())})}terminate(){this.$r=!0}}class LO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}Br(){0===this.Mr&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Mr=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Dn(t),this.Lr=!1):Le("OnlineStateTracker",t)}jr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class VO{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=u,this.Hr.Ei(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var E;kh(d)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,ye.Z)(function*(D){const M=je(D);M.Gr.add(4),yield Iy(M),M.Jr.set("Unknown"),M.Gr.delete(4),yield qE(M)}),function(D){return E.apply(this,arguments)})(d))}))}),this.Jr=new LO(r,o)}}function qE(n){return uA.apply(this,arguments)}function uA(){return uA=(0,ye.Z)(function*(n){if(kh(n))for(const e of n.zr)yield e(!0)}),uA.apply(this,arguments)}function Iy(n){return lA.apply(this,arguments)}function lA(){return lA=(0,ye.Z)(function*(n){for(const e of n.zr)yield e(!1)}),lA.apply(this,arguments)}function xb(n,e){const t=je(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),hA(t)?dA(t):Ay(t).lr()&&cA(t,e))}function zE(n,e){const t=je(n),r=Ay(t);t.Wr.delete(e),r.lr()&&xR(t,e),0===t.Wr.size&&(r.lr()?r._r():kh(t)&&t.Jr.set("Unknown"))}function cA(n,e){n.Yr.X(e.targetId),Ay(n).Pr(e)}function xR(n,e){n.Yr.X(e),Ay(n).vr(e)}function dA(n){n.Yr=new Lx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),Ay(n).start(),n.Jr.Br()}function hA(n){return kh(n)&&!Ay(n).hr()&&n.Wr.size>0}function kh(n){return 0===je(n).Gr.size}function OR(n){n.Yr=void 0}function UO(n){return fA.apply(this,arguments)}function fA(){return fA=(0,ye.Z)(function*(n){n.Wr.forEach((e,t)=>{cA(n,e)})}),fA.apply(this,arguments)}function BO(n,e){return pA.apply(this,arguments)}function pA(){return pA=(0,ye.Z)(function*(n,e){OR(n),hA(n)?(n.Jr.Kr(e),dA(n)):n.Jr.set("Unknown")}),pA.apply(this,arguments)}function jO(n,e,t){return gA.apply(this,arguments)}function gA(){return gA=(0,ye.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof hy&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.Wr.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.Wr.delete(m),o.Yr.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ob(n,r)}else if(e instanceof Mh?n.Yr.ot(e):e instanceof dy?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual(St.min()))try{const r=yield TR(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.Yr.gt(u);return d.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const D=o.Wr.get(E);D&&o.Wr.set(E,D.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const E=o.Wr.get(m);if(!E)return;o.Wr.set(m,E.withResumeToken(fn.EMPTY_BYTE_STRING,E.snapshotVersion)),xR(o,m);const D=new Nh(E.target,m,1,E.sequenceNumber);cA(o,D)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield Ob(n,r)}var r}),gA.apply(this,arguments)}function Ob(n,e,t){return mA.apply(this,arguments)}function mA(){return mA=(0,ye.Z)(function*(n,e,t){if(!Bp(e))throw e;n.Gr.add(1),yield Iy(n),n.Jr.set("Offline"),t||(t=()=>TR(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield qE(n)}))}),mA.apply(this,arguments)}function PR(n,e){return e().catch(t=>Ob(n,t,e))}function Cy(n){return yA.apply(this,arguments)}function yA(){return yA=(0,ye.Z)(function*(n){const e=je(n),t=Fh(e);let r=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;$O(e);)try{const o=yield vO(e.localStore,r);if(null===o){0===e.Qr.length&&t._r();break}r=o.batchId,HO(e,o)}catch(o){yield Ob(e,o)}kR(e)&&FR(e)}),yA.apply(this,arguments)}function $O(n){return kh(n)&&n.Qr.length<10}function HO(n,e){n.Qr.push(e);const t=Fh(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function kR(n){return kh(n)&&!Fh(n).hr()&&n.Qr.length>0}function FR(n){Fh(n).start()}function GO(n){return _A.apply(this,arguments)}function _A(){return _A=(0,ye.Z)(function*(n){Fh(n).kr()}),_A.apply(this,arguments)}function qO(n){return vA.apply(this,arguments)}function vA(){return vA=(0,ye.Z)(function*(n){const e=Fh(n);for(const t of n.Qr)e.Dr(t.mutations)}),vA.apply(this,arguments)}function zO(n,e,t){return EA.apply(this,arguments)}function EA(){return EA=(0,ye.Z)(function*(n,e,t){const r=n.Qr.shift(),o=UC.from(r,e,t);yield PR(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Cy(n)}),EA.apply(this,arguments)}function WO(n,e){return wA.apply(this,arguments)}function wA(){return wA=(0,ye.Z)(function*(n,e){var t;e&&Fh(n).Sr&&(yield(t=(0,ye.Z)(function*(r,o){if(k(u=o.code)&&u!==ae.ABORTED){const d=r.Qr.shift();Fh(r).wr(),yield PR(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Cy(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),kR(n)&&FR(n)}),wA.apply(this,arguments)}function LR(n,e){return TA.apply(this,arguments)}function TA(){return TA=(0,ye.Z)(function*(n,e){const t=je(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=kh(t);t.Gr.add(3),yield Iy(t),r&&t.Jr.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Gr.delete(3),yield qE(t)}),TA.apply(this,arguments)}function bA(n,e){return DA.apply(this,arguments)}function DA(){return DA=(0,ye.Z)(function*(n,e){const t=je(n);e?(t.Gr.delete(2),yield qE(t)):e||(t.Gr.add(2),yield Iy(t),t.Jr.set("Unknown"))}),DA.apply(this,arguments)}function Ay(n){return n.Xr||(n.Xr=function(e,t,r){const o=je(e);return o.Or(),new PO(t,o.ir,o.authCredentials,o.appCheckCredentials,o.k,r)}(n.datastore,n.asyncQueue,{Di:UO.bind(null,n),Ni:BO.bind(null,n),br:jO.bind(null,n)}),n.zr.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Xr.wr(),hA(n)?dA(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),OR(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function Fh(n){return n.Zr||(n.Zr=function(e,t,r){const o=je(e);return o.Or(),new kO(t,o.ir,o.authCredentials,o.appCheckCredentials,o.k,r)}(n.datastore,n.asyncQueue,{Di:GO.bind(null,n),Ni:WO.bind(null,n),Nr:qO.bind(null,n),Cr:zO.bind(null,n)}),n.zr.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Zr.wr(),yield Cy(n)):(yield n.Zr.stop(),n.Qr.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class IA{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new IA(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sy(n,e){if(Dn("AsyncQueue",`${e}: ${n}`),Bp(n))return new Re(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class My{constructor(e){this.comparator=e?(t,r)=>e(t,r)||rt.comparator(t.key,r.key):(t,r)=>rt.comparator(t.key,r.key),this.keyedMap=Jt(),this.sortedSet=new W(this.comparator)}static emptySet(e){return new My(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof My)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new My;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class VR{constructor(){this.eo=new W(rt.comparator)}track(e){const t=e.doc.key,r=this.eo.get(t);r?0!==e.type&&3===r.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==r.type?this.eo=this.eo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.eo=this.eo.remove(t):1===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):lt():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ry{constructor(e,t,r,o,u,d,m,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Ry(e,t,My.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class KO{constructor(){this.so=void 0,this.listeners=[]}}class ZO{constructor(){this.queries=new Ty(e=>gb(e),Dh),this.onlineState="Unknown",this.io=new Set}}function CA(n,e){return AA.apply(this,arguments)}function AA(){return AA=(0,ye.Z)(function*(n,e){const t=je(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new KO),o)try{u.so=yield t.onListen(r)}catch(d){const m=Sy(d,`Initialization of query '${xE(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.ro(t.onlineState),u.so&&e.oo(u.so)&&RA(t)}),AA.apply(this,arguments)}function SA(n,e){return MA.apply(this,arguments)}function MA(){return MA=(0,ye.Z)(function*(n,e){const t=je(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),MA.apply(this,arguments)}function YO(n,e){const t=je(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.oo(o)&&(r=!0);d.so=o}}r&&RA(t)}function QO(n,e,t){const r=je(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function RA(n){n.io.forEach(e=>{e.next()})}class NA{constructor(e,t,r){this.query=e,this.co=t,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}oo(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Ry(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.ao?this.ho(e)&&(this.co.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.co.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.ao&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=Ry.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.ao=!0,this.co.next(e)}}class JO{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class UR{constructor(e){this.k=e}Hn(e){return tl(this.k,e)}Jn(e){return e.metadata.exists?$M(this.k,e.document,!1):Rn.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return si(e)}}class XO{constructor(e,t,r){this.mo=e,this.localStore=t,this.k=r,this.queries=[],this.documents=[],this.progress=BR(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,r=new UR(this.k);for(const o of e)if(o.metadata.queries){const u=r.Hn(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||tn()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function wO(n,e,t,r){return XC.apply(this,arguments)}(e.localStore,new UR(e.k),e.documents,e.mo.id),r=e.po(e.documents);for(const o of e.queries)yield TO(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new gO(Object.assign({},e.progress),t)})()}}function BR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class jR{constructor(e){this.key=e}}class $R{constructor(e){this.key=e}}class HR{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=tn(),this.mutatedKeys=tn(),this.Ao=Lp(e),this.Ro=new My(this.Ao)}get bo(){return this.To}Po(e,t){const r=t?t.vo:new VR,o=t?t.Ro:this.Ro;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const E=AE(this.query)&&o.size===this.query.limit?o.last():null,D=Fp(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,x)=>{const V=o.get(M),q=Ih(this.query,x)?x:null,Z=!!V&&this.mutatedKeys.has(V.key),he=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Pe=!1;V&&q?V.data.isEqual(q.data)?Z!==he&&(r.track({type:3,doc:q}),Pe=!0):this.Vo(V,q)||(r.track({type:2,doc:q}),Pe=!0,(E&&this.Ao(q,E)>0||D&&this.Ao(q,D)<0)&&(m=!0)):!V&&q?(r.track({type:0,doc:q}),Pe=!0):V&&!q&&(r.track({type:1,doc:V}),Pe=!0,(E||D)&&(m=!0)),Pe&&(q?(d=d.add(q),u=he?u.add(M):u.delete(M)):(d=d.delete(M),u=u.delete(M)))}),AE(this.query)||Fp(this.query))for(;d.size>this.query.limit;){const M=AE(this.query)?d.last():d.first();d=d.delete(M.key),u=u.delete(M.key),r.track({type:1,doc:M})}return{Ro:d,vo:r,Bn:m,mutatedKeys:u}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const u=e.vo.no();u.sort((D,M)=>function(x,V){const q=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return q(x)-q(V)}(D.type,M.type)||this.Ao(D.doc,M.doc)),this.So(r);const d=t?this.Do():[],m=0===this.Io.size&&this.current?1:0,E=m!==this.Eo;return this.Eo=m,0!==u.length||E?{snapshot:new Ry(this.query,e.Ro,o,u,e.mutatedKeys,0===m,E,!1),Co:d}:{Co:d}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new VR,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=tn(),this.Ro.forEach(r=>{this.No(r.key)&&(this.Io=this.Io.add(r.key))});const t=[];return e.forEach(r=>{this.Io.has(r)||t.push(new $R(r))}),this.Io.forEach(r=>{e.has(r)||t.push(new jR(r))}),t}ko(e){this.To=e.zn,this.Io=tn();const t=this.Po(e.documents);return this.applyChanges(t,!0)}xo(){return Ry.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class eP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class tP{constructor(e){this.key=e,this.$o=!1}}class nP{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Oo={},this.Mo=new Ty(m=>gb(m),Dh),this.Fo=new Map,this.Lo=new Set,this.Bo=new W(rt.comparator),this.Uo=new Map,this.qo=new tA,this.Ko={},this.jo=new Map,this.Qo=$p.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function rP(n,e){return xA.apply(this,arguments)}function xA(){return xA=(0,ye.Z)(function*(n,e){const t=tS(n);let r,o;const u=t.Mo.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.xo();else{const d=yield by(t.localStore,_s(e)),m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield OA(t,e,r,"current"===m),t.isPrimaryClient&&xb(t.remoteStore,d)}return o}),xA.apply(this,arguments)}function OA(n,e,t,r){return PA.apply(this,arguments)}function PA(){return PA=(0,ye.Z)(function*(n,e,t,r){n.Go=(M,x,V)=>{return(q=(0,ye.Z)(function*(Z,he,Pe,ot){let yt=he.view.Po(Pe);yt.Bn&&(yt=yield Sb(Z.localStore,he.query,!1).then(({documents:un})=>he.view.Po(un,yt)));const Pt=ot&&ot.targetChanges.get(he.targetId),ct=he.view.applyChanges(yt,Z.isPrimaryClient,Pt);return GA(Z,he.targetId,ct.Co),ct.snapshot}),function(Z,he,Pe,ot){return q.apply(this,arguments)})(n,M,x,V);var q};const o=yield Sb(n.localStore,e,!0),u=new HR(e,o.zn),d=u.Po(o.documents),m=Cc.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=u.applyChanges(d,n.isPrimaryClient,m);GA(n,t,E.Co);const D=new eP(e,t,u);return n.Mo.set(e,D),n.Fo.has(t)?n.Fo.get(t).push(e):n.Fo.set(t,[e]),E.snapshot}),PA.apply(this,arguments)}function iP(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,ye.Z)(function*(n,e){const t=je(n),r=t.Mo.get(e),o=t.Fo.get(r.targetId);if(o.length>1)return t.Fo.set(r.targetId,o.filter(u=>!Dh(u,e))),void t.Mo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Dy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),zE(t.remoteStore,r.targetId),Ny(t,r.targetId)}).catch(Hp))):(Ny(t,r.targetId),yield Dy(t.localStore,r.targetId,!0))}),kA.apply(this,arguments)}function FA(){return FA=(0,ye.Z)(function*(n,e,t){const r=nS(n);try{const o=yield function(u,d){const m=je(u),E=Fr.now(),D=d.reduce((x,V)=>x.add(V.key),tn());let M;return m.persistence.runTransaction("Locally write mutations","readwrite",x=>m.Wn.vn(x,D).next(V=>{M=V;const q=[];for(const Z of d){const he=OM(Z,M.get(Z.key));null!=he&&q.push(new a(Z.key,he,fb(he.value.mapValue),Er.exists(!0)))}return m.An.addMutationBatch(x,E,q,d)})).then(x=>(x.applyToLocalDocumentSet(M),{batchId:x.batchId,changes:M}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let E=u.Ko[u.currentUser.toKey()];E||(E=new W(Tt)),E=E.insert(d,m),u.Ko[u.currentUser.toKey()]=E}(r,o.batchId,t),yield Mc(r,o.changes),yield Cy(r.remoteStore)}catch(o){const u=Sy(o,"Failed to persist write");t.reject(u)}}),FA.apply(this,arguments)}function GR(n,e){return LA.apply(this,arguments)}function LA(){return LA=(0,ye.Z)(function*(n,e){const t=je(n);try{const r=yield _O(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.Uo.get(u);d&&(Et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.$o=!0:o.modifiedDocuments.size>0?Et(d.$o):o.removedDocuments.size>0&&(Et(d.$o),d.$o=!1))}),yield Mc(t,r,e)}catch(r){yield Hp(r)}}),LA.apply(this,arguments)}function qR(n,e,t){const r=je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.Mo.forEach((u,d)=>{const m=d.view.ro(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=je(u);m.onlineState=d;let E=!1;m.queries.forEach((D,M)=>{for(const x of M.listeners)x.ro(d)&&(E=!0)}),E&&RA(m)}(r.eventManager,e),o.length&&r.Oo.br(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function oP(n,e,t){return VA.apply(this,arguments)}function VA(){return VA=(0,ye.Z)(function*(n,e,t){const r=je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Uo.get(e),u=o&&o.key;if(u){let d=new W(rt.comparator);d=d.insert(u,Rn.newNoDocument(u,St.min()));const m=tn().add(u),E=new Ic(St.min(),new Map,new xe(Tt),d,m);yield GR(r,E),r.Bo=r.Bo.remove(u),r.Uo.delete(e),qA(r)}else yield Dy(r.localStore,e,!1).then(()=>Ny(r,e,t)).catch(Hp)}),VA.apply(this,arguments)}function aP(n,e){return UA.apply(this,arguments)}function UA(){return UA=(0,ye.Z)(function*(n,e){const t=je(n),r=e.batch.batchId;try{const o=yield yO(t.localStore,e);HA(t,r,null),$A(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Mc(t,o)}catch(o){yield Hp(o)}}),UA.apply(this,arguments)}function uP(n,e,t){return BA.apply(this,arguments)}function BA(){return BA=(0,ye.Z)(function*(n,e,t){const r=je(n);try{const o=yield function(u,d){const m=je(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let D;return m.An.lookupMutationBatch(E,d).next(M=>(Et(null!==M),D=M.keys(),m.An.removeMutationBatch(E,M))).next(()=>m.An.performConsistencyCheck(E)).next(()=>m.Wn.vn(E,D))})}(r.localStore,e);HA(r,e,t),$A(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Mc(r,o)}catch(o){yield Hp(o)}}),BA.apply(this,arguments)}function jA(){return jA=(0,ye.Z)(function*(n,e){const t=je(n);kh(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=je(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.An.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.jo.get(r)||[];o.push(e),t.jo.set(r,o)}catch(r){const o=Sy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),jA.apply(this,arguments)}function $A(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function HA(n,e,t){const r=je(n);let o=r.Ko[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Ko[r.currentUser.toKey()]=o}}function Ny(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Fo.get(e))n.Mo.delete(r),t&&n.Oo.zo(r,t);n.Fo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(r=>{n.qo.containsKey(r)||zR(n,r)})}function zR(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(zE(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),qA(n))}function GA(n,e,t){for(const r of t)r instanceof jR?(n.qo.addReference(r.key,e),cP(n,r)):r instanceof $R?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.qo.removeReference(r.key,e),n.qo.containsKey(r.key)||zR(n,r.key)):lt()}function cP(n,e){const t=e.key,r=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.Lo.add(r),qA(n))}function qA(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new rt(Qt.fromString(e)),r=n.Qo.next();n.Uo.set(r,new tP(t)),n.Bo=n.Bo.insert(t,r),xb(n.remoteStore,new Nh(_s(kp(t.path)),r,2,ys.I))}}function Mc(n,e,t){return zA.apply(this,arguments)}function zA(){return zA=(0,ye.Z)(function*(n,e,t){const r=je(n),o=[],u=[],d=[];var m;r.Mo.isEmpty()||(r.Mo.forEach((m,E)=>{d.push(r.Go(E,e,t).then(D=>{if(D){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,D.fromCache?"not-current":"current"),o.push(D);const M=ZC.$n(E.targetId,D);u.push(M)}}))}),yield Promise.all(d),r.Oo.br(o),yield(m=(0,ye.Z)(function*(E,D){const M=je(E);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>Ne.forEach(D,V=>Ne.forEach(V.kn,q=>M.persistence.referenceDelegate.addReference(x,V.targetId,q)).next(()=>Ne.forEach(V.xn,q=>M.persistence.referenceDelegate.removeReference(x,V.targetId,q)))))}catch(x){if(!Bp(x))throw x;Le("LocalStore","Failed to update sequence numbers: "+x)}for(const x of D){const V=x.targetId;if(!x.fromCache){const q=M.qn.get(V),he=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);M.qn=M.qn.insert(V,he)}}}),function(E,D){return m.apply(this,arguments)})(r.localStore,u))}),zA.apply(this,arguments)}function dP(n,e){return WA.apply(this,arguments)}function WA(){return WA=(0,ye.Z)(function*(n,e){const t=je(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield wR(t.localStore,e);t.currentUser=e,(o=t).jo.forEach(d=>{d.forEach(m=>{m.reject(new Re(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.jo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Mc(t,r.Gn)}var o}),WA.apply(this,arguments)}function hP(n,e){const t=je(n),r=t.Uo.get(e);if(r&&r.$o)return tn().add(r.key);{let o=tn();const u=t.Fo.get(e);if(!u)return o;for(const d of u){const m=t.Mo.get(d);o=o.unionWith(m.view.bo)}return o}}function fP(n,e){return KA.apply(this,arguments)}function KA(){return KA=(0,ye.Z)(function*(n,e){const t=je(n),r=yield Sb(t.localStore,e.query,!0),o=e.view.ko(r);return t.isPrimaryClient&&GA(t,e.targetId,o.Co),o}),KA.apply(this,arguments)}function pP(n){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,ye.Z)(function*(n){const e=je(n);return IR(e.localStore).then(t=>Mc(e,t))}),ZA.apply(this,arguments)}function gP(n,e,t,r){return YA.apply(this,arguments)}function YA(){return YA=(0,ye.Z)(function*(n,e,t,r){const o=je(n),u=yield function(d,m){const E=je(d),D=je(E.An);return E.persistence.runTransaction("Lookup mutation documents","readonly",M=>D.Zt(M,m).next(x=>x?E.Wn.vn(M,x):Ne.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Cy(o.remoteStore):"acknowledged"===t||"rejected"===t?(HA(o,e,r||null),$A(o,e),m=e,je(je(o.localStore).An).ee(m)):lt(),yield Mc(o,u)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),YA.apply(this,arguments)}function QA(){return QA=(0,ye.Z)(function*(n,e){const t=je(n);if(tS(t),nS(t),!0===e&&!0!==t.Wo){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield WR(t,r.toArray());t.Wo=!0,yield bA(t.remoteStore,!0);for(const u of o)xb(t.remoteStore,u)}else if(!1===e&&!1!==t.Wo){const r=[];let o=Promise.resolve();t.Fo.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Ny(t,d),Dy(t.localStore,d,!0))),zE(t.remoteStore,d)}),yield o,yield WR(t,r),function(u){const d=je(u);d.Uo.forEach((m,E)=>{zE(d.remoteStore,E)}),d.qo.hs(),d.Uo=new Map,d.Bo=new W(rt.comparator)}(t),t.Wo=!1,yield bA(t.remoteStore,!1)}}),QA.apply(this,arguments)}function WR(n,e,t){return JA.apply(this,arguments)}function JA(){return JA=(0,ye.Z)(function*(n,e,t){const r=je(n),o=[],u=[];for(const d of e){let m;const E=r.Fo.get(d);if(E&&0!==E.length){m=yield by(r.localStore,_s(E[0]));for(const D of E){const M=r.Mo.get(D),x=yield fP(r,M);x.snapshot&&u.push(x.snapshot)}}else{const D=yield DR(r.localStore,d);m=yield by(r.localStore,D),yield OA(r,KR(D),d,!1)}o.push(m)}return r.Oo.br(u),o}),JA.apply(this,arguments)}function KR(n){return RC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function yP(n){const e=je(n);return je(je(e.localStore).persistence).Tn()}function _P(n,e,t,r){return XA.apply(this,arguments)}function XA(){return XA=(0,ye.Z)(function*(n,e,t,r){const o=je(n);if(o.Wo)Le("SyncEngine","Ignoring unexpected query state notification.");else if(o.Fo.has(e))switch(t){case"current":case"not-current":{const u=yield IR(o.localStore),d=Ic.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Mc(o,u,d);break}case"rejected":yield Dy(o.localStore,e,!0),Ny(o,e,r);break;default:lt()}}),XA.apply(this,arguments)}function vP(n,e,t){return eS.apply(this,arguments)}function eS(){return eS=(0,ye.Z)(function*(n,e,t){const r=tS(n);if(r.Wo){for(const o of e){if(r.Fo.has(o)){Le("SyncEngine","Adding an already active target "+o);continue}const u=yield DR(r.localStore,o),d=yield by(r.localStore,u);yield OA(r,KR(u),d.targetId,!1),xb(r.remoteStore,d)}for(const o of t)r.Fo.has(o)&&(yield Dy(r.localStore,o,!1).then(()=>{zE(r.remoteStore,o),Ny(r,o)}).catch(Hp))}}),eS.apply(this,arguments)}function tS(n){const e=je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oP.bind(null,e),e.Oo.br=YO.bind(null,e.eventManager),e.Oo.zo=QO.bind(null,e.eventManager),e}function nS(n){const e=je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uP.bind(null,e),e}class ZR{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.k=GE(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return ER(this.persistence,new vR,e.initialUser,this.k)}Yo(e){return new SO(nA.ks,this.k)}Jo(e){return new SR}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class YR extends ZR{constructor(e,t,r){super(),this.tc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield function EO(n){return JC.apply(this,arguments)}(r.localStore),yield r.tc.initialize(r,e),yield nS(r.tc.syncEngine),yield Cy(r.tc.remoteStore),yield r.persistence.sn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Zo(e){return ER(this.persistence,new vR,e.initialUser,this.k)}Xo(e){return new lO(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=KC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?$s.withCacheSize(this.cacheSizeBytes):$s.DEFAULT;return new WC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,RR(),Nb(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new SR}}class wP extends YR{constructor(e,t){super(e,t,!1),this.tc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const o=r.tc.syncEngine;r.sharedClientState instanceof oA&&(r.sharedClientState.syncEngine={mi:gP.bind(null,o),gi:_P.bind(null,o),yi:vP.bind(null,o),Tn:yP.bind(null,o),_i:pP.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.sn(function(){var u=(0,ye.Z)(function*(d){yield function mP(n,e){return QA.apply(this,arguments)}(r.tc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}Jo(e){const t=RR();if(!oA.Pt(t))throw new Re(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=KC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new oA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class rS{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>qR(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=dP.bind(null,r.syncEngine),yield bA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ZO}createDatastore(e){const t=GE(e.databaseInfo.databaseId),r=new OO(e.databaseInfo);return new FO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>qR(this.syncEngine,m,0),d=MR.Pt()?new MR:new RO,new VO(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,E,D){const M=new nP(r,o,u,d,m,E);return D&&(M.Wo=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=je(t);Le("RemoteStore","RemoteStore shutting down."),r.Gr.add(5),yield Iy(r),r.Hr.shutdown(),r.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function QR(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Pb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ec(this.observer.next,e)}error(e){this.observer.error?this.ec(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}nc(){this.muted=!0}ec(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class TP{constructor(e,t){this.sc=e,this.k=t,this.metadata=new vr,this.buffer=new Uint8Array,this.ic=new TextDecoder("utf-8"),this.rc().then(r=>{r&&r._o()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.sc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.rc()})()}rc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.oc();if(null===t)return null;const r=e.ic.decode(t),o=Number(r);isNaN(o)&&e.cc(`length string (${r}) is not valid number`);const u=yield e.ac(o);return new JO(JSON.parse(u),t.length+o)})()}uc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oc(){var e=this;return(0,ye.Z)(function*(){for(;e.uc()<0&&!(yield e.hc()););if(0===e.buffer.length)return null;const t=e.uc();t<0&&e.cc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ac(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.hc())&&t.cc("Reached the end of bundle when more is expected.");const r=t.ic.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}cc(e){throw this.sc.cancel(),new Error(`Invalid bundle format: ${e}`)}hc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.sc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class bP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ye.Z)(function*(u,d){const m=je(u),E=UE(m.k)+"/documents",D={documents:d.map(q=>VE(m.k,q))},M=yield m.ji("BatchGetDocuments",E,D),x=new Map;M.forEach(q=>{const Z=function $x(n,e){return"found"in e?function(t,r){Et(!!r.found);const o=tl(t,r.found.name),u=si(r.found.updateTime),d=new ii({mapValue:{fields:r.found.fields}});return Rn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){Et(!!r.missing),Et(!!r.readTime);const o=tl(t,r.missing),u=si(r.readTime);return Rn.newNoDocument(o,u)}(n,e):lt()}(m.k,q);x.set(Z.key.toString(),Z)});const V=[];return d.forEach(q=>{const Z=x.get(q.toString());Et(!!Z),V.push(Z)}),V}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new _(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=rt.fromPath(o);e.mutations.push(new w(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(o,u){const d=je(o),m=UE(d.k)+"/documents",E={writes:u.map(D=>Tb(d.k,D))};yield d.Bi("Commit",m,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=St.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Er.updateTime(t):Er.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(St.min()))throw new Re(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Er.updateTime(t)}return Er.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class DP{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.lc=5,this.ur=new aA(this.asyncQueue,"transaction_retry")}run(){this.lc-=1,this.fc()}fc(){var e=this;this.ur.Zi((0,ye.Z)(function*(){const t=new bP(e.datastore),r=e.dc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.wc(u)}))}).catch(o=>{e.wc(o)})}))}dc(e){try{const t=this.updateFunction(e);return!_c(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wc(e){this.lc>0&&this._c(e)?(this.lc-=1,this.asyncQueue.enqueueAndForget(()=>(this.fc(),Promise.resolve()))):this.deferred.reject(e)}_c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!k(t)}return!1}}class IP{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=ri.UNAUTHENTICATED,this.clientId=lb.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ye.Z)(function*(m){Le("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Le("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Sy(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function JR(n,e){return iS.apply(this,arguments)}function iS(){return iS=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ye.Z)(function*(u){r.isEqual(u)||(yield wR(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),iS.apply(this,arguments)}function XR(n,e){return sS.apply(this,arguments)}function sS(){return sS=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield oS(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>LR(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>LR(e.remoteStore,u)),n.onlineComponents=e}),sS.apply(this,arguments)}function oS(n){return aS.apply(this,arguments)}function aS(){return aS=(0,ye.Z)(function*(n){return n.offlineComponents||(Le("FirestoreClient","Using default OfflineComponentProvider"),yield JR(n,new ZR)),n.offlineComponents}),aS.apply(this,arguments)}function kb(n){return uS.apply(this,arguments)}function uS(){return uS=(0,ye.Z)(function*(n){return n.onlineComponents||(Le("FirestoreClient","Using default OnlineComponentProvider"),yield XR(n,new rS)),n.onlineComponents}),uS.apply(this,arguments)}function eN(n){return oS(n).then(e=>e.persistence)}function lS(n){return oS(n).then(e=>e.localStore)}function tN(n){return kb(n).then(e=>e.remoteStore)}function cS(n){return kb(n).then(e=>e.syncEngine)}function xy(n){return dS.apply(this,arguments)}function dS(){return dS=(0,ye.Z)(function*(n){const e=yield kb(n),t=e.eventManager;return t.onListen=rP.bind(null,e.syncEngine),t.onUnlisten=iP.bind(null,e.syncEngine),t}),dS.apply(this,arguments)}function nN(n,e,t={}){const r=new vr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,m,E){const D=new Pb({next:x=>{u.enqueueAndForget(()=>SA(o,M));const V=x.docs.has(d);!V&&x.fromCache?E.reject(new Re(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&x.fromCache&&m&&"server"===m.source?E.reject(new Re(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(x)},error:x=>E.reject(x)}),M=new NA(kp(d.path),D,{includeMetadataChanges:!0,wo:!0});return CA(o,M)}(yield xy(n),n.asyncQueue,e,t,r)})),r.promise}function rN(n,e,t={}){const r=new vr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,m,E){const D=new Pb({next:x=>{u.enqueueAndForget(()=>SA(o,M)),x.fromCache&&"server"===m.source?E.reject(new Re(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(x)},error:x=>E.reject(x)}),M=new NA(d,D,{includeMetadataChanges:!0,wo:!0});return CA(o,M)}(yield xy(n),n.asyncQueue,e,t,r)})),r.promise}class PP{constructor(e,t,r,o,u,d,m,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=E}}class Oy{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Oy&&e.projectId===this.projectId&&e.database===this.database}}const iN=new Map;function hS(n,e,t){if(!t)throw new Re(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sN(n,e,t,r){if(!0===e&&!0===r)throw new Re(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oN(n){if(!rt.isDocumentKey(n))throw new Re(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aN(n){if(rt.isDocumentKey(n))throw new Re(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Fb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function Zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fb(n);throw new Re(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function uN(n,e){if(e<=0)throw new Re(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class lN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,sN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class WE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lN({}),this._settingsFrozen=!1,e instanceof Oy?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Re(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oy(o.options.projectId)}(e))}get app(){if(!this._app)throw new Re(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ub;switch(t.type){case"gapi":const r=t.client;return Et(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new EC(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=iN.get(e);t&&(Le("ComponentProvider","Removing Datastore"),iN.delete(e),t.terminate())}(this),Promise.resolve()}}class Fn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fn(this.firestore,e,this._key)}}class zi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}}class rl extends zi{constructor(e,t,r){super(e,t,kp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fn(this.firestore,null,new rt(e))}withConverter(e){return new rl(this.firestore,e,this._path)}}function cN(n,e,...t){if(n=(0,Lt.m9)(n),hS("collection","path",e),n instanceof WE){const r=Qt.fromString(e,...t);return aN(r),new rl(n,null,r)}{if(!(n instanceof Fn||n instanceof rl))throw new Re(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return aN(r),new rl(n.firestore,null,r)}}function Lb(n,e,...t){if(n=(0,Lt.m9)(n),1===arguments.length&&(e=lb.A()),hS("doc","path",e),n instanceof WE){const r=Qt.fromString(e,...t);return oN(r),new Fn(n,null,new rt(r))}{if(!(n instanceof Fn||n instanceof rl))throw new Re(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return oN(r),new Fn(n.firestore,n instanceof rl?n.converter:null,new rt(r))}}function dN(n,e){return n=(0,Lt.m9)(n),e=(0,Lt.m9)(e),(n instanceof Fn||n instanceof rl)&&(e instanceof Fn||e instanceof rl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function hN(n,e){return n=(0,Lt.m9)(n),e=(0,Lt.m9)(e),n instanceof zi&&e instanceof zi&&n.firestore===e.firestore&&Dh(n._query,e._query)&&n.converter===e.converter}class LP{constructor(){this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new aA(this,"async_queue_retry"),this.bc=()=>{const t=Nb();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=Nb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}get isShuttingDown(){return this.yc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pc(),this.vc(e)}enterRestrictedMode(e){if(!this.yc){this.yc=!0,this.Ac=e||!1;const t=Nb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}}enqueue(e){if(this.Pc(),this.yc)return new Promise(()=>{});const t=new vr;return this.vc(()=>this.yc&&this.Ac?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.gc.push(e),this.Vc()))}Vc(){var e=this;return(0,ye.Z)(function*(){if(0!==e.gc.length){try{yield e.gc[0](),e.gc.shift(),e.ur.reset()}catch(t){if(!Bp(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.gc.length>0&&e.ur.Zi(()=>e.Vc())}})()}vc(e){const t=this.mc.then(()=>(this.Ic=!0,e().catch(r=>{throw this.Ec=r,this.Ic=!1,Dn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Ic=!1,r))));return this.mc=t,t}enqueueAfterDelay(e,t,r){this.Pc(),this.Rc.indexOf(e)>-1&&(t=0);const o=IA.createAndSchedule(this,e,t,r,u=>this.Sc(u));return this.Tc.push(o),o}Pc(){this.Ec&&lt()}verifyOperationInProgress(){}Dc(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.mc,yield t}while(t!==e.mc)})()}Cc(e){for(const t of this.Tc)if(t.timerId===e)return!0;return!1}Nc(e){return this.Dc().then(()=>{this.Tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Dc()})}kc(e){this.Rc.push(e)}Sc(e){const t=this.Tc.indexOf(e);this.Tc.splice(t,1)}}function fS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class VP{constructor(){this._progressObserver={},this._taskCompletionResolver=new vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wn extends WE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new LP,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||fN(this),this._firestoreClient.terminate()}}function Vr(n){return n._firestoreClient||fN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function fN(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new PP(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new IP(n._authCredentials,n._appCheckCredentials,n._queue,r)}function pN(n,e,t){const r=new vr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield JR(n,t),yield XR(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ae.FAILED_PRECONDITION||u.code===ae.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function gN(n){if(n._initialized||n._terminated)throw new Re(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Rc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new il(fn.fromBase64String(e))}catch(t){throw new Re(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new il(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gp{constructor(e){this._methodName=e}}class Vb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}const KP=/^__.*__$/;class ZP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new a(e,this.data,this.fieldMask,t,this.fieldTransforms):new s(e,this.data,t,this.fieldTransforms)}}class mN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new a(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class Ub{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.k=r,this.ignoreUndefinedProperties=o,void 0===u&&this.xc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get $c(){return this.settings.$c}Oc(e){return new Ub(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Oc({path:r,Fc:!1});return o.Lc(e),o}Bc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Oc({path:r,Fc:!1});return o.xc(),o}Uc(e){return this.Oc({path:void 0,Fc:!0})}qc(e){return $b(e,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lc(this.path.get(e))}Lc(e){if(0===e.length)throw this.qc("Document fields must not be empty");if(yN(this.$c)&&KP.test(e))throw this.qc('Document fields cannot begin and end with "__"')}}class YP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=r||GE(e)}Qc(e,t,r,o=!1){return new Ub({$c:e,methodName:t,jc:r,path:Qr.emptyPath(),Fc:!1,Kc:o},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function qp(n){const e=n._freezeSettings(),t=GE(n._databaseId);return new YP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Bb(n,e,t,r,o,u={}){const d=n.Qc(u.merge||u.mergeFields?2:0,e,t,o);yS("Data must be an object, but it was:",d,r);const m=EN(r,d);let E,D;if(u.merge)E=new vh(d.fieldMask),D=d.fieldTransforms;else if(u.mergeFields){const M=[];for(const x of u.mergeFields){const V=_S(e,x,t);if(!d.contains(V))throw new Re(ae.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);TN(M,V)||M.push(V)}E=new vh(M),D=d.fieldTransforms.filter(x=>E.covers(x.field))}else E=null,D=d.fieldTransforms;return new ZP(new ii(m),E,D)}class KE extends Gp{_toFieldTransform(e){if(2!==e.$c)throw e.qc(1===e.$c?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof KE}}function _N(n,e,t){return new Ub({$c:3,jc:e.settings.jc,methodName:n._methodName,Fc:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class pS extends Gp{_toFieldTransform(e){return new ly(e.path,new Ch)}isEqual(e){return e instanceof pS}}class QP extends Gp{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=_N(this,e,!0),r=this.Wc.map(u=>zp(u,t)),o=new bc(r);return new ly(e.path,o)}isEqual(e){return this===e}}class JP extends Gp{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=_N(this,e,!0),r=this.Wc.map(u=>zp(u,t)),o=new Dc(r);return new ly(e.path,o)}isEqual(e){return this===e}}class XP extends Gp{constructor(e,t){super(e),this.Gc=t}_toFieldTransform(e){const t=new Ah(e.k,mb(e.k,this.Gc));return new ly(e.path,t)}isEqual(e){return this===e}}function gS(n,e,t,r){const o=n.Qc(1,e,t);yS("Data must be an object, but it was:",o,r);const u=[],d=ii.empty();Ju(r,(E,D)=>{const M=jb(e,E,t);D=(0,Lt.m9)(D);const x=o.Bc(M);if(D instanceof KE)u.push(M);else{const V=zp(D,x);null!=V&&(u.push(M),d.set(M,V))}});const m=new vh(u);return new mN(d,m,o.fieldTransforms)}function mS(n,e,t,r,o,u){const d=n.Qc(1,e,t),m=[_S(e,r,t)],E=[o];if(u.length%2!=0)throw new Re(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(_S(e,u[V])),E.push(u[V+1]);const D=[],M=ii.empty();for(let V=m.length-1;V>=0;--V)if(!TN(D,m[V])){const q=m[V];let Z=E[V];Z=(0,Lt.m9)(Z);const he=d.Bc(q);if(Z instanceof KE)D.push(q);else{const Pe=zp(Z,he);null!=Pe&&(D.push(q),M.set(q,Pe))}}const x=new vh(D);return new mN(M,x,d.fieldTransforms)}function vN(n,e,t,r=!1){return zp(t,n.Qc(r?4:3,e))}function zp(n,e){if(wN(n=(0,Lt.m9)(n)))return yS("Unsupported field value:",e,n),EN(n,e);if(n instanceof Gp)return function(t,r){if(!yN(r.$c))throw r.qc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.qc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Fc&&4!==e.$c)throw e.qc("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=zp(d,r.Uc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Lt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return mb(r.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Fr.fromDate(t);return{timestampValue:LE(r.k,o)}}if(t instanceof Fr){const o=new Fr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:LE(r.k,o)}}if(t instanceof Vb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof il)return{bytesValue:LM(r.k,t._byteString)};if(t instanceof Fn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.qc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:kC(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.qc(`Unsupported field value: ${Fb(t)}`)}(n,e)}function EN(n,e){const t={};return pE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ju(n,(r,o)=>{const u=zp(o,e.Mc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function wN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Fr||n instanceof Vb||n instanceof il||n instanceof Fn||n instanceof Gp)}function yS(n,e,t){if(!wN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Fb(t);throw e.qc("an object"===r?n+" a custom object":n+" "+r)}var r}function _S(n,e,t){if((e=(0,Lt.m9)(e))instanceof Rc)return e._internalPath;if("string"==typeof e)return jb(n,e);throw $b("Field path arguments must be of type string or ",n,!1,void 0,t)}const ek=new RegExp("[~\\*/\\[\\]]");function jb(n,e,t){if(e.search(ek)>=0)throw $b(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Rc(...e.split("."))._internalPath}catch(r){throw $b(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $b(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(u||d)&&(E+=" (found",u&&(E+=` in field ${r}`),d&&(E+=` in document ${o}`),E+=")"),new Re(ae.INVALID_ARGUMENT,m+n+E)}function TN(n,e){return n.some(t=>t.isEqual(e))}class ZE{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new tk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class tk extends ZE{data(){return super.data()}}function Hb(n,e){return"string"==typeof e?jb(n,e):e instanceof Rc?e._internalPath:e._delegate._internalPath}class Wp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nc extends ZE{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new YE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Hb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class YE extends Nc{data(e={}){return super.data(e)}}class Lh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Wp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new YE(this._firestore,this._userDataWriter,r.key,r,new Wp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new YE(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Wp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new YE(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Wp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,D=-1;return 0!==d.type&&(E=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),D=u.indexOf(d.doc.key)),{type:nk(d.type),doc:m,oldIndex:E,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function nk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function bN(n,e){return n instanceof Nc&&e instanceof Nc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Lh&&e instanceof Lh&&n._firestore===e._firestore&&hN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function DN(n){if(Fp(n)&&0===n.explicitOrderBy.length)throw new Re(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class QE{}function Vh(n,...e){for(const t of e)n=t._apply(n);return n}class rk extends QE{constructor(e,t,r){super(),this.zc=e,this.Hc=t,this.Jc=r,this.type="where"}_apply(e){const t=qp(e.firestore),r=function(o,u,d,m,E,D,M){let x;if(E.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Re(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){RN(M,D);const q=[];for(const Z of M)q.push(MN(m,o,Z));x={arrayValue:{values:q}}}else x=MN(m,o,M)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||RN(M,D),x=vN(d,"where",M,"in"===D||"not-in"===D);const V=Lr.create(E,D,x);return function(q,Z){if(Z.V()){const Pe=ME(q);if(null!==Pe&&!Pe.isEqual(Z.field))throw new Re(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Pe.toString()}' and '${Z.field.toString()}'`);const ot=SE(q);null!==ot&&NN(0,Z.field,ot)}const he=function(Pe,ot){for(const yt of Pe.filters)if(ot.indexOf(yt.op)>=0)return yt.op;return null}(q,function(Pe){switch(Pe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==he)throw new Re(ae.INVALID_ARGUMENT,he===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${he.toString()}' filters.`)}(o,V),V}(e._query,0,t,e.firestore._databaseId,this.zc,this.Hc,this.Jc);return new zi(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new Xu(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class sk extends QE{constructor(e,t){super(),this.zc=e,this.Yc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Re(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Tc(o,u);return function(m,E){if(null===SE(m)){const D=ME(m);null!==D&&NN(0,D,E.field)}}(r,d),d}(e._query,this.zc,this.Yc);return new zi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Xu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class IN extends QE{constructor(e,t,r){super(),this.type=e,this.Xc=t,this.Zc=r}_apply(e){return new zi(e.firestore,e.converter,NE(e._query,this.Xc,this.Zc))}}class CN extends QE{constructor(e,t,r){super(),this.type=e,this.ta=t,this.ea=r}_apply(e){const t=SN(e,this.type,this.ta,this.ea);return new zi(e.firestore,e.converter,(o=t,new Xu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class AN extends QE{constructor(e,t,r){super(),this.type=e,this.ta=t,this.ea=r}_apply(e){const t=SN(e,this.type,this.ta,this.ea);return new zi(e.firestore,e.converter,(o=t,new Xu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function SN(n,e,t,r){if(t[0]=(0,Lt.m9)(t[0]),t[0]instanceof ZE)return function(o,u,d,m,E){if(!m)throw new Re(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const D=[];for(const M of bh(o))if(M.field.isKeyField())D.push(Op(u,m.key));else{const x=m.data.field(M.field);if(mE(x))throw new Re(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const V=M.field.canonicalString();throw new Re(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}D.push(x)}return new wc(D,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=qp(n.firestore);return function(u,d,m,E,D,M){const x=u.explicitOrderBy;if(D.length>x.length)throw new Re(ae.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let q=0;q<D.length;q++){const Z=D[q];if(x[q].field.isKeyField()){if("string"!=typeof Z)throw new Re(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof Z}`);if(!RE(u)&&-1!==Z.indexOf("/"))throw new Re(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${Z}' contains a slash.`);const he=u.path.child(Qt.fromString(Z));if(!rt.isDocumentKey(he))throw new Re(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${he}' is not because it contains an odd number of segments.`);const Pe=new rt(he);V.push(Op(d,Pe))}else{const he=vN(m,E,Z);V.push(he)}}return new wc(V,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function MN(n,e,t){if("string"==typeof(t=(0,Lt.m9)(t))){if(""===t)throw new Re(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RE(e)&&-1!==t.indexOf("/"))throw new Re(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!rt.isDocumentKey(r))throw new Re(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Op(n,new rt(r))}if(t instanceof Fn)return Op(n,t._key);throw new Re(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fb(t)}.`)}function RN(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function NN(n,e,t){if(!t.isEqual(e))throw new Re(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class vS{convertValue(e,t="none"){switch(vc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const r={};return Ju(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Vb(cr(e.latitude),cr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=db(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Eh(e));default:return null}}convertTimestamp(e){const t=mc(e);return new Fr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);Et(YM(r));const o=new Oy(r.get(1),r.get(3)),u=new rt(r.popFirst(5));return o.isEqual(t)||Dn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Gb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class fk extends vS{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}class xN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qp(e)}set(e,t,r){this._verifyNotCommitted();const o=Uh(e,this._firestore),u=Gb(o.converter,t,r),d=Bb(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Er.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Uh(e,this._firestore);let d;return d="string"==typeof(t=(0,Lt.m9)(t))||t instanceof Rc?mS(this._dataReader,"WriteBatch.update",u._key,t,r,o):gS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Er.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Uh(e,this._firestore);return this._mutations=this._mutations.concat(new _(t._key,Er.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Uh(n,e){if((n=(0,Lt.m9)(n)).firestore!==e)throw new Re(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Kp extends vS{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}function ON(n,e,t){n=Zt(n,Fn);const r=Zt(n.firestore,Wn),o=Gb(n.converter,e,t);return Py(r,[Bb(qp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Er.none())])}function PN(n,e,t,...r){n=Zt(n,Fn);const o=Zt(n.firestore,Wn),u=qp(o);let d;return d="string"==typeof(e=(0,Lt.m9)(e))||e instanceof Rc?mS(u,"updateDoc",n._key,e,t,r):gS(u,"updateDoc",n._key,e),Py(o,[d.toMutation(n._key,Er.exists(!0))])}function kN(n,...e){var t,r,o;n=(0,Lt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||fS(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(fS(e[d])){const x=e[d];e[d]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[d+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[d+2]=null===(o=x.complete)||void 0===o?void 0:o.bind(x)}let E,D,M;if(n instanceof Fn)D=Zt(n.firestore,Wn),M=kp(n._key.path),E={next:x=>{e[d]&&e[d](ES(D,n,x))},error:e[d+1],complete:e[d+2]};else{const x=Zt(n,zi);D=Zt(x.firestore,Wn),M=x._query;const V=new Kp(D);E={next:q=>{e[d]&&e[d](new Lh(D,V,x,q))},error:e[d+1],complete:e[d+2]},DN(n._query)}return function(x,V,q,Z){const he=new Pb(Z),Pe=new NA(V,he,q);return x.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return CA(yield xy(x),Pe)})),()=>{he.nc(),x.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return SA(yield xy(x),Pe)}))}}(Vr(D),M,m,E)}function Py(n,e){return function(t,r){const o=new vr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function sP(n,e,t){return FA.apply(this,arguments)}(yield cS(t),r,o)})),o.promise}(Vr(n),e)}function ES(n,e,t){const r=t.docs.get(e._key),o=new Kp(n);return new Nc(n,o,e._key,r,new Wp(t.hasPendingWrites,t.fromCache),e.converter)}class bk extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qp(e)}get(e){const t=Uh(e,this._firestore),r=new fk(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return lt();const u=o[0];if(u.isFoundDocument())return new ZE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new ZE(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const o=Uh(e,this._firestore),u=Gb(o.converter,t,r),d=Bb(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Uh(e,this._firestore);let d;return d="string"==typeof(t=(0,Lt.m9)(t))||t instanceof Rc?mS(this._dataReader,"Transaction.update",u._key,t,r,o):gS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Uh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Uh(e,this._firestore),r=new Kp(this._firestore);return super.get(e).then(o=>new Nc(this._firestore,r,t._key,o._document,new Wp(!1,!1),t.converter))}}function TS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function LN(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function VN(){if(!function gE(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Rp=qu.SDK_VERSION,(0,qu._registerComponent)(new Tm.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Wn(o,new DM(t.getProvider("auth-internal")),new wC(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,qu.registerVersion)(vC,"3.4.4",n),(0,qu.registerVersion)(vC,"3.4.4","esm2017")}();class JE{constructor(e){this._delegate=e}static fromBase64String(e){return VN(),new JE(il.fromBase64String(e))}static fromUint8Array(e){return LN(),new JE(il.fromUint8Array(e))}toBase64(){return VN(),this._delegate.toBase64()}toUint8Array(){return LN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function bS(n){return function xk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Ok{enableIndexedDbPersistence(e,t){return function BP(n,e){gN(n=Zt(n,Wn));const t=Vr(n),r=n._freezeSettings(),o=new rS;return pN(t,o,new YR(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function jP(n){gN(n=Zt(n,Wn));const e=Vr(n),t=n._freezeSettings(),r=new rS;return pN(e,r,new wP(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function $P(n){if(n._initialized&&!n._terminated)throw new Re(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!nu.Pt())return Promise.resolve();const o=r+"main";yield nu.delete(o)}),function(r){return t.apply(this,arguments)})(KC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class UN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Oy||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&yh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function kP(n,e,t,r={}){var o;const u=(n=Zt(n,WE))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&yh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=ri.MOCK_USER;else{d=(0,Lt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Re(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ri(E)}n._authCredentials=new bM(new Np(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function GP(n){return function CP(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield eN(n),t=yield tN(n);return e.setNetworkEnabled(!0),function(r){const o=je(r);return o.Gr.delete(0),qE(o)}(t)}))}(Vr(n=Zt(n,Wn)))}(this._delegate)}disableNetwork(){return function qP(n){return function AP(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield eN(n),t=yield tN(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(o){const u=je(o);u.Gr.add(0),yield Iy(u),u.Jr.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Vr(n=Zt(n,Wn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,sN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function HP(n){return function(e){const t=new vr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function lP(n,e){return jA.apply(this,arguments)}(yield cS(e),t)})),t.promise}(Vr(n=Zt(n,Wn)))}(this._delegate)}onSnapshotsInSync(e){return function Tk(n,e){return function RP(n,e){const t=new Pb(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield xy(n),o=t,je(r).io.add(o),void o.next();var r,o})),()=>{t.nc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield xy(n),o=t,void je(r).io.delete(o);var r,o}))}}(Vr(n=Zt(n,Wn)),fS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ky(this,cN(this._delegate,e))}catch(t){throw Es(t,"collection()","Firestore.collection()")}}doc(e){try{return new ha(this,Lb(this._delegate,e))}catch(t){throw Es(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ws(this,function FP(n,e){if(n=Zt(n,WE),hS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zi(n,null,(t=e,new Xu(Qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Es(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Dk(n,e){return function NP(n,e){const t=new vr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const r=yield(o=n,kb(o).then(u=>u.datastore));var o;new DP(n.asyncQueue,r,e,t).run()})),t.promise}(Vr(n=Zt(n,Wn)),t=>e(new bk(n,t)))}(this._delegate,t=>e(new BN(this,t)))}batch(){return Vr(this._delegate),new jN(new xN(this._delegate,e=>Py(this._delegate,e)))}loadBundle(e){return function zP(n,e){const t=Vr(n=Zt(n,Wn)),r=new VP;return function xP(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,E=function(E,D){if(E instanceof Uint8Array)return QR(E,D);if(E instanceof ArrayBuffer)return QR(new Uint8Array(E),D);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new TP(E,d);var E}(t,GE(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function EP(n,e,t){const r=je(n);var o;(o=(0,ye.Z)(function*(u,d,m){try{const E=yield d.getMetadata();if(yield function(V,q){const Z=je(V),he=si(q.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",Pe=>Z.Ye.getBundleMetadata(Pe,q.id)).then(Pe=>!!Pe&&Pe.createTime.compareTo(he)>=0)}(u.localStore,E))return yield d.close(),void m._completeWith((V=E,{taskState:"Success",documentsLoaded:V.totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}));m._updateProgress(BR(E));const D=new XO(E,u.localStore,d.k);let M=yield d.Ho();for(;M;){const V=yield D.yo(M);V&&m._updateProgress(V),M=yield d.Ho()}const x=yield D.complete();yield Mc(u,x.In,void 0),yield function(V,q){const Z=je(V);return Z.persistence.runTransaction("Save bundle","readwrite",he=>Z.Ye.saveBundleMetadata(he,q))}(u.localStore,E),m._completeWith(x.progress)}catch(E){yh("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E)}var V}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield cS(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function WP(n,e){return function OP(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const o=je(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ye.getNamedQuery(u,r))}(yield lS(n),e)}))}(Vr(n=Zt(n,Wn)),e).then(t=>t?new zi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ws(this,t):null)}}class qb extends vS{constructor(e){super(),this.firestore=e}convertBytes(e){return new JE(new il(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ha.forKey(t,this.firestore,null)}}class BN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new qb(e)}get(e){const t=Yp(e);return this._delegate.get(t).then(r=>new XE(this._firestore,new Nc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Yp(e);return r?(TS("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Yp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Yp(e);return this._delegate.delete(t),this}}class jN{constructor(e){this._delegate=e}set(e,t,r){const o=Yp(e);return r?(TS("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Yp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Yp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new YE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new e0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Zp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Zp(e,new qb(e),t),o.set(t,u)),u}}Zp.INSTANCES=new WeakMap;class ha{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ha(t,new Fn(t._delegate,r,new rt(e)))}static forKey(e,t,r){return new ha(t,new Fn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ky(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ky(this.firestore,cN(this._delegate,e))}catch(t){throw Es(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Lt.m9)(e))instanceof Fn&&dN(this._delegate,e)}set(e,t){t=TS("DocumentReference.set",t);try{return t?ON(this._delegate,e,t):ON(this._delegate,e)}catch(r){throw Es(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?PN(this._delegate,e):PN(this._delegate,e,t,...r)}catch(o){throw Es(o,"updateDoc()","DocumentReference.update()")}}delete(){return function Ek(n){return Py(Zt(n.firestore,Wn),[new _(n._key,Er.none())])}(this._delegate)}onSnapshot(...e){const t=$N(e),r=HN(e,o=>new XE(this.firestore,new Nc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return kN(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function gk(n){n=Zt(n,Fn);const e=Zt(n.firestore,Wn),t=Vr(e),r=new Kp(e);return function SP(n,e){const t=new vr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const m=yield function(E,D){const M=je(E);return M.persistence.runTransaction("read document","readonly",x=>M.Wn.Rn(x,D))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Re(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=Sy(m,`Failed to get document '${u} from cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield lS(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Nc(e,r,n._key,o,new Wp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function mk(n){n=Zt(n,Fn);const e=Zt(n.firestore,Wn);return nN(Vr(e),n._key,{source:"server"}).then(t=>ES(e,n,t))}(this._delegate):function pk(n){n=Zt(n,Fn);const e=Zt(n.firestore,Wn);return nN(Vr(e),n._key).then(t=>ES(e,n,t))}(this._delegate),t.then(r=>new XE(this.firestore,new Nc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ha(this.firestore,this._delegate.withConverter(e?Zp.getInstance(this.firestore,e):null))}}function Es(n,e,t){return n.message=n.message.replace(e,t),n}function $N(n){for(const e of n)if("object"==typeof e&&!bS(e))return e;return{}}function HN(n,e){var t,r;let o;return o=bS(n[0])?n[0]:bS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class XE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ha(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bN(this._delegate,e._delegate)}}class e0 extends XE{data(e){const t=this._delegate.data(e);return function ab(n,e){n||lt()}(void 0!==t),t}}class ws{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qb(e)}where(e,t,r){try{return new ws(this.firestore,Vh(this._delegate,function ik(n,e,t){const r=e,o=Hb("where",n);return new rk(o,r,t)}(e,t,r)))}catch(o){throw Es(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ws(this.firestore,Vh(this._delegate,function ok(n,e="asc"){const t=e,r=Hb("orderBy",n);return new sk(r,t)}(e,t)))}catch(r){throw Es(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ws(this.firestore,Vh(this._delegate,function ak(n){return uN("limit",n),new IN("limit",n,"F")}(e)))}catch(t){throw Es(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ws(this.firestore,Vh(this._delegate,function uk(n){return uN("limitToLast",n),new IN("limitToLast",n,"L")}(e)))}catch(t){throw Es(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ws(this.firestore,Vh(this._delegate,function lk(...n){return new CN("startAt",n,!0)}(...e)))}catch(t){throw Es(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ws(this.firestore,Vh(this._delegate,function ck(...n){return new CN("startAfter",n,!1)}(...e)))}catch(t){throw Es(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ws(this.firestore,Vh(this._delegate,function dk(...n){return new AN("endBefore",n,!0)}(...e)))}catch(t){throw Es(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ws(this.firestore,Vh(this._delegate,function hk(...n){return new AN("endAt",n,!1)}(...e)))}catch(t){throw Es(t,"endAt()","Query.endAt()")}}isEqual(e){return hN(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function _k(n){n=Zt(n,zi);const e=Zt(n.firestore,Wn),t=Vr(e),r=new Kp(e);return function MP(n,e){const t=new vr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const m=yield Sb(o,u,!0),E=new HR(u,m.zn),D=E.Po(m.documents),M=E.applyChanges(D,!1);d.resolve(M.snapshot)}catch(m){const E=Sy(m,`Failed to execute query '${u} against cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield lS(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Lh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function vk(n){n=Zt(n,zi);const e=Zt(n.firestore,Wn),t=Vr(e),r=new Kp(e);return rN(t,n._query,{source:"server"}).then(o=>new Lh(e,r,n,o))}(this._delegate):function yk(n){n=Zt(n,zi);const e=Zt(n.firestore,Wn),t=Vr(e),r=new Kp(e);return DN(n._query),rN(t,n._query).then(o=>new Lh(e,r,n,o))}(this._delegate),t.then(r=>new DS(this.firestore,new Lh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=$N(e),r=HN(e,o=>new DS(this.firestore,new Lh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return kN(this._delegate,t,r)}withConverter(e){return new ws(this.firestore,this._delegate.withConverter(e?Zp.getInstance(this.firestore,e):null))}}class kk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new e0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class DS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ws(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new e0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new kk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new e0(this._firestore,r))})}isEqual(e){return bN(this._delegate,e._delegate)}}class ky extends ws{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ha(this.firestore,e):null}doc(e){try{return new ha(this.firestore,void 0===e?Lb(this._delegate):Lb(this._delegate,e))}catch(t){throw Es(t,"doc()","CollectionReference.doc()")}}add(e){return function wk(n,e){const t=Zt(n.firestore,Wn),r=Lb(n),o=Gb(n.converter,e);return Py(t,[Bb(qp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Er.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ha(this.firestore,t))}isEqual(e){return dN(this._delegate,e._delegate)}withConverter(e){return new ky(this.firestore,this._delegate.withConverter(e?Zp.getInstance(this.firestore,e):null))}}function Yp(n){return Zt(n,Fn)}class IS{constructor(...e){this._delegate=new Rc(...e)}static documentId(){return new IS(Qr.keyField().canonicalString())}isEqual(e){return(e=(0,Lt.m9)(e))instanceof Rc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Qp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Ck(){return new pS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Qp(e)}static delete(){const e=function Ik(){return new KE("deleteField")}();return e._methodName="FieldValue.delete",new Qp(e)}static arrayUnion(...e){const t=function Ak(...n){return new QP("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Qp(t)}static arrayRemove(...e){const t=function Sk(...n){return new JP("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Qp(t)}static increment(e){const t=function Mk(n){return new XP("increment",n)}(e);return t._methodName="FieldValue.increment",new Qp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Fk={Firestore:UN,GeoPoint:Vb,Timestamp:Fr,Blob:JE,Transaction:BN,WriteBatch:jN,DocumentReference:ha,DocumentSnapshot:XE,Query:ws,QueryDocumentSnapshot:e0,QuerySnapshot:DS,CollectionReference:ky,FieldPath:IS,FieldValue:Qp,setLogLevel:function Pk(n){!function TM(n){gc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Vk(n){(function Lk(n,e){n.INTERNAL.registerComponent(new Tm.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},Fk)))})(n,(e,t)=>new UN(e,t,new Ok)),n.registerVersion("@firebase/firestore-compat","0.1.13")}(zn.Z);var Uk=P(6451),zb=P(5363),Bk=P(6063);class jk extends bn.x{constructor(e=1/0,t=1/0,r=Bk.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let E=1;E<r.length&&r[E]<=d;E+=2)m=E;m&&r.splice(0,m+1)}}}var $k=P(3099);function GN(n,e,t){var r,o;let u,d=!1;return n&&"object"==typeof n?(u=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(o=n.windowTime)&&void 0!==o?o:1/0,d=!!n.refCount,t=n.scheduler):u=null!=n?n:1/0,(0,$k.B)({connector:()=>new jk(u,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:d})}function qN(n,e){return(0,N_.m)(e)?wi(()=>n,e):wi(()=>n)}var CS=P(9468);P(5867);const WN=new Map,Wk={activated:!1,tokenObservers:[]},Kk={initialized:!1,enabled:!1};function ai(n){return WN.get(n)||Wk}function ru(n,e){WN.set(n,e)}function Kb(){return Kk}class Xk{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Lt.BH,yield function e1(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Lt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ts=new Lt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ZN(n){if(!ai(n).activated)throw Ts.create("use-before-activation",{appName:n.name})}function RS(n,e){return NS.apply(this,arguments)}function NS(){return NS=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(x){throw Ts.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==d.status)throw Ts.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(x){throw Ts.create("fetch-parse-error",{originalErrorMessage:x.message})}const E=m.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw Ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const D=1e3*Number(E[1]),M=Date.now();return{token:m.attestationToken,expireTimeMillis:M+D,issuedAtTimeMillis:M}}),NS.apply(this,arguments)}function s1(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const t0="firebase-app-check-store";let Qb=null;function QN(){return Qb||(Qb=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Ts.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(t0,{keyPath:"compositeKey"})}}catch(t){e(Ts.create("storage-open",{originalErrorMessage:t.message}))}}),Qb)}function xS(){return xS=(0,ye.Z)(function*(n,e){const r=(yield QN()).transaction(t0,"readwrite"),u=r.objectStore(t0).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=E=>{d()},r.onerror=E=>{var D;m(Ts.create("storage-set",{originalErrorMessage:null===(D=E.target.error)||void 0===D?void 0:D.message}))}})}),xS.apply(this,arguments)}const n0=new zu.Yd("@firebase/app-check");function tx(n,e){return(0,Lt.hl)()?function l1(n,e){return function JN(n,e){return xS.apply(this,arguments)}(function ex(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{n0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function nx(){return Kb().enabled}function rx(){return FS.apply(this,arguments)}function FS(){return FS=(0,ye.Z)(function*(){const n=Kb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),FS.apply(this,arguments)}const g1={error:"UNKNOWN_ERROR"};function m1(n){return Lt.US.encodeString(JSON.stringify(n),!1)}function Jb(n){return LS.apply(this,arguments)}function LS(){return LS=(0,ye.Z)(function*(n,e=!1){const t=n.app;ZN(t);const r=ai(t);let u,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&Xb(E)&&(o=E)}if(!e&&o&&Xb(o))return{token:o.token};let m,d=!1;if(nx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=RS(s1(t,yield rx()),n.platformLoggerProvider).then(D=>(r.exchangeTokenPromise=void 0,D)),d=!0);const E=yield r.exchangeTokenPromise;return yield tx(t,E),ru(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),d=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?n0.warn(E.message):n0.error(E),u=E}return o?(m={token:o.token},ru(t,Object.assign(Object.assign({},r),{token:o})),yield tx(t,o)):m=_1(u),d&&sx(t,m),m}),LS.apply(this,arguments)}function US(n,e){const t=ai(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ru(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ix(n){const{app:e}=n,t=ai(e);let r=t.tokenRefresher;r||(r=function y1(n){const{app:e}=n;return new Xk((0,ye.Z)(function*(){let r;if(r=ai(e).token?yield Jb(n,!0):yield Jb(n),r.error)throw r.error}),()=>!0,()=>{const t=ai(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ru(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function sx(n,e){const t=ai(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Xb(n){return n.expireTimeMillis-Date.now()>0}function _1(n){return{token:m1(g1),error:n}}class v1{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=ai(this.app);for(const t of e)US(this.app,t.next);return Promise.resolve()}}const fx="app-check-internal";!function O1(){(0,qu._registerComponent)(new Tm.wA("app-check",n=>function E1(n,e){return new v1(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(fx).initialize()})),(0,qu._registerComponent)(new Tm.wA(fx,n=>function w1(n){return{getToken:e=>Jb(n,e),addTokenListener:e=>function VS(n,e,t,r){const{app:o}=n,u=ai(o),d={next:t,error:r,type:e};if(ru(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&Xb(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),ix(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>ix(n))}(n,"INTERNAL",e),removeTokenListener:e=>US(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,qu.registerVersion)("@firebase/app-check","0.5.3")}();class HS{constructor(){return(0,ti.vb)("app-check")}}"undefined"!=typeof window&&window,P(127);const gx=new p.OlP("angularfire2.auth.use-emulator"),mx=new p.OlP("angularfire2.auth.settings"),yx=new p.OlP("angularfire2.auth.tenant-id"),_x=new p.OlP("angularfire2.auth.langugage-code"),vx=new p.OlP("angularfire2.auth.use-device-language"),Ex=new p.OlP("angularfire.auth.persistence"),wx=(n,e,t,r,o,u,d,m)=>(0,hn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),d)for(const[D,M]of Object.entries(d))E.settings[D]=M;return m&&E.setPersistence(m),E},[t,r,o,u,d,m]);let Tx=(()=>{class n{constructor(t,r,o,u,d,m,E,D,M,x,V,q){const Z=new bn.x,he=wt(void 0).pipe((0,zb.Q)(d.outsideAngular),wi(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,1119)))),(0,_t.U)(()=>(0,hn.on)(t,u,r)),(0,_t.U)(Pe=>wx(Pe,u,m,D,M,x,E,V)),GN({bufferSize:1,refCount:!1}));if(wa(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=wt(null);else{he.pipe(Uu()).subscribe();const ot=he.pipe(wi(ct=>ct.getRedirectResult().then(un=>un,()=>null)),ti.iC,GN({bufferSize:1,refCount:!1})),yt=he.pipe(wi(ct=>new Mr.y(un=>({unsubscribe:u.runOutsideAngular(()=>ct.onAuthStateChanged(hr=>un.next(hr),hr=>un.error(hr),()=>un.complete()))})))),Pt=he.pipe(wi(ct=>new Mr.y(un=>({unsubscribe:u.runOutsideAngular(()=>ct.onIdTokenChanged(hr=>un.next(hr),hr=>un.error(hr),()=>un.complete()))}))));this.authState=ot.pipe(qN(yt),(0,CS.R)(d.outsideAngular),(0,zb.Q)(d.insideAngular)),this.user=ot.pipe(qN(Pt),(0,CS.R)(d.outsideAngular),(0,zb.Q)(d.insideAngular)),this.idToken=this.user.pipe(wi(ct=>ct?(0,mn.D)(ct.getIdToken()):wt(null))),this.idTokenResult=this.user.pipe(wi(ct=>ct?(0,mn.D)(ct.getIdTokenResult()):wt(null))),this.credential=(0,Uk.T)(ot,Z,this.authState.pipe(na(ct=>!ct))).pipe((0,_t.U)(ct=>(null==ct?void 0:ct.user)?ct:null),(0,CS.R)(d.outsideAngular),(0,zb.Q)(d.insideAngular))}return(0,hn.pX)(this,he,u,{spy:{apply:(Pe,ot,yt)=>{(Pe.startsWith("signIn")||Pe.startsWith("createUser"))&&yt.then(Pt=>Z.next(Pt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(hn.Dh),p.LFG(hn.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ti.HU),p.LFG(gx,8),p.LFG(mx,8),p.LFG(yx,8),p.LFG(_x,8),p.LFG(vx,8),p.LFG(Ex,8),p.LFG(HS,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function bx(n,e){return function U1(n,e=LI.z){return new Mr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function qS(n,e){return bx(n,e).pipe((0,_t.U)(t=>({payload:t,type:"query"})))}function tD(n,e){return qS(n,e).pipe(Yg(void 0),Jd(),(0,_t.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const E=o.find(M=>M.doc.ref.isEqual(d.ref)),D=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(d.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(d.metadata)||!E&&D&&JSON.stringify(D.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function Dx(n,e,t){return tD(n,t).pipe(Jl((r,o)=>function j1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function $1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return zS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return zS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return zS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function VI(n,e=jf.y){return n=null!=n?n:wm,(0,cs.e)((t,r)=>{let o,u=!0;t.subscribe(new gr.Q(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,_t.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function zS(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function Ix(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Cx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=tD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,_t.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Yg(void 0),Jd(),na(([r,o])=>o.length>0||!r),(0,_t.U)(([r,o])=>o),ti.iC)}auditTrail(e){return this.stateChanges(e).pipe(Jl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Ix(e);return Dx(this.query,t,this.afs.schedulers.outsideAngular).pipe(ti.iC)}valueChanges(e={}){return qS(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ti.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(ti.iC)}add(e){return this.ref.add(e)}doc(e){return new Ax(this.ref.doc(e),this.afs)}}class Ax{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=Sx(r,t);return new Cx(o,u,this.afs)}snapshotChanges(){return function B1(n,e){return bx(n,e).pipe(Yg(void 0),Jd(),(0,_t.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ti.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,_t.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,mn.D)(this.ref.get(e)).pipe(ti.iC)}}class H1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?tD(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),na(t=>t.length>0),ti.iC):tD(this.query,this.afs.schedulers.outsideAngular).pipe(ti.iC)}auditTrail(e){return this.stateChanges(e).pipe(Jl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Ix(e);return Dx(this.query,t,this.afs.schedulers.outsideAngular).pipe(ti.iC)}valueChanges(e={}){return qS(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),ti.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(ti.iC)}}const G1=new p.OlP("angularfire2.enableFirestorePersistence"),q1=new p.OlP("angularfire2.firestore.persistenceSettings"),z1=new p.OlP("angularfire2.firestore.settings"),W1=new p.OlP("angularfire2.firestore.use-emulator");function Sx(n,e=(t=>t)){return{query:e(n),ref:n}}let Mx=(()=>{class n{constructor(t,r,o,u,d,m,E,D,M,x,V,q,Z,he,Pe,ot,yt){this.schedulers=E;const Pt=(0,hn.on)(t,m,r),ct=M;x&&wx(Pt,m,V,Z,he,Pe,q,ot),[this.firestore,this.persistenceEnabled$]=(0,hn.cc)(`${Pt.name}.firestore`,"AngularFirestore",Pt.name,()=>{const un=m.runOutsideAngular(()=>Pt.firestore());if(u&&un.settings(u),ct&&un.useEmulator(...ct),o&&!wa(d)){const hr=()=>{try{return(0,mn.D)(un.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(Ur){return"undefined"!=typeof console&&console.warn(Ur),wt(!1)}};return[un,m.runOutsideAngular(hr)]}return[un,wt(!1)]},[u,ct,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=Sx(o,r),m=this.schedulers.ngZone.run(()=>u);return new Cx(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new H1(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Ax(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(hn.Dh),p.LFG(hn.xv,8),p.LFG(G1,8),p.LFG(z1,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ti.HU),p.LFG(q1,8),p.LFG(W1,8),p.LFG(Tx,8),p.LFG(gx,8),p.LFG(mx,8),p.LFG(yx,8),p.LFG(_x,8),p.LFG(vx,8),p.LFG(Ex,8),p.LFG(HS,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Rx=(()=>{class n{constructor(t){this.fireBaseStore=t,this.tarjeta$subject=new bn.x}guardarTarjeta(t){return this.fireBaseStore.collection("tarjetas").add(t)}obtenerTarjestasFb(){return this.fireBaseStore.collection("tarjetas",t=>t.orderBy("fechaEmi","asc")).snapshotChanges()}editarTarjeta(t,r){return this.fireBaseStore.collection("tarjetas").doc(t).update(r)}eliminarTarjeta(t){return this.fireBaseStore.collection("tarjetas").doc(t).delete()}addTarjetaEdit(t){this.tarjeta$subject.next(t)}getTarjetaEdit(){return this.tarjeta$subject.asObservable()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Mx))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function K1(n,e){1&n&&(p.TgZ(0,"div",21),p.TgZ(1,"span",22),p._uU(2,"Loading..."),p.qZA(),p.qZA())}let Z1=(()=>{class n{constructor(t,r,o){this.fb=t,this.tarjetaService=r,this.toasTr=o,this.loading=!1,this.titulo="Registrar Tarjeta",this.form=this.fb.group({titular:["",mr.required],numeroTarjeta:["",[mr.required,mr.minLength(16),mr.maxLength(16)]],fechaExp:["",[mr.required,mr.minLength(5),mr.maxLength(5)]],cvv:["",[mr.required,mr.minLength(3),mr.maxLength(3)]]})}ngOnInit(){this.tarjetaService.getTarjetaEdit().subscribe(t=>{this.id=t.id,this.titulo="Editar Tarjeta Actual",this.form.patchValue({titular:t.titular,numeroTarjeta:t.numeroTarjeta,fechaExp:t.fechaExp,cvv:t.cvv})})}registrarTarjeta(){null==this.id?this.agregarTarjeta():this.editarTarjeta(this.id)}agregarTarjeta(){const t={titular:this.form.value.titular,numeroTarjeta:this.form.value.numeroTarjeta,fechaExp:this.form.value.fechaExp,cvv:this.form.value.cvv,fechaEmi:new Date,fechaActualizacion:new Date};this.loading=!0,this.tarjetaService.guardarTarjeta(t).then(()=>{this.loading=!1,this.toasTr.success("Tarjeta registrada!","Exito :D"),this.form.reset()},r=>{this.loading=!1,this.toasTr.error("Opps...","Ocurrio un error")})}editarTarjeta(t){const r={titular:this.form.value.titular,numeroTarjeta:this.form.value.numeroTarjeta,fechaExp:this.form.value.fechaExp,cvv:this.form.value.cvv,fechaActualizacion:new Date};this.loading=!0,this.tarjetaService.editarTarjeta(t,r).then(()=>{this.loading=!1,this.titulo="Registrar Tarjeta",this.form.reset(),this.id=void 0,this.toasTr.info("Tarjeta Actualizada!","Exito :D")},o=>{console.log(o)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ag),p.Y36(Rx),p.Y36(Bf))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-crear-tarjeta"]],decls:29,vars:20,consts:[[1,"card"],[1,"card-body"],[1,"titulo","mb-3"],["class","spinner-border text-success float-end","role","status",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"input-group","input-group-lg","mb-3"],["id","",1,"input-group-text"],[1,"fa-solid","fa-circle-user"],["type","text","formControlName","titular","placeholder","Titular",1,"form-control"],[1,"fa-solid","fa-credit-card"],["type","text","formControlName","numeroTarjeta","maxlength","16","placeholder","Numero Tarjeta",1,"form-control"],[1,"row"],[1,"col-lg-7"],[1,"fa-solid","fa-calendar-days"],["type","text","formControlName","fechaExp","maxlength","5","placeholder","MM/YY",1,"form-control"],[1,"col-lg-5"],[1,"fa-solid","fa-key"],["type","password","formControlName","cvv","maxlength","3","placeholder","CVV",1,"form-control"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"fas","fa-database"],["role","status",1,"spinner-border","text-success","float-end"],[1,"visually-hidden"]],template:function(t,r){if(1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"h3",2),p._uU(3),p.YNc(4,K1,3,0,"div",3),p.qZA(),p.TgZ(5,"form",4),p.NdJ("ngSubmit",function(){return r.registrarTarjeta()}),p.TgZ(6,"div",5),p.TgZ(7,"span",6),p._UZ(8,"i",7),p.qZA(),p._UZ(9,"input",8),p.qZA(),p.TgZ(10,"div",5),p.TgZ(11,"span",6),p._UZ(12,"i",9),p.qZA(),p._UZ(13,"input",10),p.qZA(),p.TgZ(14,"div",11),p.TgZ(15,"div",12),p.TgZ(16,"div",5),p.TgZ(17,"span",6),p._UZ(18,"i",13),p.qZA(),p._UZ(19,"input",14),p.qZA(),p.qZA(),p.TgZ(20,"div",15),p.TgZ(21,"div",5),p.TgZ(22,"span",6),p._UZ(23,"i",16),p.qZA(),p._UZ(24,"input",17),p.qZA(),p.qZA(),p.qZA(),p.TgZ(25,"div",18),p.TgZ(26,"button",19),p._UZ(27,"i",20),p._uU(28,"\xa0Registrar "),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t){let o,u,d,m,E,D,M,x;p.xp6(3),p.hij("",r.titulo," "),p.xp6(1),p.Q6J("ngIf",r.loading),p.xp6(1),p.Q6J("formGroup",r.form),p.xp6(3),p.ekj("green-icon",null==(o=r.form.get("titular"))?null:o.valid)("red-icon",(null==(u=r.form.get("titular"))?null:u.invalid)&&(null==(u=r.form.get("titular"))?null:u.touched)),p.xp6(4),p.ekj("green-icon",null==(d=r.form.get("numeroTarjeta"))?null:d.valid)("red-icon",(null==(m=r.form.get("numeroTarjeta"))?null:m.invalid)&&(null==(m=r.form.get("numeroTarjeta"))?null:m.touched)),p.xp6(6),p.ekj("green-icon",null==(E=r.form.get("fechaExp"))?null:E.valid)("red-icon",(null==(D=r.form.get("fechaExp"))?null:D.invalid)&&(null==(D=r.form.get("fechaExp"))?null:D.touched)),p.xp6(5),p.ekj("green-icon",null==(M=r.form.get("cvv"))?null:M.valid)("red-icon",(null==(x=r.form.get("cvv"))?null:x.invalid)&&(null==(x=r.form.get("cvv"))?null:x.touched)),p.xp6(3),p.Q6J("disabled",r.form.invalid)}},directives:[or,hf,cd,Ed,Uo,Rl,Ui,Ul],styles:[".green-icon[_ngcontent-%COMP%]{color:#198754}.red-icon[_ngcontent-%COMP%]{color:#dc3545}"]}),n})();function Y1(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"tr"),p.TgZ(1,"td"),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td"),p.TgZ(8,"i",5),p.NdJ("click",function(){const u=p.CHM(t).$implicit;return p.oxw().editarTarjeta(u)}),p.qZA(),p.TgZ(9,"i",6),p.NdJ("click",function(){const u=p.CHM(t).$implicit;return p.oxw().eliminarTarjeta(u.id)}),p.qZA(),p.qZA(),p.qZA()}if(2&n){const t=e.$implicit;p.xp6(2),p.Oqu(t.titular),p.xp6(2),p.Oqu(t.numeroTarjeta),p.xp6(2),p.Oqu(t.fechaExp)}}let Q1=(()=>{class n{constructor(t,r){this.tarjetaService=t,this.toasTr=r,this.listadoTarjetas=[]}ngOnInit(){this.obtenerTarjetas()}obtenerTarjetas(){this.tarjetaService.obtenerTarjestasFb().subscribe(t=>{this.listadoTarjetas=[],t.forEach(r=>{this.listadoTarjetas.push(Object.assign({id:r.payload.doc.id},r.payload.doc.data()))})})}eliminarTarjeta(t){this.tarjetaService.eliminarTarjeta(t).then(()=>{this.toasTr.error("Se elimino con exito!","Tarjeta Eliminada")},r=>{this.toasTr.error("Opps!","Ocurrio un error"),console.log(r)})}editarTarjeta(t){this.tarjetaService.addTarjetaEdit(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Rx),p.Y36(Bf))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-listar-tarjeta"]],decls:7,vars:1,consts:[[1,"card"],[1,"card-body"],[1,"titulo","mb-3"],[1,"table"],[4,"ngFor","ngForOf"],[1,"fa-solid","fa-pen","text-info","icon",3,"click"],[1,"fa-light","fa-x","text-danger","icon",3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"h5",2),p._uU(3,"Lista de Tarjetas"),p.qZA(),p.TgZ(4,"table",3),p.TgZ(5,"tbody"),p.YNc(6,Y1,10,3,"tr",4),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.xp6(6),p.Q6J("ngForOf",r.listadoTarjetas))},directives:[$n],styles:[".icon[_ngcontent-%COMP%]{cursor:pointer;margin-right:12px}"]}),n})(),J1=(()=>{class n{constructor(t){this.title="creditCard"}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Mx))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:12,vars:0,consts:[[1,"container","mt-5"],[1,"row"],[1,"col","offset-lg-1"],[1,"card"],[1,"card-body"],[1,"titulo"],[1,"row","mt-5"],[1,"col-lg-6"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"div",3),p.TgZ(4,"div",4),p.TgZ(5,"h1",5),p._uU(6,"Bienvenido"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(7,"div",6),p.TgZ(8,"div",7),p._UZ(9,"app-crear-tarjeta"),p.qZA(),p.TgZ(10,"div",7),p._UZ(11,"app-listar-tarjeta"),p.qZA(),p.qZA(),p.qZA())},directives:[Z1,Q1],styles:[""]}),n})(),X1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[J1]}),n.\u0275inj=p.cJS({providers:[],imports:[[pu,FI,Nr,hn.hO.initializeApp(Yo_firebase),B0,$D.forRoot()]]}),n})();(0,p.G48)(),Aa().bootstrapModule(X1).catch(n=>console.error(n))},5867:(st,De,P)=>{"use strict";P.d(De,{Mq:()=>p.getApp,C6:()=>p.getApps});var p=P(9681);(0,p.registerVersion)("firebase","9.6.6","app")},127:(st,De,P)=>{"use strict";P.d(De,{Z:()=>p.Z});var p=P(3942);p.Z.registerVersion("firebase","9.6.6","app-compat")},1119:(st,De,P)=>{"use strict";P.r(De);var p=P(5861),Y=P(3942),O=P(2090),se=P(9681);function oe(y,h){var f={};for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&h.indexOf(v)<0&&(f[v]=y[v]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var C=0;for(v=Object.getOwnPropertySymbols(y);C<v.length;C++)h.indexOf(v[C])<0&&Object.prototype.propertyIsEnumerable.call(y,v[C])&&(f[v[C]]=y[v[C]])}return f}var Fe=P(1877),le=P(4859);const Tr=function wr(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Yt=function rn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},li=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),In=new Fe.Yd("@firebase/auth");function Ci(y,...h){In.logLevel<=Fe.in.ERROR&&In.error(`Auth (${se.SDK_VERSION}): ${y}`,...h)}function $t(y,...h){throw Ki(y,...h)}function yn(y,...h){return Ki(y,...h)}function Hs(y,h,f){const v=Object.assign(Object.assign({},Yt()),{[h]:f});return new O.LL("auth","Firebase",v).create(h,{appName:y.name})}function Br(y,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&$t(y,"argument-error"),Hs(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ki(y,...h){if("string"!=typeof y){const f=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(f,...v)}return li.create(y,...h)}function Ae(y,h,...f){if(!y)throw Ki(h,...f)}function ir(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Ci(h),new Error(h)}function Je(y,h){y||ir(h)}const Jr=new Map;function zt(y){Je(y instanceof Function,"Expected a class definition");let h=Jr.get(y);return h?(Je(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Jr.set(y,h),h)}function ht(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function tt(){return"http:"===Mt()||"https:"===Mt()}function Mt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Rt{constructor(h,f){this.shortDelay=h,this.longDelay=f,Je(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function pn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(tt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Xe(y,h){Je(y.emulator,"Emulator should always be set here");const{url:f}=y.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class ut{static initialize(h,f,v){this.fetchImpl=h,f&&(this.headersImpl=f),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ol={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},qs=new Rt(3e4,6e4);function ft(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function _n(y,h,f,v){return br.apply(this,arguments)}function br(){return(br=(0,p.Z)(function*(y,h,f,v,C={}){return Zi(y,C,(0,p.Z)(function*(){let R={},U={};v&&("GET"===h?U=v:R={body:JSON.stringify(v)});const ee=(0,O.xO)(Object.assign({key:y.config.apiKey},U)).slice(1),ke=yield y._getAdditionalHeaders();return ke["Content-Type"]="application/json",y.languageCode&&(ke["X-Firebase-Locale"]=y.languageCode),ut.fetch()(_e(y,y.config.apiHost,f,ee),Object.assign({method:h,headers:ke,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Zi(y,h,f){return L.apply(this,arguments)}function L(){return(L=(0,p.Z)(function*(y,h,f){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},ol),h);try{const C=new X(y),R=yield Promise.race([f(),C.promise]);C.clearNetworkTimeout();const U=yield R.json();if("needConfirmation"in U)throw $e(y,"account-exists-with-different-credential",U);if(R.ok&&!("errorMessage"in U))return U;{const ee=R.ok?U.errorMessage:U.error.message,[ke,Me]=ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw $e(y,"credential-already-in-use",U);if("EMAIL_EXISTS"===ke)throw $e(y,"email-already-in-use",U);const We=v[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Me)throw Hs(y,We,Me);$t(y,We)}}catch(C){if(C instanceof O.ZR)throw C;$t(y,"network-request-failed")}})).apply(this,arguments)}function H(y,h,f,v){return G.apply(this,arguments)}function G(){return(G=(0,p.Z)(function*(y,h,f,v,C={}){const R=yield _n(y,h,f,v,C);return"mfaPendingCredential"in R&&$t(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function _e(y,h,f,v){const C=`${h}${f}?${v}`;return y.config.emulator?Xe(y.config,C):`${y.config.apiScheme}://${C}`}class X{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,v)=>{this.timer=setTimeout(()=>v(yn(this.auth,"network-request-failed")),qs.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $e(y,h,f){const v={appName:y.name};f.email&&(v.email=f.email),f.phoneNumber&&(v.phoneNumber=f.phoneNumber);const C=yn(y,h,v);return C.customData._tokenResponse=f,C}function ln(){return(ln=(0,p.Z)(function*(y,h){return _n(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Vn(y,h){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,p.Z)(function*(y,h){return _n(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Dr(y,h){return kt.apply(this,arguments)}function kt(){return(kt=(0,p.Z)(function*(y,h){return _n(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function sr(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function To(){return(To=(0,p.Z)(function*(y,h=!1){const f=(0,O.m9)(y),v=yield f.getIdToken(h),C=zs(v);Ae(C&&C.exp&&C.auth_time&&C.iat,f.auth,"internal-error");const R="object"==typeof C.firebase?C.firebase:void 0,U=null==R?void 0:R.sign_in_provider;return{claims:C,token:v,authTime:sr(iu(C.auth_time)),issuedAtTime:sr(iu(C.iat)),expirationTime:sr(iu(C.exp)),signInProvider:U||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function iu(y){return 1e3*Number(y)}function zs(y){const[h,f,v]=y.split(".");if(void 0===h||void 0===f||void 0===v)return Ci("JWT malformed, contained fewer than 3 sections"),null;try{const C=(0,O.tV)(f);return C?JSON.parse(C):(Ci("Failed to decode base64 JWT payload"),null)}catch(C){return Ci("Caught error parsing JWT payload as JSON",C),null}}function Un(y,h){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,p.Z)(function*(y,h,f=!1){if(f)return h;try{return yield h}catch(v){throw v instanceof O.ZR&&Yn(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Yn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Is{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const C=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,C)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,p.Z)(function*(){yield f.iteration()}),v)}iteration(){var h=this;return(0,p.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&h.schedule(!0))}h.schedule()})()}}class ul{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=sr(this.lastLoginAt),this.creationTime=sr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ci(y){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,p.Z)(function*(y){var h;const f=y.auth,v=yield y.getIdToken(),C=yield Un(y,Dr(f,{idToken:v}));Ae(null==C?void 0:C.users.length,f,"internal-error");const R=C.users[0];y._notifyReloadListener(R);const U=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?$r(R.providerUserInfo):[],ee=fa(y.providerData,U),We=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==ee?void 0:ee.length)),Ke={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ee,metadata:new ul(R.createdAt,R.lastLoginAt),isAnonymous:We};Object.assign(y,Ke)})).apply(this,arguments)}function Bn(){return(Bn=(0,p.Z)(function*(y){const h=(0,O.m9)(y);yield ci(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function fa(y,h){return[...y.filter(v=>!h.some(C=>C.providerId===v.providerId)),...h]}function $r(y){return y.map(h=>{var{providerId:f}=h,v=oe(h,["providerId"]);return{providerId:f,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function At(){return(At=(0,p.Z)(function*(y,h){const f=yield Zi(y,{},(0,p.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:C,apiKey:R}=y.config,U=_e(y,C,"/v1/token",`key=${R}`),ee=yield y._getAdditionalHeaders();return ee["Content-Type"]="application/x-www-form-urlencoded",ut.fetch()(U,{method:"POST",headers:ee,body:v})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class Wt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){Ae(h.idToken,"internal-error"),Ae(void 0!==h.idToken,"internal-error"),Ae(void 0!==h.refreshToken,"internal-error");const f="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function Zn(y){const h=zs(y);return Ae(h,"internal-error"),Ae(void 0!==h.exp,"internal-error"),Ae(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}getToken(h,f=!1){var v=this;return(0,p.Z)(function*(){return Ae(!v.accessToken||v.refreshToken,h,"user-token-expired"),f||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var v=this;return(0,p.Z)(function*(){const{accessToken:C,refreshToken:R,expiresIn:U}=yield function He(y,h){return At.apply(this,arguments)}(h,f);v.updateTokensAndExpiration(C,R,Number(U))})()}updateTokensAndExpiration(h,f,v){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,f){const{refreshToken:v,accessToken:C,expirationTime:R}=f,U=new Wt;return v&&(Ae("string"==typeof v,"internal-error",{appName:h}),U.refreshToken=v),C&&(Ae("string"==typeof C,"internal-error",{appName:h}),U.accessToken=C),R&&(Ae("number"==typeof R,"internal-error",{appName:h}),U.expirationTime=R),U}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Wt,this.toJSON())}_performRefresh(){return ir("not implemented")}}function An(y,h){Ae("string"==typeof y||void 0===y,"internal-error",{appName:h})}class fr{constructor(h){var{uid:f,auth:v,stsTokenManager:C}=h,R=oe(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Is(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=v,this.stsTokenManager=C,this.accessToken=C.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new ul(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,p.Z)(function*(){const v=yield Un(f,f.stsTokenManager.getToken(f.auth,h));return Ae(v,f.auth,"internal-error"),f.accessToken!==v&&(f.accessToken=v,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),v})()}getIdTokenResult(h){return function al(y){return To.apply(this,arguments)}(this,h)}reload(){return function Ks(y){return Bn.apply(this,arguments)}(this)}_assign(h){this!==h&&(Ae(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new fr(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var v=this;return(0,p.Z)(function*(){let C=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),C=!0),f&&(yield ci(v)),yield v.auth._persistUserIfCurrent(v),C&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,p.Z)(function*(){const f=yield h.getIdToken();return yield Un(h,function gt(y,h){return ln.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var v,C,R,U,ee,ke,Me,We;const Ke=null!==(v=f.displayName)&&void 0!==v?v:void 0,Ft=null!==(C=f.email)&&void 0!==C?C:void 0,er=null!==(R=f.phoneNumber)&&void 0!==R?R:void 0,$i=null!==(U=f.photoURL)&&void 0!==U?U:void 0,Or=null!==(ee=f.tenantId)&&void 0!==ee?ee:void 0,ku=null!==(ke=f._redirectEventId)&&void 0!==ke?ke:void 0,Fu=null!==(Me=f.createdAt)&&void 0!==Me?Me:void 0,Mf=null!==(We=f.lastLoginAt)&&void 0!==We?We:void 0,{uid:zl,emailVerified:Rf,isAnonymous:ta,providerData:co,stsTokenManager:Od}=f;Ae(zl&&Od,h,"internal-error");const Pd=Wt.fromJSON(this.name,Od);Ae("string"==typeof zl,h,"internal-error"),An(Ke,h.name),An(Ft,h.name),Ae("boolean"==typeof Rf,h,"internal-error"),Ae("boolean"==typeof ta,h,"internal-error"),An(er,h.name),An($i,h.name),An(Or,h.name),An(ku,h.name),An(Fu,h.name),An(Mf,h.name);const kd=new fr({uid:zl,auth:h,email:Ft,emailVerified:Rf,displayName:Ke,isAnonymous:ta,photoURL:$i,phoneNumber:er,tenantId:Or,stsTokenManager:Pd,createdAt:Fu,lastLoginAt:Mf});return co&&Array.isArray(co)&&(kd.providerData=co.map(Wl=>Object.assign({},Wl))),ku&&(kd._redirectEventId=ku),kd}static _fromIdTokenResponse(h,f,v=!1){return(0,p.Z)(function*(){const C=new Wt;C.updateFromServerResponse(f);const R=new fr({uid:f.localId,auth:h,stsTokenManager:C,isAnonymous:v});return yield ci(R),R})()}}const Ir=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(f,v){var C=this;return(0,p.Z)(function*(){C.storage[f]=v})()}_get(f){var v=this;return(0,p.Z)(function*(){const C=v.storage[f];return void 0===C?null:C})()}_remove(f){var v=this;return(0,p.Z)(function*(){delete v.storage[f]})()}_addListener(f,v){}_removeListener(f,v){}}return y.type="NONE",y})();function Ht(y,h,f){return`firebase:${y}:${h}:${f}`}class di{constructor(h,f,v){this.persistence=h,this.auth=f,this.userKey=v;const{config:C,name:R}=this.auth;this.fullUserKey=Ht(this.userKey,C.apiKey,R),this.fullPersistenceKey=Ht("persistence",C.apiKey,R),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,p.Z)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?fr._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,p.Z)(function*(){if(f.persistence===h)return;const v=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,v?f.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,v="authUser"){return(0,p.Z)(function*(){if(!f.length)return new di(zt(Ir),h,v);const C=(yield Promise.all(f.map(function(){var Me=(0,p.Z)(function*(We){if(yield We._isAvailable())return We});return function(We){return Me.apply(this,arguments)}}()))).filter(Me=>Me);let R=C[0]||zt(Ir);const U=Ht(v,h.config.apiKey,h.name);let ee=null;for(const Me of f)try{const We=yield Me._get(U);if(We){const Ke=fr._fromJSON(h,We);Me!==R&&(ee=Ke),R=Me;break}}catch(We){}const ke=C.filter(Me=>Me._shouldAllowMigration);return R._shouldAllowMigration&&ke.length?(R=ke[0],ee&&(yield R._set(U,ee.toJSON())),yield Promise.all(f.map(function(){var Me=(0,p.Z)(function*(We){if(We!==R)try{yield We._remove(U)}catch(Ke){}});return function(We){return Me.apply(this,arguments)}}())),new di(R,h,v)):new di(R,h,v)})()}}function Sn(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(pa(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Dt(h))return"Firefox";if(h.includes("silk/"))return"Silk";if($n(h))return"Blackberry";if(Do(h))return"Webos";if(bo(h))return"Safari";if((h.includes("chrome/")||Zs(h))&&!h.includes("edge/"))return"Chrome";if(Si(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function Dt(y=(0,O.z$)()){return/firefox\//i.test(y)}function bo(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Zs(y=(0,O.z$)()){return/crios\//i.test(y)}function pa(y=(0,O.z$)()){return/iemobile/i.test(y)}function Si(y=(0,O.z$)()){return/android/i.test(y)}function $n(y=(0,O.z$)()){return/blackberry/i.test(y)}function Do(y=(0,O.z$)()){return/webos/i.test(y)}function Mi(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function Io(y=(0,O.z$)()){return Mi(y)||Si(y)||Do(y)||$n(y)||/windows phone/i.test(y)||pa(y)}function fi(y,h=[]){let f;switch(y){case"Browser":f=Sn((0,O.z$)());break;case"Worker":f=`${Sn((0,O.z$)())}-${y}`;break;default:f=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${se.SDK_VERSION}/${v}`}class Fc{constructor(h,f){this.app=h,this.config=f,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yi(this),this.idTokenSubscription=new Yi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=li,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=f.sdkClientVersion}_initializeWithPersistence(h,f){var v=this;return f&&(this._popupRedirectResolver=zt(f)),this._initializationPromise=this.queue((0,p.Z)(function*(){var C,R;if(!v._deleted&&(v.persistenceManager=yield di.create(v,h),!v._deleted)){if(null===(C=v._popupRedirectResolver)||void 0===C?void 0:C._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(U){}yield v.initializeCurrentUser(f),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,p.Z)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f)}})()}initializeCurrentUser(h){var f=this;return(0,p.Z)(function*(){var v;let C=yield f.assertedPersistence.getCurrentUser();if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const R=null===(v=f.redirectUser)||void 0===v?void 0:v._redirectEventId,U=null==C?void 0:C._redirectEventId,ee=yield f.tryRedirectSignIn(h);(!R||R===U)&&(null==ee?void 0:ee.user)&&(C=ee.user)}return C?C._redirectEventId?(Ae(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===C._redirectEventId?f.directlySetCurrentUser(C):f.reloadAndSetCurrentUserOrClear(C)):f.reloadAndSetCurrentUserOrClear(C):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var f=this;return(0,p.Z)(function*(){let v=null;try{v=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch(C){yield f._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,p.Z)(function*(){try{yield ci(h)}catch(v){if("auth/network-request-failed"!==v.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function jr(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,p.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,p.Z)(function*(){const v=h?(0,O.m9)(h):null;return v&&Ae(v.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(v&&v._clone(f))})()}_updateCurrentUser(h){var f=this;return(0,p.Z)(function*(){if(!f._deleted)return h&&Ae(f.tenantId===h.tenantId,f,"tenant-id-mismatch"),f.queue((0,p.Z)(function*(){yield f.directlySetCurrentUser(h),f.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,p.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var f=this;return this.queue((0,p.Z)(function*(){yield f.assertedPersistence.setPersistence(zt(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,f,v){return this.registerStateListener(this.authStateSubscription,h,f,v)}onIdTokenChanged(h,f,v){return this.registerStateListener(this.idTokenSubscription,h,f,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var v=this;return(0,p.Z)(function*(){const C=yield v.getOrInitRedirectPersistenceManager(f);return null===h?C.removeCurrentUser():C.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,p.Z)(function*(){if(!f.redirectPersistenceManager){const v=h&&zt(h)||f._popupRedirectResolver;Ae(v,f,"argument-error"),f.redirectPersistenceManager=yield di.create(f,[zt(v._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,p.Z)(function*(){var v,C;return f._isInitialized&&(yield f.queue((0,p.Z)(function*(){}))),(null===(v=f._currentUser)||void 0===v?void 0:v._redirectEventId)===h?f._currentUser:(null===(C=f.redirectUser)||void 0===C?void 0:C._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,p.Z)(function*(){if(h===f.currentUser)return f.queue((0,p.Z)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,v,C){if(this._deleted)return()=>{};const R="function"==typeof f?f:f.next.bind(f),U=this._isInitialized?Promise.resolve():this._initializationPromise;return Ae(U,this,"internal-error"),U.then(()=>R(this.currentUser)),"function"==typeof f?h.addObserver(f,v,C):h.addObserver(f)}directlySetCurrentUser(h){var f=this;return(0,p.Z)(function*(){f.currentUser&&f.currentUser!==h&&(f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh()),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=fi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,p.Z)(function*(){const f={"X-Client-Version":h.clientVersion};return h.app.options.appId&&(f["X-Firebase-gmpid"]=h.app.options.appId),f})()}}function Nn(y){return(0,O.m9)(y)}class Yi{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(f=>this.observer=f)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Lc(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function $h(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class ga{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return ir("not implemented")}_getIdTokenResponse(h){return ir("not implemented")}_linkToIdToken(h,f){return ir("not implemented")}_getReauthenticationResolver(h){return ir("not implemented")}}function Hh(y,h){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,p.Z)(function*(y,h){return _n(y,"POST","/v1/accounts:resetPassword",ft(y,h))})).apply(this,arguments)}function Gh(y,h){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,p.Z)(function*(y,h){return _n(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ng(y,h){return ma.apply(this,arguments)}function ma(){return(ma=(0,p.Z)(function*(y,h){return _n(y,"POST","/v1/accounts:update",ft(y,h))})).apply(this,arguments)}function Bc(){return(Bc=(0,p.Z)(function*(y,h){return H(y,"POST","/v1/accounts:signInWithPassword",ft(y,h))})).apply(this,arguments)}function ll(y,h){return jc.apply(this,arguments)}function jc(){return(jc=(0,p.Z)(function*(y,h){return _n(y,"POST","/v1/accounts:sendOobCode",ft(y,h))})).apply(this,arguments)}function rg(y,h){return $c.apply(this,arguments)}function $c(){return($c=(0,p.Z)(function*(y,h){return ll(y,h)})).apply(this,arguments)}function ig(y,h){return cl.apply(this,arguments)}function cl(){return(cl=(0,p.Z)(function*(y,h){return ll(y,h)})).apply(this,arguments)}function ya(y,h){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,p.Z)(function*(y,h){return ll(y,h)})).apply(this,arguments)}function dl(y,h){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,p.Z)(function*(y,h){return ll(y,h)})).apply(this,arguments)}function su(){return(su=(0,p.Z)(function*(y,h){return H(y,"POST","/v1/accounts:signInWithEmailLink",ft(y,h))})).apply(this,arguments)}function Qs(){return(Qs=(0,p.Z)(function*(y,h){return H(y,"POST","/v1/accounts:signInWithEmailLink",ft(y,h))})).apply(this,arguments)}class va extends ga{constructor(h,f,v,C=null){super("password",v),this._email=h,this._password=f,this._tenantId=C}static _fromEmailAndPassword(h,f){return new va(h,f,"password")}static _fromEmailAndCode(h,f,v=null){return new va(h,f,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,p.Z)(function*(){switch(f.signInMethod){case"password":return function Co(y,h){return Bc.apply(this,arguments)}(h,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Ys(y,h){return su.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:$t(h,"internal-error")}})()}_linkToIdToken(h,f){var v=this;return(0,p.Z)(function*(){switch(v.signInMethod){case"password":return Gh(h,{idToken:f,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function _a(y,h){return Qs.apply(this,arguments)}(h,{idToken:f,email:v._email,oobCode:v._password});default:$t(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Cs(y,h){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,p.Z)(function*(y,h){return H(y,"POST","/v1/accounts:signInWithIdp",ft(y,h))})).apply(this,arguments)}class pr extends ga{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new pr(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):$t("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:C}=f,R=oe(f,["providerId","signInMethod"]);if(!v||!C)return null;const U=new pr(v,C);return U.idToken=R.idToken||void 0,U.accessToken=R.accessToken||void 0,U.secret=R.secret,U.nonce=R.nonce,U.pendingToken=R.pendingToken||null,U}_getIdTokenResponse(h){return Cs(h,this.buildRequest())}_linkToIdToken(h,f){const v=this.buildRequest();return v.idToken=f,Cs(h,v)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Cs(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,O.xO)(f)}return h}}function gi(y,h){return hl.apply(this,arguments)}function hl(){return(hl=(0,p.Z)(function*(y,h){return _n(y,"POST","/v1/accounts:sendVerificationCode",ft(y,h))})).apply(this,arguments)}function wa(){return(wa=(0,p.Z)(function*(y,h){return H(y,"POST","/v1/accounts:signInWithPhoneNumber",ft(y,h))})).apply(this,arguments)}function ou(){return(ou=(0,p.Z)(function*(y,h){const f=yield H(y,"POST","/v1/accounts:signInWithPhoneNumber",ft(y,h));if(f.temporaryProof)throw $e(y,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Wc={USER_NOT_FOUND:"user-not-found"};function Kc(){return(Kc=(0,p.Z)(function*(y,h){return H(y,"POST","/v1/accounts:signInWithPhoneNumber",ft(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Wc)})).apply(this,arguments)}class Kt extends ga{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new Kt({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new Kt({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function Hr(y,h){return wa.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function zc(y,h){return ou.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function fl(y,h){return Kc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:v,verificationCode:C}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:v,code:C}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:v,phoneNumber:C,temporaryProof:R}=h;return v||f||C||R?new Kt({verificationId:f,verificationCode:v,phoneNumber:C,temporaryProof:R}):null}}class on{constructor(h){var f,v,C,R,U,ee;const ke=(0,O.zd)((0,O.pd)(h)),Me=null!==(f=ke.apiKey)&&void 0!==f?f:null,We=null!==(v=ke.oobCode)&&void 0!==v?v:null,Ke=function As(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(C=ke.mode)&&void 0!==C?C:null);Ae(Me&&We&&Ke,"argument-error"),this.apiKey=Me,this.operation=Ke,this.code=We,this.continueUrl=null!==(R=ke.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(U=ke.languageCode)&&void 0!==U?U:null,this.tenantId=null!==(ee=ke.tenantId)&&void 0!==ee?ee:null}static parseLink(h){const f=function Zc(y){const h=(0,O.zd)((0,O.pd)(y)).link,f=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||f||h||y}(h);try{return new on(f)}catch(v){return null}}}let Ao=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(f,v){return va._fromEmailAndPassword(f,v)}static credentialWithLink(f,v){const C=on.parseLink(v);return Ae(C,"argument-error"),va._fromEmailAndCode(f,C.code,C.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Hn{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class xn extends Hn{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Qi extends xn{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return Ae("providerId"in f&&"signInMethod"in f,"argument-error"),pr._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return Ae(h.idToken||h.accessToken,"argument-error"),pr._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Qi.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Qi.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:v,oauthTokenSecret:C,pendingToken:R,nonce:U,providerId:ee}=h;if(!v&&!C&&!f&&!R||!ee)return null;try{return new Qi(ee)._credential({idToken:f,accessToken:v,nonce:U,pendingToken:R})}catch(ke){return null}}}let So=(()=>{class y extends xn{constructor(){super("facebook.com")}static credential(f){return pr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ni=(()=>{class y extends xn{constructor(){super("google.com"),this.addScope("profile")}static credential(f,v){return pr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:v})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:v,oauthAccessToken:C}=f;if(!v&&!C)return null;try{return y.credential(v,C)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Cr=(()=>{class y extends xn{constructor(){super("github.com")}static credential(f){return pr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class xi extends ga{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return Cs(h,this.buildRequest())}_linkToIdToken(h,f){const v=this.buildRequest();return v.idToken=f,Cs(h,v)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Cs(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:C,pendingToken:R}=f;return v&&C&&R&&v===C?new xi(v,R):null}static _create(h,f){return new xi(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ar extends Hn{constructor(h){Ae(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Ar.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Ar.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=xi.fromJSON(h);return Ae(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:v}=h;if(!f||!v)return null;try{return xi._create(v,f)}catch(C){return null}}}let Ss=(()=>{class y extends xn{constructor(){super("twitter.com")}static credential(f,v){return pr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:v})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:v,oauthTokenSecret:C}=f;if(!v||!C)return null;try{return y.credential(v,C)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Mo(y,h){return pt.apply(this,arguments)}function pt(){return(pt=(0,p.Z)(function*(y,h){return H(y,"POST","/v1/accounts:signUp",ft(y,h))})).apply(this,arguments)}class Qn{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,v,C=!1){return(0,p.Z)(function*(){const R=yield fr._fromIdTokenResponse(h,v,C),U=Ta(v);return new Qn({user:R,providerId:U,_tokenResponse:v,operationType:f})})()}static _forOperation(h,f,v){return(0,p.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const C=Ta(v);return new Qn({user:h,providerId:C,_tokenResponse:v,operationType:f})})()}}function Ta(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Ro(){return(Ro=(0,p.Z)(function*(y){var h;const f=Nn(y);if(yield f._initializationPromise,null===(h=f.currentUser)||void 0===h?void 0:h.isAnonymous)return new Qn({user:f.currentUser,providerId:null,operationType:"signIn"});const v=yield Mo(f,{returnSecureToken:!0}),C=yield Qn._fromIdTokenResponse(f,"signIn",v,!0);return yield f._updateCurrentUser(C.user),C})).apply(this,arguments)}class No extends O.ZR{constructor(h,f,v,C){var R;super(f.code,f.message),this.operationType=v,this.user=C,Object.setPrototypeOf(this,No.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:f.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,f,v,C){return new No(h,f,v,C)}}function gl(y,h,f,v){return("reauthenticate"===h?f._getReauthenticationResolver(y):f._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?No._fromErrorAndOperation(y,R,h,v):R})}function au(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function xt(){return(xt=(0,p.Z)(function*(y,h){const f=(0,O.m9)(y);yield Js(!0,f,h);const{providerUserInfo:v}=yield Vn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),C=au(v||[]);return f.providerData=f.providerData.filter(R=>C.has(R.providerId)),C.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function uu(y,h){return an.apply(this,arguments)}function an(){return(an=(0,p.Z)(function*(y,h,f=!1){const v=yield Un(y,h._linkToIdToken(y.auth,yield y.getIdToken()),f);return Qn._forOperation(y,"link",v)})).apply(this,arguments)}function Js(y,h,f){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,p.Z)(function*(y,h,f){yield ci(h);const C=!1===y?"provider-already-linked":"no-such-provider";Ae(au(h.providerData).has(f)===y,h.auth,C)})).apply(this,arguments)}function Sr(y,h){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,p.Z)(function*(y,h,f=!1){const{auth:v}=y,C="reauthenticate";try{const R=yield Un(y,gl(v,C,h,y),f);Ae(R.idToken,v,"internal-error");const U=zs(R.idToken);Ae(U,v,"internal-error");const{sub:ee}=U;return Ae(y.uid===ee,v,"user-mismatch"),Qn._forOperation(y,C,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&$t(v,"user-mismatch"),R}})).apply(this,arguments)}function lu(y,h){return cu.apply(this,arguments)}function cu(){return(cu=(0,p.Z)(function*(y,h,f=!1){const v="signIn",C=yield gl(y,v,h),R=yield Qn._fromIdTokenResponse(y,v,C);return f||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function du(y,h){return xo.apply(this,arguments)}function xo(){return(xo=(0,p.Z)(function*(y,h){return lu(Nn(y),h)})).apply(this,arguments)}function Da(y,h){return qn.apply(this,arguments)}function qn(){return(qn=(0,p.Z)(function*(y,h){const f=(0,O.m9)(y);return yield Js(!1,f,h.providerId),uu(f,h)})).apply(this,arguments)}function mi(y,h){return hu.apply(this,arguments)}function hu(){return(hu=(0,p.Z)(function*(y,h){return Sr((0,O.m9)(y),h)})).apply(this,arguments)}function Xi(y,h){return yi.apply(this,arguments)}function yi(){return(yi=(0,p.Z)(function*(y,h){return H(y,"POST","/v1/accounts:signInWithCustomToken",ft(y,h))})).apply(this,arguments)}function Oo(){return(Oo=(0,p.Z)(function*(y,h){const f=Nn(y),v=yield Xi(f,{token:h,returnSecureToken:!0}),C=yield Qn._fromIdTokenResponse(f,"signIn",v);return yield f._updateCurrentUser(C.user),C})).apply(this,arguments)}class fu{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?Ia._fromServerResponse(h,f):$t(h,"internal-error")}}class Ia extends fu{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new Ia(f)}}function Po(y,h,f){var v;Ae((null===(v=f.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),Ae(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(Ae(f.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(Ae(f.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function Aa(){return(Aa=(0,p.Z)(function*(y,h,f){const v=(0,O.m9)(y),C={requestType:"PASSWORD_RESET",email:h};f&&Po(v,C,f),yield ig(v,C)})).apply(this,arguments)}function pu(){return(pu=(0,p.Z)(function*(y,h,f){yield Hh((0,O.m9)(y),{oobCode:h,newPassword:f})})).apply(this,arguments)}function ko(){return(ko=(0,p.Z)(function*(y,h){yield ng((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function Qc(y,h){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,p.Z)(function*(y,h){const f=(0,O.m9)(y),v=yield Hh(f,{oobCode:h}),C=v.requestType;switch(Ae(C,f,"internal-error"),C){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ae(v.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ae(v.mfaInfo,f,"internal-error");default:Ae(v.email,f,"internal-error")}let R=null;return v.mfaInfo&&(R=fu._fromServerResponse(Nn(f),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:C}})).apply(this,arguments)}function Ra(){return(Ra=(0,p.Z)(function*(y,h){const{data:f}=yield Qc((0,O.m9)(y),h);return f.email})).apply(this,arguments)}function Jc(){return(Jc=(0,p.Z)(function*(y,h,f){const v=Nn(y),C=yield Mo(v,{returnSecureToken:!0,email:h,password:f}),R=yield Qn._fromIdTokenResponse(v,"signIn",C);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function On(){return(On=(0,p.Z)(function*(y,h,f){const v=(0,O.m9)(y),C={requestType:"EMAIL_SIGNIN",email:h};Ae(f.handleCodeInApp,v,"argument-error"),f&&Po(v,C,f),yield ya(v,C)})).apply(this,arguments)}function Na(){return(Na=(0,p.Z)(function*(y,h,f){const v=(0,O.m9)(y),C=Ao.credentialWithLink(h,f||ht());return Ae(C._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),du(v,C)})).apply(this,arguments)}function zh(y,h){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,p.Z)(function*(y,h){return _n(y,"POST","/v1/accounts:createAuthUri",ft(y,h))})).apply(this,arguments)}function Kh(){return(Kh=(0,p.Z)(function*(y,h){const v={identifier:h,continueUri:tt()?ht():"http://localhost"},{signinMethods:C}=yield zh((0,O.m9)(y),v);return C||[]})).apply(this,arguments)}function Rs(){return(Rs=(0,p.Z)(function*(y,h){const f=(0,O.m9)(y),C={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Po(f.auth,C,h);const{email:R}=yield rg(f.auth,C);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function yu(){return(yu=(0,p.Z)(function*(y,h,f){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};f&&Po(v.auth,R,f);const{email:U}=yield dl(v.auth,R);U!==y.email&&(yield y.reload())})).apply(this,arguments)}function Zh(y,h){return ed.apply(this,arguments)}function ed(){return(ed=(0,p.Z)(function*(y,h){return _n(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function En(){return(En=(0,p.Z)(function*(y,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},U=yield Un(v,Zh(v.auth,R));v.displayName=U.displayName||null,v.photoURL=U.photoUrl||null;const ee=v.providerData.find(({providerId:ke})=>"password"===ke);ee&&(ee.displayName=v.displayName,ee.photoURL=v.photoURL),yield v._updateTokensIfNecessary(U)})).apply(this,arguments)}function xa(y,h,f){return _u.apply(this,arguments)}function _u(){return(_u=(0,p.Z)(function*(y,h,f){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),f&&(R.password=f);const U=yield Un(y,Gh(v,R));yield y._updateTokensIfNecessary(U,!0)})).apply(this,arguments)}class Xs{constructor(h,f,v={}){this.isNewUser=h,this.providerId=f,this.profile=v}}class El extends Xs{constructor(h,f,v,C){super(h,f,v),this.username=C}}class Qh extends Xs{constructor(h,f){super(h,"facebook.com",f)}}class wl extends El{constructor(h,f){super(h,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class mn extends Xs{constructor(h,f){super(h,"google.com",f)}}class Mr extends El{constructor(h,f,v){super(h,"twitter.com",f,v)}}function ar(y){const{user:h,_tokenResponse:f}=y;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function td(y){var h,f;if(!y)return null;const{providerId:v}=y,C=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const U=null===(f=null===(h=zs(y.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(U)return new Xs(R,"anonymous"!==U&&"custom"!==U?U:null)}if(!v)return null;switch(v){case"facebook.com":return new Qh(R,C);case"github.com":return new wl(R,C);case"google.com":return new mn(R,C);case"twitter.com":return new Mr(R,C,y.screenName||null);case"custom":case"anonymous":return new Xs(R,null);default:return new Xs(R,v,C)}}(f)}class _t{constructor(h,f){this.type=h,this.credential=f}static _fromIdtoken(h){return new _t("enroll",h)}static _fromMfaPendingCredential(h){return new _t("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,v;if(null==h?void 0:h.multiFactorSession){if(null===(f=h.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return _t._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return _t._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Fa{constructor(h,f,v){this.session=h,this.hints=f,this.signInResolver=v}static _fromError(h,f){const v=Nn(h),C=f.customData._serverResponse,R=(C.mfaInfo||[]).map(ee=>fu._fromServerResponse(v,ee));Ae(C.mfaPendingCredential,v,"internal-error");const U=_t._fromMfaPendingCredential(C.mfaPendingCredential);return new Fa(U,R,function(){var ee=(0,p.Z)(function*(ke){const Me=yield ke._process(v,U);delete C.mfaInfo,delete C.mfaPendingCredential;const We=Object.assign(Object.assign({},C),{idToken:Me.idToken,refreshToken:Me.refreshToken});switch(f.operationType){case"signIn":const Ke=yield Qn._fromIdTokenResponse(v,f.operationType,We);return yield v._updateCurrentUser(Ke.user),Ke;case"reauthenticate":return Ae(f.user,v,"internal-error"),Qn._forOperation(f.user,f.operationType,We);default:$t(v,"internal-error")}});return function(ke){return ee.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,p.Z)(function*(){return f.signInResolver(h)})()}}function rd(y,h){return _n(y,"POST","/v2/accounts/mfaEnrollment:start",ft(y,h))}class Lo{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(v=>fu._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new Lo(h)}getSession(){var h=this;return(0,p.Z)(function*(){return _t._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,f){var v=this;return(0,p.Z)(function*(){const C=h,R=yield v.getSession(),U=yield Un(v.user,C._process(v.user.auth,R,f));return yield v.user._updateTokensIfNecessary(U),v.user.reload()})()}unenroll(h){var f=this;return(0,p.Z)(function*(){const v="string"==typeof h?h:h.uid,C=yield f.user.getIdToken(),R=yield Un(f.user,function bl(y,h){return _n(y,"POST","/v2/accounts/mfaEnrollment:withdraw",ft(y,h))}(f.user.auth,{idToken:C,mfaEnrollmentId:v}));f.enrolledFactors=f.enrolledFactors.filter(({uid:U})=>U!==v),yield f.user._updateTokensIfNecessary(R);try{yield f.user.reload()}catch(U){if("auth/user-token-expired"!==U.code)throw U}})()}}const Rr=new WeakMap,Vo="__sak";class vu{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Vo,"1"),this.storage.removeItem(Vo),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Xr=(()=>{class y extends vu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,v)=>this.onStorageEvent(f,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Pi(){const y=(0,O.z$)();return bo(y)||Mi(y)}()&&function hi(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Io(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const v of Object.keys(this.listeners)){const C=this.storage.getItem(v),R=this.localCache[v];C!==R&&f(v,R,C)}}onStorageEvent(f,v=!1){if(!f.key)return void this.forAllChangedKeys((ee,ke,Me)=>{this.notifyListeners(ee,Me)});const C=f.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ee=this.storage.getItem(C);if(f.newValue!==ee)null!==f.newValue?this.storage.setItem(C,f.newValue):this.storage.removeItem(C);else if(this.localCache[C]===f.newValue&&!v)return}const R=()=>{const ee=this.storage.getItem(C);!v&&this.localCache[C]===ee||this.notifyListeners(C,ee)},U=this.storage.getItem(C);!function kc(){return(0,O.w1)()&&10===document.documentMode}()||U===f.newValue||f.newValue===f.oldValue?R():setTimeout(R,10)}notifyListeners(f,v){this.localCache[f]=v;const C=this.listeners[f];if(C)for(const R of Array.from(C))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,v,C)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:v,newValue:C}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,v){var C=()=>super._set,R=this;return(0,p.Z)(function*(){yield C().call(R,f,v),R.localCache[f]=JSON.stringify(v)})()}_get(f){var v=()=>super._get,C=this;return(0,p.Z)(function*(){const R=yield v().call(C,f);return C.localCache[f]=JSON.stringify(R),R})()}_remove(f){var v=()=>super._remove,C=this;return(0,p.Z)(function*(){yield v().call(C,f),delete C.localCache[f]})()}}return y.type="LOCAL",y})(),Gt=(()=>{class y extends vu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,v){}_removeListener(f,v){}}return y.type="SESSION",y})();let ef=(()=>{class y{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const v=this.receivers.find(R=>R.isListeningto(f));if(v)return v;const C=new y(f);return this.receivers.push(C),C}isListeningto(f){return this.eventTarget===f}handleEvent(f){var v=this;return(0,p.Z)(function*(){const C=f,{eventId:R,eventType:U,data:ee}=C.data,ke=v.handlersMap[U];if(!(null==ke?void 0:ke.size))return;C.ports[0].postMessage({status:"ack",eventId:R,eventType:U});const Me=Array.from(ke).map(function(){var Ke=(0,p.Z)(function*(Ft){return Ft(C.origin,ee)});return function(Ft){return Ke.apply(this,arguments)}}()),We=yield function ki(y){return Promise.all(y.map(function(){var h=(0,p.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(v){return{fulfilled:!1,reason:v}}});return function(f){return h.apply(this,arguments)}}()))}(Me);C.ports[0].postMessage({status:"done",eventId:R,eventType:U,response:We})})()}_subscribe(f,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(v)}_unsubscribe(f,v){this.handlersMap[f]&&v&&this.handlersMap[f].delete(v),(!v||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function mr(y="",h=10){let f="";for(let v=0;v<h;v++)f+=Math.floor(10*Math.random());return y+f}class eo{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,v=50){var C=this;return(0,p.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let U,ee;return new Promise((ke,Me)=>{const We=mr("",20);R.port1.start();const Ke=setTimeout(()=>{Me(new Error("unsupported_event"))},v);ee={messageChannel:R,onMessage(Ft){const er=Ft;if(er.data.eventId===We)switch(er.data.status){case"ack":clearTimeout(Ke),U=setTimeout(()=>{Me(new Error("timeout"))},3e3);break;case"done":clearTimeout(U),ke(er.data.response);break;default:clearTimeout(Ke),clearTimeout(U),Me(new Error("invalid_response"))}}},C.handlers.add(ee),R.port1.addEventListener("message",ee.onMessage),C.target.postMessage({eventType:h,eventId:We,data:f},[R.port2])}).finally(()=>{ee&&C.removeMessageHandler(ee)})})()}}function wn(){return window}function jo(){return void 0!==wn().WorkerGlobalScope&&"function"==typeof wn().importScripts}function ns(){return(ns=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Fi="firebaseLocalStorageDb",$o="firebaseLocalStorage",id="fbase_key";class Xt{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Eu(y,h){return y.transaction([$o],h?"readwrite":"readonly").objectStore($o)}function sd(){const y=indexedDB.open(Fi,1);return new Promise((h,f)=>{y.addEventListener("error",()=>{f(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore($o,{keyPath:id})}catch(C){f(C)}}),y.addEventListener("success",(0,p.Z)(function*(){const v=y.result;v.objectStoreNames.contains($o)?h(v):(v.close(),yield function Al(){const y=indexedDB.deleteDatabase(Fi);return new Xt(y).toPromise()}(),h(yield sd()))}))})}function od(y,h,f){return ad.apply(this,arguments)}function ad(){return(ad=(0,p.Z)(function*(y,h,f){const v=Eu(y,!0).put({[id]:h,value:f});return new Xt(v).toPromise()})).apply(this,arguments)}function Sl(){return(Sl=(0,p.Z)(function*(y,h){const f=Eu(y,!1).get(h),v=yield new Xt(f).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Ns(y,h){const f=Eu(y,!0).delete(h);return new Xt(f).toPromise()}const _i=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,p.Z)(function*(){return f.db||(f.db=yield sd()),f.db})()}_withRetries(f){var v=this;return(0,p.Z)(function*(){let C=0;for(;;)try{const R=yield v._openDb();return yield f(R)}catch(R){if(C++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,p.Z)(function*(){return jo()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,p.Z)(function*(){f.receiver=ef._getInstance(function Cl(){return jo()?self:null}()),f.receiver._subscribe("keyChanged",function(){var v=(0,p.Z)(function*(C,R){return{keyProcessed:(yield f._poll()).includes(R.key)}});return function(C,R){return v.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var v=(0,p.Z)(function*(C,R){return["keyChanged"]});return function(C,R){return v.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,p.Z)(function*(){var v,C;if(f.activeServiceWorker=yield function ts(){return ns.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new eo(f.activeServiceWorker);const R=yield f.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(C=R[0])||void 0===C?void 0:C.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var v=this;return(0,p.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function rs(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:f},v.serviceWorkerReceiverAvailable?800:50)}catch(C){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const f=yield sd();return yield od(f,Vo,"1"),yield Ns(f,Vo),!0}catch(f){}return!1})()}_withPendingWrite(f){var v=this;return(0,p.Z)(function*(){v.pendingWrites++;try{yield f()}finally{v.pendingWrites--}})()}_set(f,v){var C=this;return(0,p.Z)(function*(){return C._withPendingWrite((0,p.Z)(function*(){return yield C._withRetries(R=>od(R,f,v)),C.localCache[f]=v,C.notifyServiceWorker(f)}))})()}_get(f){var v=this;return(0,p.Z)(function*(){const C=yield v._withRetries(R=>function tf(y,h){return Sl.apply(this,arguments)}(R,f));return v.localCache[f]=C,C})()}_remove(f){var v=this;return(0,p.Z)(function*(){return v._withPendingWrite((0,p.Z)(function*(){return yield v._withRetries(C=>Ns(C,f)),delete v.localCache[f],v.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,p.Z)(function*(){const v=yield f._withRetries(U=>{const ee=Eu(U,!1).getAll();return new Xt(ee).toPromise()});if(!v)return[];if(0!==f.pendingWrites)return[];const C=[],R=new Set;for(const{fbase_key:U,value:ee}of v)R.add(U),JSON.stringify(f.localCache[U])!==JSON.stringify(ee)&&(f.notifyListeners(U,ee),C.push(U));for(const U of Object.keys(f.localCache))f.localCache[U]&&!R.has(U)&&(f.notifyListeners(U,null),C.push(U));return C})()}notifyListeners(f,v){this.localCache[f]=v;const C=this.listeners[f];if(C)for(const R of Array.from(C))R(v)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function nf(y,h){return _n(y,"POST","/v2/accounts/mfaSignIn:start",ft(y,h))}function cn(){return(cn=(0,p.Z)(function*(y){return(yield _n(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wu(y){return new Promise((h,f)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=C=>{const R=yn("internal-error");R.customData=C,f(R)},v.type="text/javascript",v.charset="UTF-8",function Ml(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function Ua(y){return`__${y}${Math.floor(1e6*Math.random())}`}const xs=1e12;class Ba{constructor(h){this.auth=h,this.counter=xs,this._widgets=new Map}render(h,f){const v=this.counter;return this._widgets.set(v,new dd(h,this.auth.name,f||{})),this.counter++,v}reset(h){var f;const v=h||xs;null===(f=this._widgets.get(v))||void 0===f||f.delete(),this._widgets.delete(v)}getResponse(h){var f;return(null===(f=this._widgets.get(h||xs))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,p.Z)(function*(){var v;return null===(v=f._widgets.get(h||xs))||void 0===v||v.execute(),""})()}}class dd{constructor(h,f,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const C="string"==typeof h?document.getElementById(h):h;Ae(C,"argument-error",{appName:f}),this.container=C,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ho(y){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(f.charAt(Math.floor(Math.random()*f.length)));return h.join("")}(50);const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xn=Ua("rcb"),Tu=new Rt(3e4,6e4);class s0{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!wn().grecaptcha}load(h,f=""){return Ae(function ag(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(f),h,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(wn().grecaptcha):new Promise((v,C)=>{const R=wn().setTimeout(()=>{C(yn(h,"network-request-failed"))},Tu.get());wn()[Xn]=()=>{wn().clearTimeout(R),delete wn()[Xn];const ee=wn().grecaptcha;if(!ee)return void C(yn(h,"internal-error"));const ke=ee.render;ee.render=(Me,We)=>{const Ke=ke(Me,We);return this.counter++,Ke},this.hostLanguage=f,v(ee)},wu(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Xn,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(R),C(yn(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!wn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Fy{load(h){return(0,p.Z)(function*(){return new Ba(h)})()}clearedOneInstance(){}}const rf="recaptcha",sf={theme:"light",type:"image"};class ro{constructor(h,f=Object.assign({},sf),v){this.parameters=f,this.type=rf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Nn(v),this.isInvisible="invisible"===this.parameters.size,Ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const C="string"==typeof h?document.getElementById(h):h;Ae(C,this.auth,"argument-error"),this.container=C,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Fy:new s0,this.validateStartingState()}verify(){var h=this;return(0,p.Z)(function*(){h.assertNotDestroyed();const f=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(f)||new Promise(R=>{const U=ee=>{!ee||(h.tokenChangeListeners.delete(U),R(ee))};h.tokenChangeListeners.add(U),h.isInvisible&&v.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){Ae(!this.parameters.sitekey,this.auth,"argument-error"),Ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(v=>v(f)),"function"==typeof h)h(f);else if("string"==typeof h){const v=wn()[h];"function"==typeof v&&v(f)}}}assertNotDestroyed(){Ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,p.Z)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const v=document.createElement("div");f.appendChild(v),f=v}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,p.Z)(function*(){Ae(tt()&&!jo(),h.auth,"internal-error"),yield function hd(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function Pn(y){return cn.apply(this,arguments)}(h.auth);Ae(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return Ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class bu{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=Kt._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function yr(){return(yr=(0,p.Z)(function*(y,h,f){const v=Nn(y),C=yield io(v,h,(0,O.m9)(f));return new bu(C,R=>du(v,R))})).apply(this,arguments)}function ur(){return(ur=(0,p.Z)(function*(y,h,f){const v=(0,O.m9)(y);yield Js(!1,v,"phone");const C=yield io(v.auth,h,(0,O.m9)(f));return new bu(C,R=>Da(v,R))})).apply(this,arguments)}function $a(){return($a=(0,p.Z)(function*(y,h,f){const v=(0,O.m9)(y),C=yield io(v.auth,h,(0,O.m9)(f));return new bu(C,R=>mi(v,R))})).apply(this,arguments)}function io(y,h,f){return Go.apply(this,arguments)}function Go(){return(Go=(0,p.Z)(function*(y,h,f){var v;const C=yield f.verify();try{let R;if(Ae("string"==typeof C,y,"argument-error"),Ae(f.type===rf,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const U=R.session;if("phoneNumber"in R)return Ae("enroll"===U.type,y,"internal-error"),(yield rd(y,{idToken:U.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:C}})).phoneSessionInfo.sessionInfo;{Ae("signin"===U.type,y,"internal-error");const ee=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return Ae(ee,y,"missing-multi-factor-info"),(yield nf(y,{mfaPendingCredential:U.credential,mfaEnrollmentId:ee,phoneSignInInfo:{recaptchaToken:C}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:U}=yield gi(y,{phoneNumber:R.phoneNumber,recaptchaToken:C});return U}}finally{f._reset()}})).apply(this,arguments)}function xl(){return(xl=(0,p.Z)(function*(y,h){yield uu((0,O.m9)(y),h)})).apply(this,arguments)}let b=(()=>{class y{constructor(f){this.providerId=y.PROVIDER_ID,this.auth=Nn(f)}verifyPhoneNumber(f,v){return io(this.auth,f,(0,O.m9)(v))}static credential(f,v){return Kt._fromVerification(f,v)}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:v,temporaryProof:C}=f;return v&&C?Kt._fromTokenResponse(v,C):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function I(y,h){return h?zt(h):(Ae(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class N extends ga{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Cs(h,this._buildIdpRequest())}_linkToIdToken(h,f){return Cs(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return Cs(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function F(y){return lu(y.auth,new N(y),y.bypassAuthState)}function z(y){const{auth:h,user:f}=y;return Ae(f,h,"internal-error"),Sr(f,new N(y),y.bypassAuthState)}function ie(y){return Se.apply(this,arguments)}function Se(){return(Se=(0,p.Z)(function*(y){const{auth:h,user:f}=y;return Ae(f,h,"internal-error"),uu(f,new N(y),y.bypassAuthState)})).apply(this,arguments)}class Ge{constructor(h,f,v,C,R=!1){this.auth=h,this.resolver=v,this.user=C,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,p.Z)(function*(v,C){h.pendingPromise={resolve:v,reject:C};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(v,C){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,p.Z)(function*(){const{urlResponse:v,sessionId:C,postBody:R,tenantId:U,error:ee,type:ke}=h;if(ee)return void f.reject(ee);const Me={auth:f.auth,requestUri:v,sessionId:C,tenantId:U||void 0,postBody:R||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(ke)(Me))}catch(We){f.reject(We)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return F;case"linkViaPopup":case"linkViaRedirect":return ie;case"reauthViaPopup":case"reauthViaRedirect":return z;default:$t(this.auth,"internal-error")}}resolve(h){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qe=new Rt(2e3,1e4);function qt(){return(qt=(0,p.Z)(function*(y,h,f){const v=Nn(y);Br(y,h,Hn);const C=I(v,f);return new _r(v,"signInViaPopup",h,C).executeNotNull()})).apply(this,arguments)}function Mn(){return(Mn=(0,p.Z)(function*(y,h,f){const v=(0,O.m9)(y);Br(v.auth,h,Hn);const C=I(v.auth,f);return new _r(v.auth,"reauthViaPopup",h,C,v).executeNotNull()})).apply(this,arguments)}function Li(){return(Li=(0,p.Z)(function*(y,h,f){const v=(0,O.m9)(y);Br(v.auth,h,Hn);const C=I(v.auth,f);return new _r(v.auth,"linkViaPopup",h,C,v).executeNotNull()})).apply(this,arguments)}let _r=(()=>{class y extends Ge{constructor(f,v,C,R,U){super(f,v,R,U),this.provider=C,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var f=this;return(0,p.Z)(function*(){const v=yield f.execute();return Ae(v,f.auth,"internal-error"),v})()}onExecution(){var f=this;return(0,p.Z)(function*(){Je(1===f.filter.length,"Popup operations only handle one event");const v=mr();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],v),f.authWindow.associatedEvent=v,f.resolver._originValidation(f.auth).catch(C=>{f.reject(C)}),f.resolver._isIframeWebStorageSupported(f.auth,C=>{C||f.reject(yn(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const f=()=>{var v,C;this.pollId=(null===(C=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===C?void 0:C.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,qe.get())};f()}}return y.currentPopupAction=null,y})();const vi=new Map;class Vi extends Ge{constructor(h,f,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,p.Z)(function*(){let v=vi.get(f.auth._key());if(!v){try{const R=(yield function qo(y,h){return Iu.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;v=()=>Promise.resolve(R)}catch(C){v=()=>Promise.reject(C)}vi.set(f.auth._key(),v)}return f.bypassAuthState||vi.set(f.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,v=this;return(0,p.Z)(function*(){if("signInViaRedirect"===h.type)return f().call(v,h);if("unknown"!==h.type){if(h.eventId){const C=yield v.auth._redirectUserForId(h.eventId);if(C)return v.user=C,f().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function Iu(){return(Iu=(0,p.Z)(function*(y,h){const f=af(h),v=so(y);if(!(yield v._isAvailable()))return!1;const C="true"===(yield v._get(f));return yield v._remove(f),C})).apply(this,arguments)}function fd(y,h){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,p.Z)(function*(y,h){return so(y)._set(af(h),"true")})).apply(this,arguments)}function so(y){return zt(y._redirectPersistence)}function af(y){return Ht("pendingRedirect",y.config.apiKey,y.name)}function pd(){return(pd=(0,p.Z)(function*(y,h,f){const v=Nn(y);Br(y,h,Hn);const C=I(v,f);return yield fd(C,v),C._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function Cu(){return(Cu=(0,p.Z)(function*(y,h,f){const v=(0,O.m9)(y);Br(v.auth,h,Hn);const C=I(v.auth,f);yield fd(C,v.auth);const R=yield yd(v);return C._openRedirect(v.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function oo(){return(oo=(0,p.Z)(function*(y,h,f){const v=(0,O.m9)(y);Br(v.auth,h,Hn);const C=I(v.auth,f);yield Js(!1,v,h.providerId),yield fd(C,v.auth);const R=yield yd(v);return C._openRedirect(v.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function md(){return(md=(0,p.Z)(function*(y,h){return yield Nn(y)._initializationPromise,cf(y,h,!1)})).apply(this,arguments)}function cf(y,h){return Vy.apply(this,arguments)}function Vy(){return(Vy=(0,p.Z)(function*(y,h,f=!1){const v=Nn(y),C=I(v,h),U=yield new Vi(v,C,f).execute();return U&&!f&&(delete U.user._redirectEventId,yield v._persistUserIfCurrent(U.user),yield v._setRedirectUser(null,h)),U})).apply(this,arguments)}function yd(y){return _d.apply(this,arguments)}function _d(){return(_d=(0,p.Z)(function*(y){const h=mr(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class vd{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(f=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function dg(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ao(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var v;if(h.error&&!ao(h)){const C=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";f.onError(yn(this.auth,C))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const v=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(df(h))}saveEventToCache(h){this.cachedEventUids.add(df(h)),this.lastProcessedEventTime=Date.now()}}function df(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function ao({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function hf(y){return ff.apply(this,arguments)}function ff(){return(ff=(0,p.Z)(function*(y,h={}){return _n(y,"GET","/v1/projects",h)})).apply(this,arguments)}const hg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Uy=/^https?/;function uo(){return(uo=(0,p.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield hf(y);for(const f of h)try{if(fg(f))return}catch(v){}$t(y,"unauthorized-domain")})).apply(this,arguments)}function fg(y){const h=ht(),{protocol:f,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const U=new URL(y);return""===U.hostname&&""===v?"chrome-extension:"===f&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&U.hostname===v}if(!Uy.test(f))return!1;if(hg.test(y))return v===y;const C=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+C+"|"+C+")$","i").test(v)}const pg=new Rt(3e4,6e4);function gg(){const y=wn().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let f=0;f<y.CP.length;f++)y.CP[f]=null}let Au=null;function By(y){return Au=Au||function mg(y){return new Promise((h,f)=>{var v,C,R;function U(){gg(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{gg(),f(yn(y,"network-request-failed"))},timeout:pg.get()})}if(null===(C=null===(v=wn().gapi)||void 0===v?void 0:v.iframes)||void 0===C?void 0:C.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=wn().gapi)||void 0===R?void 0:R.load)){const ee=Ua("iframefcb");return wn()[ee]=()=>{gapi.load?U():f(yn(y,"network-request-failed"))},wu(`https://apis.google.com/js/api.js?onload=${ee}`).catch(ke=>f(ke))}U()}}).catch(h=>{throw Au=null,h})}(y),Au}const pf=new Rt(5e3,15e3),$y={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function o0(y){const h=y.config;Ae(h.authDomain,y,"auth-domain-config-required");const f=h.emulator?Xe(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:se.SDK_VERSION},C=gf.get(y.config.apiHost);C&&(v.eid=C);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${f}?${(0,O.xO)(v).slice(1)}`}function Zo(){return Zo=(0,p.Z)(function*(y){const h=yield By(y),f=wn().gapi;return Ae(f,y,"internal-error"),h.open({where:document.body,url:o0(y),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$y,dontclear:!0},v=>new Promise(function(){var C=(0,p.Z)(function*(R,U){yield v.restyle({setHideOnLeave:!1});const ee=yn(y,"network-request-failed"),ke=wn().setTimeout(()=>{U(ee)},pf.get());function Me(){wn().clearTimeout(ke),R(v)}v.ping(Me).then(Me,()=>{U(ee)})});return function(R,U){return C.apply(this,arguments)}}()))}),Zo.apply(this,arguments)}const yg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class kl{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function wd(y,h,f,v,C,R){Ae(y.config.authDomain,y,"auth-domain-config-required"),Ae(y.config.apiKey,y,"invalid-api-key");const U={apiKey:y.config.apiKey,appName:y.name,authType:f,redirectUrl:v,v:se.SDK_VERSION,eventId:C};if(h instanceof Hn){h.setDefaultLanguage(y.languageCode),U.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(U.customParameters=JSON.stringify(h.getCustomParameters()));for(const[ke,Me]of Object.entries(R||{}))U[ke]=Me}if(h instanceof xn){const ke=h.getScopes().filter(Me=>""!==Me);ke.length>0&&(U.scopes=ke.join(","))}y.tenantId&&(U.tid=y.tenantId);const ee=U;for(const ke of Object.keys(ee))void 0===ee[ke]&&delete ee[ke];return`${function Fl({config:y}){return y.emulator?Xe(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ee).slice(1)}`}const vg="webStorageSupport";class vf extends class Ll{constructor(h){this.factorId=h}_process(h,f,v){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,v);case"signin":return this._finalizeSignIn(h,f.credential);default:return ir("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new vf(h)}_finalizeEnroll(h,f,v){return function Fo(y,h){return _n(y,"POST","/v2/accounts/mfaEnrollment:finalize",ft(y,h))}(h,{idToken:f,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function ld(y,h){return _n(y,"POST","/v2/accounts/mfaSignIn:finalize",ft(y,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Eg=(()=>{class y{constructor(){}static assertion(f){return vf._fromCredential(f)}}return y.FACTOR_ID="phone",y})();var wg="@firebase/auth";class Dd{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,p.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(v=>{var C;h((null===(C=v)||void 0===C?void 0:C.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);!f||(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function dn(){return window}function Su(){return(Su=(0,p.Z)(function*(y,h,f){var v;const{BuildInfo:C}=dn();Je(h.sessionId,"AuthEvent did not contain a session ID");const R=yield nD(h.sessionId),U={};return Mi()?U.ibi=C.packageName:Si()?U.apn=C.packageName:$t(y,"operation-not-supported-in-this-environment"),C.displayName&&(U.appDisplayName=C.displayName),U.sessionId=R,wd(y,f,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,U)})).apply(this,arguments)}function Ul(){return(Ul=(0,p.Z)(function*(y){const{BuildInfo:h}=dn(),f={};Mi()?f.iosBundleId=h.packageName:Si()?f.androidPackageName=h.packageName:$t(y,"operation-not-supported-in-this-environment"),yield hf(y,f)})).apply(this,arguments)}function Ig(){return(Ig=(0,p.Z)(function*(y,h,f){const{cordova:v}=dn();let C=()=>{};try{yield new Promise((R,U)=>{let ee=null;function ke(){var Ke;R();const Ft=null===(Ke=v.plugins.browsertab)||void 0===Ke?void 0:Ke.close;"function"==typeof Ft&&Ft(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function Me(){ee||(ee=window.setTimeout(()=>{U(yn(y,"redirect-cancelled-by-user"))},2e3))}function We(){"visible"===(null==document?void 0:document.visibilityState)&&Me()}h.addPassiveListener(ke),document.addEventListener("resume",Me,!1),Si()&&document.addEventListener("visibilitychange",We,!1),C=()=>{h.removePassiveListener(ke),document.removeEventListener("resume",Me,!1),document.removeEventListener("visibilitychange",We,!1),ee&&window.clearTimeout(ee)}})}finally{C()}})).apply(this,arguments)}function nD(y){return Cg.apply(this,arguments)}function Cg(){return(Cg=(0,p.Z)(function*(y){const h=Id(y),f=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(f)).map(C=>C.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Id(y){if(Je(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),f=new Uint8Array(h);for(let v=0;v<y.length;v++)f[v]=y.charCodeAt(v);return f}!function Vl(y){(0,se._registerComponent)(new le.wA("auth",(h,{options:f})=>{const v=h.getProvider("app").getImmediate(),{apiKey:C,authDomain:R}=v.options;return(U=>{Ae(C&&!C.includes(":"),"invalid-api-key",{appName:U.name}),Ae(!(null==R?void 0:R.includes(":")),"argument-error",{appName:U.name});const ee={apiKey:C,authDomain:R,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fi(y)},ke=new Fc(U,ee);return function Gs(y,h){const f=(null==h?void 0:h.persistence)||[],v=(Array.isArray(f)?f:[f]).map(zt);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(ke,f),ke})(v)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,v)=>{h.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new le.wA("auth-internal",h=>{const f=Nn(h.getProvider("auth").getImmediate());return new Dd(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(wg,"0.19.8",function Tg(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(wg,"0.19.8","esm2017")}("Browser");class wf extends vd{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(h)),super.onEvent(h)}initialized(){var h=this;return(0,p.Z)(function*(){yield h.initPromise})()}}function hn(y){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,p.Z)(function*(y){const h=yield ss()._get(Ad(y));return h&&(yield ss()._remove(Ad(y))),h})).apply(this,arguments)}function Zy(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function ss(){return zt(Xr)}function Ad(y){return Ht("authEvent",y.config.apiKey,y.name)}function Bl(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...f]=y.split("?");return(0,O.zd)(f.join("?"))}function jl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:yn("no-auth-event")}}function bf(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Ha(y=(0,O.z$)()){return!("file:"!==bf()&&"ionic:"!==bf()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Os(){try{const y=self.localStorage,h=mr();if(y)return y.setItem(h,"1"),y.removeItem(h),!function If(y=(0,O.z$)()){return function Df(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Ng(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return Sd()&&(0,O.hl)()}return!1}function Sd(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function $l(){return(function Ru(){return"http:"===bf()||"https:"===bf()}()||(0,O.ru)()||Ha())&&!function Rg(){return(0,O.b$)()||(0,O.UG)()}()&&Os()&&!Sd()}function Md(){return Ha()&&"undefined"!=typeof document}function xr(){return(xr=(0,p.Z)(function*(){return!!Md()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const qr={LOCAL:"local",NONE:"none",SESSION:"session"},Nu=Ae,xu="persistence";function Qo(y){return Af.apply(this,arguments)}function Af(){return(Af=(0,p.Z)(function*(y){yield y._initializationPromise;const h=Qy(),f=Ht(xu,y.config.apiKey,y.name);h&&h.setItem(f,y._getPersistence())})).apply(this,arguments)}function Qy(){var y;try{return(null===(y=function xg(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const Bi=Ae;class ji{constructor(){this.browserResolver=zt(class Gy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gt,this._completeRedirectFn=cf}_openPopup(h,f,v,C){var R=this;return(0,p.Z)(function*(){var U;Je(null===(U=R.eventManagers[h._key()])||void 0===U?void 0:U.manager,"_initialize() not called before _openPopup()");const ee=wd(h,f,v,ht(),C);return function a0(y,h,f,v=500,C=600){const R=Math.max((window.screen.availHeight-C)/2,0).toString(),U=Math.max((window.screen.availWidth-v)/2,0).toString();let ee="";const ke=Object.assign(Object.assign({},yg),{width:v.toString(),height:C.toString(),top:R,left:U}),Me=(0,O.z$)().toLowerCase();f&&(ee=Zs(Me)?"_blank":f),Dt(Me)&&(h=h||"http://localhost",ke.scrollbars="yes");const We=Object.entries(ke).reduce((Ft,[er,$i])=>`${Ft}${er}=${$i},`,"");if(function sn(y=(0,O.z$)()){var h;return Mi(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Me)&&"_self"!==ee)return function u0(y,h){const f=document.createElement("a");f.href=y,f.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(v)}(h||"",ee),new kl(null);const Ke=window.open(h||"",ee,We);Ae(Ke,y,"popup-blocked");try{Ke.focus()}catch(Ft){}return new kl(Ke)}(h,ee,mr())})()}_openRedirect(h,f,v,C){var R=this;return(0,p.Z)(function*(){return yield R._originValidation(h),function Bo(y){wn().location.href=y}(wd(h,f,v,ht(),C)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:C,promise:R}=this.eventManagers[f];return C?Promise.resolve(C):(Je(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(h);return this.eventManagers[f]={promise:v},v.catch(()=>{delete this.eventManagers[f]}),v}initAndGetManager(h){var f=this;return(0,p.Z)(function*(){const v=yield function mf(y){return Zo.apply(this,arguments)}(h),C=new vd(h);return v.register("authEvent",R=>(Ae(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:C.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:C},f.iframes[h._key()]=v,C})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(vg,{type:vg},C=>{var R;const U=null===(R=null==C?void 0:C[0])||void 0===R?void 0:R[vg];void 0!==U&&f(!!U),$t(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Ko(y){return uo.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return Io()||bo()||Mi()}}),this.cordovaResolver=zt(class Tf{constructor(){this._redirectPersistence=Gt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=cf}_initialize(h){var f=this;return(0,p.Z)(function*(){const v=h._key();let C=f.eventManagers.get(v);return C||(C=new wf(h),f.eventManagers.set(v,C),f.attachCallbackListeners(h,C)),C})()}_openPopup(h){$t(h,"operation-not-supported-in-this-environment")}_openRedirect(h,f,v,C){var R=this;return(0,p.Z)(function*(){!function l0(y){var h,f,v,C,R,U,ee,ke,Me,We;const Ke=dn();Ae("function"==typeof(null===(h=null==Ke?void 0:Ke.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ae(void 0!==(null===(f=null==Ke?void 0:Ke.BuildInfo)||void 0===f?void 0:f.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ae("function"==typeof(null===(R=null===(C=null===(v=null==Ke?void 0:Ke.cordova)||void 0===v?void 0:v.plugins)||void 0===C?void 0:C.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(ke=null===(ee=null===(U=null==Ke?void 0:Ke.cordova)||void 0===U?void 0:U.plugins)||void 0===ee?void 0:ee.browsertab)||void 0===ke?void 0:ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(We=null===(Me=null==Ke?void 0:Ke.cordova)||void 0===Me?void 0:Me.InAppBrowser)||void 0===We?void 0:We.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const U=yield R._initialize(h);yield U.initialized(),U.resetRedirect(),function zo(){vi.clear()}(),yield R._originValidation(h);const ee=function Ag(y,h,f=null){return{type:h,eventId:f,urlResponse:null,sessionId:Zy(),postBody:null,tenantId:y.tenantId,error:yn(y,"no-auth-event")}}(h,v,C);yield function Ky(y,h){return ss()._set(Ad(y),h)}(h,ee);const ke=yield function zy(y,h,f){return Su.apply(this,arguments)}(h,ee,f),Me=yield function Wy(y){const{cordova:h}=dn();return new Promise(f=>{h.plugins.browsertab.isAvailable(v=>{let C=null;v?h.plugins.browsertab.openUrl(y):C=h.InAppBrowser.open(y,function or(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),f(C)})})}(ke);return function Dg(y,h,f){return Ig.apply(this,arguments)}(h,U,Me)})()}_isIframeWebStorageSupported(h,f){throw new Error("Method not implemented.")}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function bg(y){return Ul.apply(this,arguments)}(h)),this.originValidationPromises[f]}attachCallbackListeners(h,f){const{universalLinks:v,handleOpenURL:C,BuildInfo:R}=dn(),U=setTimeout((0,p.Z)(function*(){yield hn(h),f.onEvent(jl())}),500),ee=function(){var We=(0,p.Z)(function*(Ke){clearTimeout(U);const Ft=yield hn(h);let er=null;Ft&&(null==Ke?void 0:Ke.url)&&(er=function Cd(y,h){var f,v;const C=function Yy(y){const h=Bl(y),f=h.link?decodeURIComponent(h.link):void 0,v=Bl(f).link,C=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Bl(C).link||C||v||f||y}(h);if(C.includes("/__/auth/callback")){const R=Bl(C),U=R.firebaseError?function Sg(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,ee=null===(v=null===(f=null==U?void 0:U.code)||void 0===f?void 0:f.split("auth/"))||void 0===v?void 0:v[1],ke=ee?yn(ee):null;return ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:C,postBody:null}}return null}(Ft,Ke.url)),f.onEvent(er||jl())});return function(Ft){return We.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,ee);const ke=C,Me=`${R.packageName.toLowerCase()}://`;dn().handleOpenURL=function(){var We=(0,p.Z)(function*(Ke){if(Ke.toLowerCase().startsWith(Me)&&ee({url:Ke}),"function"==typeof ke)try{ke(Ke)}catch(Ft){console.error(Ft)}});return function(Ke){return We.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Gt,this._completeRedirectFn=cf}_initialize(h){var f=this;return(0,p.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,f,v,C){var R=this;return(0,p.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,f,v,C)})()}_openRedirect(h,f,v,C){var R=this;return(0,p.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,f,v,C)})()}_isIframeWebStorageSupported(h,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,f)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Md()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Bi(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,p.Z)(function*(){if(h.underlyingResolver)return;const f=yield function Cf(){return xr.apply(this,arguments)}();h.underlyingResolver=f?h.cordovaResolver:h.browserResolver})()}}function Hl(y){return y.unwrap()}function Nd(y){return xd(y)}function xd(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return b.credentialFromResult(y);const f=h.providerId;if(!f||"password"===f)return null;let v;switch(f){case"google.com":v=Ni;break;case"facebook.com":v=So;break;case"github.com":v=Cr;break;case"twitter.com":v=Ss;break;default:const{oauthIdToken:C,oauthAccessToken:R,oauthTokenSecret:U,pendingToken:ee,nonce:ke}=h;return R||U||C||ee?ee?f.startsWith("saml.")?xi._create(f,ee):pr._fromParams({providerId:f,signInMethod:f,pendingToken:ee,idToken:C,accessToken:R}):new Qi(f).credential({idToken:C,accessToken:R,rawNonce:ke}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function zr(y,h){return h.catch(f=>{throw f instanceof O.ZR&&function Gl(y,h){var f;const v=null===(f=h.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new ql(y,function Tl(y,h){var f;const v=(0,O.m9)(y),C=h;return Ae(h.customData.operationType,v,"argument-error"),Ae(null===(f=C.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,v,"argument-error"),Fa._fromError(v,C)}(y,h));else if(v){const C=xd(h),R=h;C&&(R.credential=C,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,f),f}).then(f=>{const C=f.user;return{operationType:f.operationType,credential:Nd(f),additionalUserInfo:ar(f),user:os.getOrCreate(C)}})}function Ga(y,h){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,p.Z)(function*(y,h){const f=yield h;return{verificationId:f.verificationId,confirm:v=>zr(y,f.confirm(v))}})).apply(this,arguments)}class ql{constructor(h,f){this.resolver=f,this.auth=function Og(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return zr(Hl(this.auth),this.resolver.resolveSignIn(h))}}class os{constructor(h){this._delegate=h,this.multiFactor=function Gr(y){const h=(0,O.m9)(y);return Rr.has(h)||Rr.set(h,Lo._fromUser(h)),Rr.get(h)}(h)}static getOrCreate(h){return os.USER_MAP.has(h)||os.USER_MAP.set(h,new os(h)),os.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var f=this;return(0,p.Z)(function*(){return zr(f.auth,Da(f._delegate,h))})()}linkWithPhoneNumber(h,f){var v=this;return(0,p.Z)(function*(){return Ga(v.auth,function Du(y,h,f){return ur.apply(this,arguments)}(v._delegate,h,f))})()}linkWithPopup(h){var f=this;return(0,p.Z)(function*(){return zr(f.auth,function en(y,h,f){return Li.apply(this,arguments)}(f._delegate,h,ji))})()}linkWithRedirect(h){var f=this;return(0,p.Z)(function*(){return yield Qo(Nn(f.auth)),function lg(y,h,f){return function gd(y,h,f){return oo.apply(this,arguments)}(y,h,f)}(f._delegate,h,ji)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var f=this;return(0,p.Z)(function*(){return zr(f.auth,mi(f._delegate,h))})()}reauthenticateWithPhoneNumber(h,f){return Ga(this.auth,function ja(y,h,f){return $a.apply(this,arguments)}(this._delegate,h,f))}reauthenticateWithPopup(h){return zr(this.auth,function ei(y,h,f){return Mn.apply(this,arguments)}(this._delegate,h,ji))}reauthenticateWithRedirect(h){var f=this;return(0,p.Z)(function*(){return yield Qo(Nn(f.auth)),function ug(y,h,f){return function lf(y,h,f){return Cu.apply(this,arguments)}(y,h,f)}(f._delegate,h,ji)})()}sendEmailVerification(h){return function vl(y,h){return Rs.apply(this,arguments)}(this._delegate,h)}unlink(h){var f=this;return(0,p.Z)(function*(){return yield function Ie(y,h){return xt.apply(this,arguments)}(f._delegate,h),f})()}updateEmail(h){return function Yh(y,h){return xa((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function og(y,h){return xa((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function of(y,h){return xl.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function es(y,h){return En.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,f){return function mu(y,h,f){return yu.apply(this,arguments)}(this._delegate,h,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}os.USER_MAP=new WeakMap;const as=Ae;let Ou=(()=>{class y{constructor(f,v){if(this.app=f,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:C}=f.options;as(C,"invalid-api-key",{appName:f.name}),as(C,"invalid-api-key",{appName:f.name});const R="undefined"!=typeof window?ji:void 0;this._delegate=v.initialize({options:{persistence:Sf(C,f.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Tr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?os.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,v){!function Ri(y,h,f){const v=Nn(y);Ae(v._canInitEmulator,v,"emulator-config-failed"),Ae(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const C=!!(null==f?void 0:f.disableWarnings),R=Lc(h),{host:U,port:ee}=function tg(y){const h=Lc(y),f=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!f)return{host:"",port:null};const v=f[2].split("@").pop()||"",C=/^(\[[^\]]+\])(:|$)/.exec(v);if(C){const R=C[1];return{host:R,port:$h(v.substr(R.length+1))}}{const[R,U]=v.split(":");return{host:R,port:$h(U)}}}(h);v.config.emulator={url:`${R}//${U}${null===ee?"":`:${ee}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:U,port:ee,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:C})}),C||function pi(){function y(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,f,v)}applyActionCode(f){return function ml(y,h){return ko.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Qc(this._delegate,f)}confirmPasswordReset(f,v){return function Sa(y,h,f){return pu.apply(this,arguments)}(this._delegate,f,v)}createUserWithEmailAndPassword(f,v){var C=this;return(0,p.Z)(function*(){return zr(C._delegate,function gu(y,h,f){return Jc.apply(this,arguments)}(C._delegate,f,v))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function Xc(y,h){return Kh.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function vn(y,h){const f=on.parseLink(h);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,p.Z)(function*(){as($l(),f._delegate,"operation-not-supported-in-this-environment");const v=yield function Wo(y,h){return md.apply(this,arguments)}(f._delegate,ji);return v?zr(f._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function d0(y,h){Nn(y)._logFramework(h)}(this._delegate,f)}onAuthStateChanged(f,v,C){const{next:R,error:U,complete:ee}=lo(f,v,C);return this._delegate.onAuthStateChanged(R,U,ee)}onIdTokenChanged(f,v,C){const{next:R,error:U,complete:ee}=lo(f,v,C);return this._delegate.onIdTokenChanged(R,U,ee)}sendSignInLinkToEmail(f,v){return function Jn(y,h,f){return On.apply(this,arguments)}(this._delegate,f,v)}sendPasswordResetEmail(f,v){return function Ca(y,h,f){return Aa.apply(this,arguments)}(this._delegate,f,v||void 0)}setPersistence(f){var v=this;return(0,p.Z)(function*(){let C;switch(function Ps(y,h){Nu(Object.values(qr).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Nu(h!==qr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Nu(h===qr.NONE,y,"unsupported-persistence-type"):Sd()?Nu(h===qr.NONE||h===qr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Nu(h===qr.NONE||Os(),y,"unsupported-persistence-type")}(v._delegate,f),f){case qr.SESSION:C=Gt;break;case qr.LOCAL:C=(yield zt(_i)._isAvailable())?_i:Xr;break;case qr.NONE:C=Ir;break;default:return $t("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(C)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return zr(this._delegate,function ba(y){return Ro.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return zr(this._delegate,du(this._delegate,f))}signInWithCustomToken(f){return zr(this._delegate,function Yc(y,h){return Oo.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,v){return zr(this._delegate,function sg(y,h,f){return du((0,O.m9)(y),Ao.credential(h,f))}(this._delegate,f,v))}signInWithEmailLink(f,v){return zr(this._delegate,function _l(y,h,f){return Na.apply(this,arguments)}(this._delegate,f,v))}signInWithPhoneNumber(f,v){return Ga(this._delegate,function Nl(y,h,f){return yr.apply(this,arguments)}(this._delegate,f,v))}signInWithPopup(f){var v=this;return(0,p.Z)(function*(){return as($l(),v._delegate,"operation-not-supported-in-this-environment"),zr(v._delegate,function Vt(y,h,f){return qt.apply(this,arguments)}(v._delegate,f,ji))})()}signInWithRedirect(f){var v=this;return(0,p.Z)(function*(){return as($l(),v._delegate,"operation-not-supported-in-this-environment"),yield Qo(v._delegate),function Ly(y,h,f){return function uf(y,h,f){return pd.apply(this,arguments)}(y,h,f)}(v._delegate,f,ji)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function yl(y,h){return Ra.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=qr,y})();function lo(y,h,f){let v=y;"function"!=typeof y&&({next:v,error:h,complete:f}=y);const C=v;return{next:U=>C(U&&os.getOrCreate(U)),error:h,complete:f}}function Sf(y,h){const f=function Rd(y,h){const f=Qy();if(!f)return[];const v=Ht(xu,y,h);switch(f.getItem(v)){case qr.NONE:return[Ir];case qr.LOCAL:return[_i,Gt];case qr.SESSION:return[Gt];default:return[]}}(y,h);if("undefined"!=typeof self&&!f.includes(_i)&&f.push(_i),"undefined"!=typeof window)for(const v of[Xr,Gt])f.includes(v)||f.push(v);return f.includes(Ir)||f.push(Ir),f}class Xo{constructor(){this.providerId="phone",this._delegate=new b(Hl(Y.Z.auth()))}static credential(h,f){return b.credential(h,f)}verifyPhoneNumber(h,f){return this._delegate.verifyPhoneNumber(h,f)}unwrap(){return this._delegate}}Xo.PHONE_SIGN_IN_METHOD=b.PHONE_SIGN_IN_METHOD,Xo.PROVIDER_ID=b.PROVIDER_ID;const Jy=Ae;class Pu{constructor(h,f,v=Y.Z.app()){var C;Jy(null===(C=v.options)||void 0===C?void 0:C.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new ro(h,f,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ea(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",h=>{const f=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new Ou(f,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ao,FacebookAuthProvider:So,GithubAuthProvider:Cr,GoogleAuthProvider:Ni,OAuthProvider:Qi,SAMLAuthProvider:Ar,PhoneAuthProvider:Xo,PhoneMultiFactorGenerator:Eg,RecaptchaVerifier:Pu,TwitterAuthProvider:Ss,Auth:Ou,AuthCredential:ga,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.8")}(Y.Z)},2940:function(st,De){!function(P){"use strict";function p(K){return Array.prototype.slice.call(K)}function Y(K){return new Promise(function(te,pe){K.onsuccess=function(){te(K.result)},K.onerror=function(){pe(K.error)}})}function O(K,te,pe){var we,ge=new Promise(function(Be,Te){Y(we=K[te].apply(K,pe)).then(Be,Te)});return ge.request=we,ge}function se(K,te,pe){var we=O(K,te,pe);return we.then(function(ge){if(ge)return new j(ge,we.request)})}function ne(K,te,pe){pe.forEach(function(we){Object.defineProperty(K.prototype,we,{get:function(){return this[te][we]},set:function(ge){this[te][we]=ge}})})}function ce(K,te,pe,we){we.forEach(function(ge){ge in pe.prototype&&(K.prototype[ge]=function(){return O(this[te],ge,arguments)})})}function re(K,te,pe,we){we.forEach(function(ge){ge in pe.prototype&&(K.prototype[ge]=function(){return this[te][ge].apply(this[te],arguments)})})}function oe(K,te,pe,we){we.forEach(function(ge){ge in pe.prototype&&(K.prototype[ge]=function(){return se(this[te],ge,arguments)})})}function ue(K){this._index=K}function j(K,te){this._cursor=K,this._request=te}function B(K){this._store=K}function J(K){this._tx=K,this.complete=new Promise(function(te,pe){K.oncomplete=function(){te()},K.onerror=function(){pe(K.error)},K.onabort=function(){pe(K.error)}})}function Ue(K,te,pe){this._db=K,this.oldVersion=te,this.transaction=new J(pe)}function Ee(K){this._db=K}ne(ue,"_index",["name","keyPath","multiEntry","unique"]),ce(ue,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),oe(ue,"_index",IDBIndex,["openCursor","openKeyCursor"]),ne(j,"_cursor",["direction","key","primaryKey","value"]),ce(j,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(K){K in IDBCursor.prototype&&(j.prototype[K]=function(){var te=this,pe=arguments;return Promise.resolve().then(function(){return te._cursor[K].apply(te._cursor,pe),Y(te._request).then(function(we){if(we)return new j(we,te._request)})})})}),B.prototype.createIndex=function(){return new ue(this._store.createIndex.apply(this._store,arguments))},B.prototype.index=function(){return new ue(this._store.index.apply(this._store,arguments))},ne(B,"_store",["name","keyPath","indexNames","autoIncrement"]),ce(B,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),oe(B,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),re(B,"_store",IDBObjectStore,["deleteIndex"]),J.prototype.objectStore=function(){return new B(this._tx.objectStore.apply(this._tx,arguments))},ne(J,"_tx",["objectStoreNames","mode"]),re(J,"_tx",IDBTransaction,["abort"]),Ue.prototype.createObjectStore=function(){return new B(this._db.createObjectStore.apply(this._db,arguments))},ne(Ue,"_db",["name","version","objectStoreNames"]),re(Ue,"_db",IDBDatabase,["deleteObjectStore","close"]),Ee.prototype.transaction=function(){return new J(this._db.transaction.apply(this._db,arguments))},ne(Ee,"_db",["name","version","objectStoreNames"]),re(Ee,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(K){[B,ue].forEach(function(te){K in te.prototype&&(te.prototype[K.replace("open","iterate")]=function(){var pe=p(arguments),we=pe[pe.length-1],ge=this._store||this._index,Be=ge[K].apply(ge,pe.slice(0,-1));Be.onsuccess=function(){we(Be.result)}})})}),[ue,B].forEach(function(K){K.prototype.getAll||(K.prototype.getAll=function(te,pe){var we=this,ge=[];return new Promise(function(Be){we.iterateCursor(te,function(Te){Te?(ge.push(Te.value),void 0===pe||ge.length!=pe?Te.continue():Be(ge)):Be(ge)})})})}),P.openDb=function Oe(K,te,pe){var we=O(indexedDB,"open",[K,te]),ge=we.request;return ge&&(ge.onupgradeneeded=function(Be){pe&&pe(new Ue(ge.result,Be.oldVersion,ge.transaction))}),we.then(function(Be){return new Ee(Be)})},P.deleteDb=function Ve(K){return O(indexedDB,"deleteDatabase",[K])},Object.defineProperty(P,"__esModule",{value:!0})}(De)},8306:(st,De,P)=>{"use strict";P.d(De,{y:()=>j});var p=P(2961),Y=P(727),O=P(8822),se=P(4671);var re=P(2416),oe=P(576),ue=P(2806);let j=(()=>{class Ee{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const K=new Ee;return K.source=this,K.operator=Ve,K}subscribe(Ve,K,te){const pe=function Ue(Ee){return Ee&&Ee instanceof p.Lv||function J(Ee){return Ee&&(0,oe.m)(Ee.next)&&(0,oe.m)(Ee.error)&&(0,oe.m)(Ee.complete)}(Ee)&&(0,Y.Nn)(Ee)}(Ve)?Ve:new p.Hp(Ve,K,te);return(0,ue.x)(()=>{const{operator:we,source:ge}=this;pe.add(we?we.call(pe,ge):ge?this._subscribe(pe):this._trySubscribe(pe))}),pe}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(K){Ve.error(K)}}forEach(Ve,K){return new(K=B(K))((te,pe)=>{let we;we=this.subscribe(ge=>{try{Ve(ge)}catch(Be){pe(Be),null==we||we.unsubscribe()}},pe,te)})}_subscribe(Ve){var K;return null===(K=this.source)||void 0===K?void 0:K.subscribe(Ve)}[O.L](){return this}pipe(...Ve){return function ce(Ee){return 0===Ee.length?se.y:1===Ee.length?Ee[0]:function(Ve){return Ee.reduce((K,te)=>te(K),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=B(Ve))((K,te)=>{let pe;this.subscribe(we=>pe=we,we=>te(we),()=>K(pe))})}}return Ee.create=Oe=>new Ee(Oe),Ee})();function B(Ee){var Oe;return null!==(Oe=null!=Ee?Ee:re.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(st,De,P)=>{"use strict";P.d(De,{x:()=>re});var p=P(8306),Y=P(727);const se=(0,P(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=P(8737),ce=P(2806);let re=(()=>{class ue extends p.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const J=new oe(this,this);return J.operator=B,J}_throwIfClosed(){if(this.closed)throw new se}next(B){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const J=this.observers.slice();for(const Ue of J)Ue.next(B)}})}error(B){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:J}=this;for(;J.length;)J.shift().error(B)}})}complete(){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:J,isStopped:Ue,observers:Ee}=this;return J||Ue?Y.Lc:(Ee.push(B),new Y.w0(()=>(0,ne.P)(Ee,B)))}_checkFinalizedStatuses(B){const{hasError:J,thrownError:Ue,isStopped:Ee}=this;J?B.error(Ue):Ee&&B.complete()}asObservable(){const B=new p.y;return B.source=this,B}}return ue.create=(j,B)=>new oe(j,B),ue})();class oe extends re{constructor(j,B){super(),this.destination=j,this.source=B}next(j){var B,J;null===(J=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===J||J.call(B,j)}error(j){var B,J;null===(J=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===J||J.call(B,j)}complete(){var j,B;null===(B=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===B||B.call(j)}_subscribe(j){var B,J;return null!==(J=null===(B=this.source)||void 0===B?void 0:B.subscribe(j))&&void 0!==J?J:Y.Lc}}},2961:(st,De,P)=>{"use strict";P.d(De,{Hp:()=>Ue,Lv:()=>J});var p=P(576),Y=P(727),O=P(2416),se=P(7849);function ne(){}const ce=ue("C",void 0,void 0);function ue(te,pe,we){return{kind:te,value:pe,error:we}}var j=P(3410),B=P(2806);class J extends Y.w0{constructor(pe){super(),this.isStopped=!1,pe?(this.destination=pe,(0,Y.Nn)(pe)&&pe.add(this)):this.destination=K}static create(pe,we,ge){return new Ue(pe,we,ge)}next(pe){this.isStopped?Ve(function oe(te){return ue("N",te,void 0)}(pe),this):this._next(pe)}error(pe){this.isStopped?Ve(function re(te){return ue("E",void 0,te)}(pe),this):(this.isStopped=!0,this._error(pe))}complete(){this.isStopped?Ve(ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(pe){this.destination.next(pe)}_error(pe){try{this.destination.error(pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Ue extends J{constructor(pe,we,ge){let Be;if(super(),(0,p.m)(pe))Be=pe;else if(pe){let Te;({next:Be,error:we,complete:ge}=pe),this&&O.v.useDeprecatedNextContext?(Te=Object.create(pe),Te.unsubscribe=()=>this.unsubscribe()):Te=pe,Be=null==Be?void 0:Be.bind(Te),we=null==we?void 0:we.bind(Te),ge=null==ge?void 0:ge.bind(Te)}this.destination={next:Be?Ee(Be):ne,error:Ee(null!=we?we:Oe),complete:ge?Ee(ge):ne}}}function Ee(te,pe){return(...we)=>{try{te(...we)}catch(ge){O.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(ge):(0,se.h)(ge)}}}function Oe(te){throw te}function Ve(te,pe){const{onStoppedNotification:we}=O.v;we&&j.z.setTimeout(()=>we(te,pe))}const K={closed:!0,next:ne,error:Oe,complete:ne}},727:(st,De,P)=>{"use strict";P.d(De,{Lc:()=>ce,w0:()=>ne,Nn:()=>re});var p=P(576);const O=(0,P(3888).d)(ue=>function(B){ue(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((J,Ue)=>`${Ue+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var se=P(8737);class ne{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Ee of B)Ee.remove(this);else B.remove(this);const{initialTeardown:J}=this;if((0,p.m)(J))try{J()}catch(Ee){j=Ee instanceof O?Ee.errors:[Ee]}const{_teardowns:Ue}=this;if(Ue){this._teardowns=null;for(const Ee of Ue)try{oe(Ee)}catch(Oe){j=null!=j?j:[],Oe instanceof O?j=[...j,...Oe.errors]:j.push(Oe)}}if(j)throw new O(j)}}add(j){var B;if(j&&j!==this)if(this.closed)oe(j);else{if(j instanceof ne){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._teardowns=null!==(B=this._teardowns)&&void 0!==B?B:[]).push(j)}}_hasParent(j){const{_parentage:B}=this;return B===j||Array.isArray(B)&&B.includes(j)}_addParent(j){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(j),B):B?[B,j]:j}_removeParent(j){const{_parentage:B}=this;B===j?this._parentage=null:Array.isArray(B)&&(0,se.P)(B,j)}remove(j){const{_teardowns:B}=this;B&&(0,se.P)(B,j),j instanceof ne&&j._removeParent(this)}}ne.EMPTY=(()=>{const ue=new ne;return ue.closed=!0,ue})();const ce=ne.EMPTY;function re(ue){return ue instanceof ne||ue&&"closed"in ue&&(0,p.m)(ue.remove)&&(0,p.m)(ue.add)&&(0,p.m)(ue.unsubscribe)}function oe(ue){(0,p.m)(ue)?ue():ue.unsubscribe()}},2416:(st,De,P)=>{"use strict";P.d(De,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(st,De,P)=>{"use strict";P.d(De,{E:()=>Y});const Y=new(P(8306).y)(ne=>ne.complete())},8996:(st,De,P)=>{"use strict";P.d(De,{D:()=>Be});var p=P(8421),Y=P(5363),O=P(9468),ce=P(8306),oe=P(2202),ue=P(576),j=P(9672);function J(Te,et){if(!Te)throw new Error("Iterable cannot be null");return new ce.y(ze=>{(0,j.f)(ze,et,()=>{const dt=Te[Symbol.asyncIterator]();(0,j.f)(ze,et,()=>{dt.next().then(Q=>{Q.done?ze.complete():ze.next(Q.value)})},0,!0)})})}var Ue=P(3670),Ee=P(8239),Oe=P(1144),Ve=P(6495),K=P(2206),te=P(4532),pe=P(3260);function Be(Te,et){return et?function ge(Te,et){if(null!=Te){if((0,Ue.c)(Te))return function se(Te,et){return(0,p.Xf)(Te).pipe((0,O.R)(et),(0,Y.Q)(et))}(Te,et);if((0,Oe.z)(Te))return function re(Te,et){return new ce.y(ze=>{let dt=0;return et.schedule(function(){dt===Te.length?ze.complete():(ze.next(Te[dt++]),ze.closed||this.schedule())})})}(Te,et);if((0,Ee.t)(Te))return function ne(Te,et){return(0,p.Xf)(Te).pipe((0,O.R)(et),(0,Y.Q)(et))}(Te,et);if((0,K.D)(Te))return J(Te,et);if((0,Ve.T)(Te))return function B(Te,et){return new ce.y(ze=>{let dt;return(0,j.f)(ze,et,()=>{dt=Te[oe.h](),(0,j.f)(ze,et,()=>{let Q,fe;try{({value:Q,done:fe}=dt.next())}catch(me){return void ze.error(me)}fe?ze.complete():ze.next(Q)},0,!0)}),()=>(0,ue.m)(null==dt?void 0:dt.return)&&dt.return()})}(Te,et);if((0,pe.L)(Te))return function we(Te,et){return J((0,pe.Q)(Te),et)}(Te,et)}throw(0,te.z)(Te)}(Te,et):(0,p.Xf)(Te)}},8421:(st,De,P)=>{"use strict";P.d(De,{Xf:()=>Ue});var p=P(5987),Y=P(1144),O=P(8239),se=P(8306),ne=P(3670),ce=P(2206),re=P(4532),oe=P(6495),ue=P(3260),j=P(576),B=P(7849),J=P(8822);function Ue(ge){if(ge instanceof se.y)return ge;if(null!=ge){if((0,ne.c)(ge))return function Ee(ge){return new se.y(Be=>{const Te=ge[J.L]();if((0,j.m)(Te.subscribe))return Te.subscribe(Be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ge);if((0,Y.z)(ge))return function Oe(ge){return new se.y(Be=>{for(let Te=0;Te<ge.length&&!Be.closed;Te++)Be.next(ge[Te]);Be.complete()})}(ge);if((0,O.t)(ge))return function Ve(ge){return new se.y(Be=>{ge.then(Te=>{Be.closed||(Be.next(Te),Be.complete())},Te=>Be.error(Te)).then(null,B.h)})}(ge);if((0,ce.D)(ge))return te(ge);if((0,oe.T)(ge))return function K(ge){return new se.y(Be=>{for(const Te of ge)if(Be.next(Te),Be.closed)return;Be.complete()})}(ge);if((0,ue.L)(ge))return function pe(ge){return te((0,ue.Q)(ge))}(ge)}throw(0,re.z)(ge)}function te(ge){return new se.y(Be=>{(function we(ge,Be){var Te,et,ze,dt;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Te=(0,p.KL)(ge);!(et=yield Te.next()).done;)if(Be.next(et.value),Be.closed)return}catch(Q){ze={error:Q}}finally{try{et&&!et.done&&(dt=Te.return)&&(yield dt.call(Te))}finally{if(ze)throw ze.error}}Be.complete()})})(ge,Be).catch(Te=>Be.error(Te))})}},6451:(st,De,P)=>{"use strict";P.d(De,{T:()=>ce});var p=P(8189),Y=P(8421),O=P(515),se=P(7669),ne=P(8996);function ce(...re){const oe=(0,se.yG)(re),ue=(0,se._6)(re,1/0),j=re;return j.length?1===j.length?(0,Y.Xf)(j[0]):(0,p.J)(ue)((0,ne.D)(j,oe)):O.E}},5403:(st,De,P)=>{"use strict";P.d(De,{Q:()=>Y});var p=P(2961);class Y extends p.Lv{constructor(se,ne,ce,re,oe){super(se),this.onFinalize=oe,this._next=ne?function(ue){try{ne(ue)}catch(j){se.error(j)}}:super._next,this._error=re?function(ue){try{re(ue)}catch(j){se.error(j)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(ue){se.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;const{closed:ne}=this;super.unsubscribe(),!ne&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}},4004:(st,De,P)=>{"use strict";P.d(De,{U:()=>O});var p=P(4482),Y=P(5403);function O(se,ne){return(0,p.e)((ce,re)=>{let oe=0;ce.subscribe(new Y.Q(re,ue=>{re.next(se.call(ne,ue,oe++))}))})}},8189:(st,De,P)=>{"use strict";P.d(De,{J:()=>O});var p=P(5577),Y=P(4671);function O(se=1/0){return(0,p.z)(Y.y,se)}},5577:(st,De,P)=>{"use strict";P.d(De,{z:()=>oe});var p=P(4004),Y=P(8421),O=P(4482),se=P(9672),ne=P(5403),re=P(576);function oe(ue,j,B=1/0){return(0,re.m)(j)?oe((J,Ue)=>(0,p.U)((Ee,Oe)=>j(J,Ee,Ue,Oe))((0,Y.Xf)(ue(J,Ue))),B):("number"==typeof j&&(B=j),(0,O.e)((J,Ue)=>function ce(ue,j,B,J,Ue,Ee,Oe,Ve){const K=[];let te=0,pe=0,we=!1;const ge=()=>{we&&!K.length&&!te&&j.complete()},Be=et=>te<J?Te(et):K.push(et),Te=et=>{Ee&&j.next(et),te++;let ze=!1;(0,Y.Xf)(B(et,pe++)).subscribe(new ne.Q(j,dt=>{null==Ue||Ue(dt),Ee?Be(dt):j.next(dt)},()=>{ze=!0},void 0,()=>{if(ze)try{for(te--;K.length&&te<J;){const dt=K.shift();Oe?(0,se.f)(j,Oe,()=>Te(dt)):Te(dt)}ge()}catch(dt){j.error(dt)}}))};return ue.subscribe(new ne.Q(j,Be,()=>{we=!0,ge()})),()=>{null==Ve||Ve()}}(J,Ue,ue,B)))}},5363:(st,De,P)=>{"use strict";P.d(De,{Q:()=>se});var p=P(9672),Y=P(4482),O=P(5403);function se(ne,ce=0){return(0,Y.e)((re,oe)=>{re.subscribe(new O.Q(oe,ue=>(0,p.f)(oe,ne,()=>oe.next(ue),ce),()=>(0,p.f)(oe,ne,()=>oe.complete(),ce),ue=>(0,p.f)(oe,ne,()=>oe.error(ue),ce)))})}},3099:(st,De,P)=>{"use strict";P.d(De,{B:()=>ce});var p=P(8996),Y=P(5698),O=P(7579),se=P(2961),ne=P(4482);function ce(oe={}){const{connector:ue=(()=>new O.x),resetOnError:j=!0,resetOnComplete:B=!0,resetOnRefCountZero:J=!0}=oe;return Ue=>{let Ee=null,Oe=null,Ve=null,K=0,te=!1,pe=!1;const we=()=>{null==Oe||Oe.unsubscribe(),Oe=null},ge=()=>{we(),Ee=Ve=null,te=pe=!1},Be=()=>{const Te=Ee;ge(),null==Te||Te.unsubscribe()};return(0,ne.e)((Te,et)=>{K++,!pe&&!te&&we();const ze=Ve=null!=Ve?Ve:ue();et.add(()=>{K--,0===K&&!pe&&!te&&(Oe=re(Be,J))}),ze.subscribe(et),Ee||(Ee=new se.Hp({next:dt=>ze.next(dt),error:dt=>{pe=!0,we(),Oe=re(ge,j,dt),ze.error(dt)},complete:()=>{te=!0,we(),Oe=re(ge,B),ze.complete()}}),(0,p.D)(Te).subscribe(Ee))})(Ue)}}function re(oe,ue,...j){return!0===ue?(oe(),null):!1===ue?null:ue(...j).pipe((0,Y.q)(1)).subscribe(()=>oe())}},9468:(st,De,P)=>{"use strict";P.d(De,{R:()=>Y});var p=P(4482);function Y(O,se=0){return(0,p.e)((ne,ce)=>{ce.add(O.schedule(()=>ne.subscribe(ce),se))})}},5698:(st,De,P)=>{"use strict";P.d(De,{q:()=>se});var p=P(515),Y=P(4482),O=P(5403);function se(ne){return ne<=0?()=>p.E:(0,Y.e)((ce,re)=>{let oe=0;ce.subscribe(new O.Q(re,ue=>{++oe<=ne&&(re.next(ue),ne<=oe&&re.complete())}))})}},8505:(st,De,P)=>{"use strict";P.d(De,{b:()=>ne});var p=P(576),Y=P(4482),O=P(5403),se=P(4671);function ne(ce,re,oe){const ue=(0,p.m)(ce)||re||oe?{next:ce,error:re,complete:oe}:ce;return ue?(0,Y.e)((j,B)=>{var J;null===(J=ue.subscribe)||void 0===J||J.call(ue);let Ue=!0;j.subscribe(new O.Q(B,Ee=>{var Oe;null===(Oe=ue.next)||void 0===Oe||Oe.call(ue,Ee),B.next(Ee)},()=>{var Ee;Ue=!1,null===(Ee=ue.complete)||void 0===Ee||Ee.call(ue),B.complete()},Ee=>{var Oe;Ue=!1,null===(Oe=ue.error)||void 0===Oe||Oe.call(ue,Ee),B.error(Ee)},()=>{var Ee,Oe;Ue&&(null===(Ee=ue.unsubscribe)||void 0===Ee||Ee.call(ue)),null===(Oe=ue.finalize)||void 0===Oe||Oe.call(ue)}))}):se.y}},4408:(st,De,P)=>{"use strict";P.d(De,{o:()=>ne});var p=P(727);class Y extends p.w0{constructor(re,oe){super()}schedule(re,oe=0){return this}}const O={setInterval(...ce){const{delegate:re}=O;return((null==re?void 0:re.setInterval)||setInterval)(...ce)},clearInterval(ce){const{delegate:re}=O;return((null==re?void 0:re.clearInterval)||clearInterval)(ce)},delegate:void 0};var se=P(8737);class ne extends Y{constructor(re,oe){super(re,oe),this.scheduler=re,this.work=oe,this.pending=!1}schedule(re,oe=0){if(this.closed)return this;this.state=re;const ue=this.id,j=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(j,ue,oe)),this.pending=!0,this.delay=oe,this.id=this.id||this.requestAsyncId(j,this.id,oe),this}requestAsyncId(re,oe,ue=0){return O.setInterval(re.flush.bind(re,this),ue)}recycleAsyncId(re,oe,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return oe;O.clearInterval(oe)}execute(re,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(re,oe);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,oe){let j,ue=!1;try{this.work(re)}catch(B){ue=!0,j=B||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:re,scheduler:oe}=this,{actions:ue}=oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ue,this),null!=re&&(this.id=this.recycleAsyncId(oe,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(st,De,P)=>{"use strict";P.d(De,{v:()=>O});var p=P(6063);class Y{constructor(ne,ce=Y.now){this.schedulerActionCtor=ne,this.now=ce}schedule(ne,ce=0,re){return new this.schedulerActionCtor(this,ne).schedule(re,ce)}}Y.now=p.l.now;class O extends Y{constructor(ne,ce=Y.now){super(ne,ce),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ne){const{actions:ce}=this;if(this._active)return void ce.push(ne);let re;this._active=!0;do{if(re=ne.execute(ne.state,ne.delay))break}while(ne=ce.shift());if(this._active=!1,re){for(;ne=ce.shift();)ne.unsubscribe();throw re}}}},4986:(st,De,P)=>{"use strict";P.d(De,{z:()=>O});var p=P(4408);const O=new(P(7565).v)(p.o)},6063:(st,De,P)=>{"use strict";P.d(De,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(st,De,P)=>{"use strict";P.d(De,{z:()=>p});const p={setTimeout(...Y){const{delegate:O}=p;return((null==O?void 0:O.setTimeout)||setTimeout)(...Y)},clearTimeout(Y){const{delegate:O}=p;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(st,De,P)=>{"use strict";P.d(De,{h:()=>Y});const Y=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(st,De,P)=>{"use strict";P.d(De,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(st,De,P)=>{"use strict";P.d(De,{_6:()=>ce,jO:()=>se,yG:()=>ne});var p=P(576);function O(re){return re[re.length-1]}function se(re){return(0,p.m)(O(re))?re.pop():void 0}function ne(re){return function Y(re){return re&&(0,p.m)(re.schedule)}(O(re))?re.pop():void 0}function ce(re,oe){return"number"==typeof O(re)?re.pop():oe}},8737:(st,De,P)=>{"use strict";function p(Y,O){if(Y){const se=Y.indexOf(O);0<=se&&Y.splice(se,1)}}P.d(De,{P:()=>p})},3888:(st,De,P)=>{"use strict";function p(Y){const se=Y(ne=>{Error.call(ne),ne.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}P.d(De,{d:()=>p})},2806:(st,De,P)=>{"use strict";P.d(De,{x:()=>O,O:()=>se});var p=P(2416);let Y=null;function O(ne){if(p.v.useDeprecatedSynchronousErrorHandling){const ce=!Y;if(ce&&(Y={errorThrown:!1,error:null}),ne(),ce){const{errorThrown:re,error:oe}=Y;if(Y=null,re)throw oe}}else ne()}function se(ne){p.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=ne)}},9672:(st,De,P)=>{"use strict";function p(Y,O,se,ne=0,ce=!1){const re=O.schedule(function(){se(),ce?Y.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(Y.add(re),!ce)return re}P.d(De,{f:()=>p})},4671:(st,De,P)=>{"use strict";function p(Y){return Y}P.d(De,{y:()=>p})},1144:(st,De,P)=>{"use strict";P.d(De,{z:()=>p});const p=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(st,De,P)=>{"use strict";P.d(De,{D:()=>Y});var p=P(576);function Y(O){return Symbol.asyncIterator&&(0,p.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(st,De,P)=>{"use strict";function p(Y){return"function"==typeof Y}P.d(De,{m:()=>p})},3670:(st,De,P)=>{"use strict";P.d(De,{c:()=>O});var p=P(8822),Y=P(576);function O(se){return(0,Y.m)(se[p.L])}},6495:(st,De,P)=>{"use strict";P.d(De,{T:()=>O});var p=P(2202),Y=P(576);function O(se){return(0,Y.m)(null==se?void 0:se[p.h])}},8239:(st,De,P)=>{"use strict";P.d(De,{t:()=>Y});var p=P(576);function Y(O){return(0,p.m)(null==O?void 0:O.then)}},3260:(st,De,P)=>{"use strict";P.d(De,{Q:()=>O,L:()=>se});var p=P(5987),Y=P(576);function O(ne){return(0,p.FC)(this,arguments,function*(){const re=ne.getReader();try{for(;;){const{value:oe,done:ue}=yield(0,p.qq)(re.read());if(ue)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(oe)}}finally{re.releaseLock()}})}function se(ne){return(0,Y.m)(null==ne?void 0:ne.getReader)}},4482:(st,De,P)=>{"use strict";P.d(De,{A:()=>Y,e:()=>O});var p=P(576);function Y(se){return(0,p.m)(null==se?void 0:se.lift)}function O(se){return ne=>{if(Y(ne))return ne.lift(function(ce){try{return se(ce,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(st,De,P)=>{"use strict";P.d(De,{h:()=>O});var p=P(2416),Y=P(3410);function O(se){Y.z.setTimeout(()=>{const{onUnhandledError:ne}=p.v;if(!ne)throw se;ne(se)})}},4532:(st,De,P)=>{"use strict";function p(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(De,{z:()=>p})},5987:(st,De,P)=>{"use strict";function oe(Q,fe,me,ve){return new(me||(me=Promise))(function(le,Ct){function jt(nt){try{at(ve.next(nt))}catch(wr){Ct(wr)}}function Kn(nt){try{at(ve.throw(nt))}catch(wr){Ct(wr)}}function at(nt){nt.done?le(nt.value):function Fe(le){return le instanceof me?le:new me(function(Ct){Ct(le)})}(nt.value).then(jt,Kn)}at((ve=ve.apply(Q,fe||[])).next())})}function K(Q){return this instanceof K?(this.v=Q,this):new K(Q)}function te(Q,fe,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,ve=me.apply(Q,fe||[]),le=[];return Fe={},Ct("next"),Ct("throw"),Ct("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function Ct(rn){ve[rn]&&(Fe[rn]=function(Tr){return new Promise(function(Yt,li){le.push([rn,Tr,Yt,li])>1||jt(rn,Tr)})})}function jt(rn,Tr){try{!function Kn(rn){rn.value instanceof K?Promise.resolve(rn.value.v).then(at,nt):wr(le[0][2],rn)}(ve[rn](Tr))}catch(Yt){wr(le[0][3],Yt)}}function at(rn){jt("next",rn)}function nt(rn){jt("throw",rn)}function wr(rn,Tr){rn(Tr),le.shift(),le.length&&jt(le[0][0],le[0][1])}}function we(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,fe=Q[Symbol.asyncIterator];return fe?fe.call(Q):(Q=function J(Q){var fe="function"==typeof Symbol&&Symbol.iterator,me=fe&&Q[fe],ve=0;if(me)return me.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&ve>=Q.length&&(Q=void 0),{value:Q&&Q[ve++],done:!Q}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),me={},ve("next"),ve("throw"),ve("return"),me[Symbol.asyncIterator]=function(){return this},me);function ve(le){me[le]=Q[le]&&function(Ct){return new Promise(function(jt,Kn){!function Fe(le,Ct,jt,Kn){Promise.resolve(Kn).then(function(at){le({value:at,done:jt})},Ct)}(jt,Kn,(Ct=Q[le](Ct)).done,Ct.value)})}}}P.d(De,{mG:()=>oe,qq:()=>K,FC:()=>te,KL:()=>we})},5e3:(st,De,P)=>{"use strict";P.d(De,{deG:()=>Eu,tb:()=>ae,AFp:()=>yh,ip1:()=>Le,CZH:()=>Dn,hGG:()=>Eb,z2F:()=>da,sBO:()=>ii,Sil:()=>ey,_Vd:()=>ac,EJc:()=>ub,SBq:()=>Ja,qLn:()=>Ru,vpe:()=>ua,tBr:()=>Mn,XFs:()=>Je,OlP:()=>Xt,zs3:()=>ks,ZZ4:()=>Lp,aQg:()=>Vp,soG:()=>Np,YKP:()=>Lm,h0i:()=>aa,PXZ:()=>mE,R0b:()=>Tt,FiY:()=>en,Lbi:()=>je,g9A:()=>ab,Qsj:()=>Fm,FYo:()=>zv,JOm:()=>Bi,q3G:()=>dn,tp0:()=>_r,Rgc:()=>vp,dDg:()=>Qt,q4F:()=>MT,GfV:()=>ST,s_b:()=>zm,ifc:()=>Rt,eFA:()=>Eh,G48:()=>hb,Gpc:()=>B,X6Q:()=>EE,_c5:()=>Ch,VLi:()=>vh,c2e:()=>vr,zSh:()=>wt,wAp:()=>mt,vHH:()=>Oe,EiD:()=>Tg,mCW:()=>Zo,qzn:()=>uo,JVY:()=>pg,pB0:()=>By,eBb:()=>mg,L6k:()=>gg,LAX:()=>Au,cg1:()=>Tv,kL8:()=>bv,yhl:()=>fg,dqk:()=>ft,sIi:()=>Hd,CqO:()=>Zd,QGY:()=>rv,F4k:()=>Tw,RDi:()=>Wc,AaK:()=>oe,z3N:()=>Ko,qOj:()=>Qg,TTD:()=>_a,_Bn:()=>Pm,xp6:()=>Lg,uIk:()=>V_,Tol:()=>kw,ekj:()=>cv,Suo:()=>Ip,Xpm:()=>Vn,lG2:()=>iu,Yz7:()=>Yt,cJS:()=>Wi,oAB:()=>Ds,Yjl:()=>zs,Y36:()=>Zf,_UZ:()=>vw,BQk:()=>Qa,ynx:()=>nv,qZA:()=>tv,TgZ:()=>ev,EpF:()=>ww,n5z:()=>wn,LFG:()=>z,$8M:()=>jo,$Z:()=>am,NdJ:()=>ic,CRH:()=>Zm,oxw:()=>sv,Q6J:()=>X_,iGM:()=>bp,CHM:()=>uu,oJD:()=>Ef,LSH:()=>Su,Udp:()=>lv,d8E:()=>wv,YNc:()=>$_,_uU:()=>$w,Oqu:()=>pv,hij:()=>mm});var p=P(7579),Y=P(727),O=P(8306),se=P(6451),ne=P(3099);function ce(i){for(let s in i)if(i[s]===ce)return s;throw Error("Could not find renamed property on target object.")}function re(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function oe(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(oe).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ue(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=ce({__forward_ref__:ce});function B(i){return i.__forward_ref__=B,i.toString=function(){return oe(this())},i}function J(i){return Ue(i)?i():i}function Ue(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===B}class Oe extends Error{constructor(s,a){super(function Ve(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function K(i){return"string"==typeof i?i:null==i?"":String(i)}function te(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():K(i)}function Be(i,s){const a=s?` in ${s}`:"";throw new Oe(-201,`No provider for ${te(i)} found${a}`)}function at(i,s){null==i&&function nt(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Yt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Wi(i){return{providers:i.providers||[],imports:i.imports||[]}}function In(i){return Ci(i,Br)||Ci(i,Ae)}function Ci(i,s){return i.hasOwnProperty(s)?i[s]:null}function Hs(i){return i&&(i.hasOwnProperty(Ki)||i.hasOwnProperty(ir))?i[Ki]:null}const Br=ce({\u0275prov:ce}),Ki=ce({\u0275inj:ce}),Ae=ce({ngInjectableDef:ce}),ir=ce({ngInjectorDef:ce});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let Jr;function Ln(i){const s=Jr;return Jr=i,s}function Gs(i,s,a){const l=In(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Je.Optional?null:void 0!==s?s:void Be(oe(i),"Injector")}function tt(i){return{toString:i}.toString()}var Mt=(()=>((Mt=Mt||{})[Mt.OnPush=0]="OnPush",Mt[Mt.Default=1]="Default",Mt))(),Rt=(()=>{return(i=Rt||(Rt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Rt;var i})();const Xe="undefined"!=typeof globalThis&&globalThis,ut="undefined"!=typeof window&&window,ol="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ft=Xe||"undefined"!=typeof global&&global||ut||ol,Zi={},L=[],H=ce({\u0275cmp:ce}),G=ce({\u0275dir:ce}),_e=ce({\u0275pipe:ce}),X=ce({\u0275mod:ce}),$e=ce({\u0275fac:ce}),gt=ce({__NG_ELEMENT_ID__:ce});let ln=0;function Vn(i){return tt(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Mt.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Rt.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,g=i.features,_=i.pipes;return l.id+=ln++,l.inputs=To(i.inputs,a),l.outputs=To(i.outputs),g&&g.forEach(w=>w(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(Dr):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(kt):null,l})}function Dr(i){return Zn(i)||function Un(i){return i[G]||null}(i)}function kt(i){return function Ai(i){return i[_e]||null}(i)}const sr={};function Ds(i){return tt(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(sr[i.id]=i.type),s})}function To(i,s){if(null==i)return Zi;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],g=c;Array.isArray(c)&&(g=c[1],c=c[0]),a[c]=l,s&&(s[c]=g)}return a}const iu=Vn;function zs(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Zn(i){return i[H]||null}function Yn(i,s){const a=i[X]||null;if(!a&&!0===s)throw new Error(`Type ${oe(i)} does not have '\u0275mod' property.`);return a}function hi(i){return Array.isArray(i)&&"object"==typeof i[1]}function fi(i){return Array.isArray(i)&&!0===i[1]}function Fc(i){return 0!=(8&i.flags)}function Nn(i){return 2==(2&i.flags)}function Yi(i){return 1==(1&i.flags)}function Ri(i){return null!==i.template}function Lc(i){return 0!=(512&i[2])}function Ys(i,s){return i.hasOwnProperty($e)?i[$e]:null}class su{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function _a(){return Qs}function Qs(i){return i.type.prototype.ngOnChanges&&(i.setInput=Cs),va}function va(){const i=qc(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===Zi)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Cs(i,s,a,l){const c=qc(i)||function pr(i,s){return i[Ea]=s}(i,{previous:Zi,current:null}),g=c.current||(c.current={}),_=c.previous,w=this.declaredInputs[a],T=_[w];g[w]=new su(T&&T.currentValue,s,_===Zi),i[l]=s}_a.ngInherit=!0;const Ea="__ngSimpleChanges__";function qc(i){return i[Ea]||null}let ou;function Wc(i){ou=i}function fl(){return void 0!==ou?ou:"undefined"!=typeof document?document:void 0}function Kt(i){return!!i.listen}const As={createRenderer:(i,s)=>fl()};function on(i){for(;Array.isArray(i);)i=i[0];return i}function Hn(i,s){return on(s[i])}function xn(i,s){return on(s[i.index])}function So(i,s){return i.data[s]}function Cr(i,s){const a=s[i];return hi(a)?a:a[0]}function Gn(i){return 4==(4&i[2])}function xi(i){return 128==(128&i[2])}function Ar(i,s){return null==s?null:i[s]}function Ss(i){i[18]=0}function Mo(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const pt={lFrame:Ma(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function No(){return pt.bindingsEnabled}function Ie(){return pt.lFrame.lView}function xt(){return pt.lFrame.tView}function uu(i){return pt.lFrame.contextLView=i,i[8]}function an(){let i=Js();for(;null!==i&&64===i.type;)i=i.parent;return i}function Js(){return pt.lFrame.currentTNode}function Sr(i,s){const a=pt.lFrame;a.currentTNode=i,a.isParent=s}function Ji(){return pt.lFrame.isParent}function lu(){pt.lFrame.isParent=!1}function xo(){return pt.isInCheckNoChangesMode}function Da(i){pt.isInCheckNoChangesMode=i}function Xi(){return pt.lFrame.bindingIndex++}function yi(i){const s=pt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function fu(i,s){const a=pt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Po(s)}function Po(i){pt.lFrame.currentDirectiveIndex=i}function Ca(i){const s=pt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}function Aa(){return pt.lFrame.currentQueryIndex}function Sa(i){pt.lFrame.currentQueryIndex=i}function pu(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function ml(i,s,a){if(a&Je.SkipSelf){let c=s,g=i;for(;!(c=c.parent,null!==c||a&Je.Host||(c=pu(g),null===c||(g=g[15],10&c.type))););if(null===c)return!1;s=c,i=g}const l=pt.lFrame=Qc();return l.currentTNode=s,l.lView=i,!0}function ko(i){const s=Qc(),a=i[1];pt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Qc(){const i=pt.lFrame,s=null===i?null:i.child;return null===s?Ma(i):s}function Ma(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function yl(){const i=pt.lFrame;return pt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Ra=yl;function gu(){const i=yl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Jn(){return pt.lFrame.selectedIndex}function On(i){pt.lFrame.selectedIndex=i}function vn(){const i=pt.lFrame;return So(i.tView,i.selectedIndex)}function vl(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const g=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:T,ngAfterViewChecked:A,ngOnDestroy:S}=g;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),T&&(i.viewHooks||(i.viewHooks=[])).push(-a,T),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function Rs(i,s,a){Zh(i,s,3,a)}function mu(i,s,a,l){(3&i[2])===a&&Zh(i,s,a,l)}function yu(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Zh(i,s,a,l){const g=null!=l?l:-1,_=s.length-1;let w=0;for(let T=void 0!==l?65535&i[18]:0;T<_;T++)if("number"==typeof s[T+1]){if(w=s[T],null!=l&&w>=l)break}else s[T]<0&&(i[18]+=65536),(w<g||-1==g)&&(ed(i,a,s,T),i[18]=(4294901760&i[18])+T+2),T++}function ed(i,s,a,l){const c=a[l]<0,g=a[l+1],w=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class En{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function wl(i,s,a){const l=Kt(i);let c=0;for(;c<a.length;){const g=a[c];if("number"==typeof g){if(0!==g)break;c++;const _=a[c++],w=a[c++],T=a[c++];l?i.setAttribute(s,w,T,_):s.setAttributeNS(_,w,T)}else{const _=g,w=a[++c];Mr(_)?l&&i.setProperty(s,_,w):l?i.setAttribute(s,_,w):s.setAttribute(_,w),c++}}return c}function mn(i){return 3===i||4===i||6===i}function Mr(i){return 64===i.charCodeAt(0)}function ar(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||Jh(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function Jh(i,s,a,l,c){let g=0,_=i.length;if(-1===s)_=-1;else for(;g<i.length;){const w=i[g++];if("number"==typeof w){if(w===s){_=-1;break}if(w>s){_=g-1;break}}}for(;g<i.length;){const w=i[g];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==c&&(i[g+1]=c));if(l===i[g+1])return void(i[g+2]=c)}g++,null!==l&&g++,null!==c&&g++}-1!==_&&(i.splice(_,0,s),g=_+1),i.splice(g++,0,a),null!==l&&i.splice(g++,0,l),null!==c&&i.splice(g++,0,c)}function Xh(i){return-1!==i}function Oa(i){return 32767&i}function Pa(i,s){let a=function nd(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let ka=!0;function Oi(i){const s=ka;return ka=i,s}let Tl=0;function Fo(i,s){const a=Lo(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,bl(l.data,i),bl(s,null),bl(l.blueprint,null));const c=Rr(i,s),g=i.injectorIndex;if(Xh(c)){const _=Oa(c),w=Pa(c,s),T=w[1].data;for(let A=0;A<8;A++)s[g+A]=w[_+A]|T[_+A]}return s[g+8]=c,g}function bl(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Lo(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Rr(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const g=c[1],_=g.type;if(l=2===_?g.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Gr(i,s,a){!function rd(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(gt)&&(l=a[gt]),null==l&&(l=a[gt]=Tl++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function vu(i,s,a){if(a&Je.Optional)return i;Be(s,"NodeInjector")}function Pi(i,s,a,l){if(a&Je.Optional&&void 0===l&&(l=null),0==(a&(Je.Self|Je.Host))){const c=i[9],g=Ln(void 0);try{return c?c.get(s,l,a&Je.Optional):Gs(s,l,a&Je.Optional)}finally{Ln(g)}}return vu(l,s,a)}function Dl(i,s,a,l=Je.Default,c){if(null!==i){const g=function ki(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(gt)?i[gt]:void 0;return"number"==typeof s?s>=0?255&s:Uo:s}(a);if("function"==typeof g){if(!ml(s,i,l))return l&Je.Host?vu(c,a,l):Pi(s,a,l,c);try{const _=g(l);if(null!=_||l&Je.Optional)return _;Be(a)}finally{Ra()}}else if("number"==typeof g){let _=null,w=Lo(i,s),T=-1,A=l&Je.Host?s[16][6]:null;for((-1===w||l&Je.SkipSelf)&&(T=-1===w?Rr(i,s):s[w+8],-1!==T&&mr(l,!1)?(_=s[1],w=Oa(T),s=Pa(T,s)):w=-1);-1!==w;){const S=s[1];if(ef(g,w,S.data)){const k=Xr(w,s,a,_,l,A);if(k!==Il)return k}T=s[w+8],-1!==T&&mr(l,s[1].data[w+8]===A)&&ef(g,w,s)?(_=S,w=Oa(T),s=Pa(T,s)):w=-1}}}return Pi(s,a,l,c)}const Il={};function Uo(){return new eo(an(),Ie())}function Xr(i,s,a,l,c,g){const _=s[1],w=_.data[i+8],S=La(w,_,a,null==l?Nn(w)&&ka:l!=_&&0!=(3&w.type),c&Je.Host&&g===w);return null!==S?Gt(s,_,S,w):Il}function La(i,s,a,l,c){const g=i.providerIndexes,_=s.data,w=1048575&g,T=i.directiveStart,S=g>>20,$=c?w+S:i.directiveEnd;for(let W=l?w:w+S;W<$;W++){const de=_[W];if(W<T&&a===de||W>=T&&de.type===a)return W}if(c){const W=_[T];if(W&&Ri(W)&&W.type===a)return T}return null}function Gt(i,s,a,l){let c=i[a];const g=s.data;if(function Yh(i){return i instanceof En}(c)){const _=c;_.resolving&&function pe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${i}${a}`)}(te(g[a]));const w=Oi(_.canSeeViewProviders);_.resolving=!0;const T=_.injectImpl?Ln(_.injectImpl):null;ml(i,l,Je.Default);try{c=i[a]=_.factory(void 0,g,i,l),s.firstCreatePass&&a>=l.directiveStart&&function Kh(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:g}=s.type.prototype;if(l){const _=Qs(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,g))}(a,g[a],s)}finally{null!==T&&Ln(T),Oi(w),_.resolving=!1,Ra()}}return c}function ef(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function mr(i,s){return!(i&Je.Self||i&Je.Host&&s)}class eo{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Dl(this._tNode,this._lView,s,l,a)}}function wn(i){return tt(()=>{const s=i.prototype.constructor,a=s[$e]||Bo(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const g=c[$e]||Bo(c);if(g&&g!==a)return g;c=Object.getPrototypeOf(c)}return g=>new g})}function Bo(i){return Ue(i)?()=>{const s=Bo(J(i));return s&&s()}:Ys(i)}function jo(i){return function Vo(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const g=a[c];if(mn(g))break;if(0===g)c+=2;else if("number"==typeof g)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(g===s)return a[c+1];c+=2}}}return null}(an(),i)}const ns="__parameters__";function to(i,s,a){return tt(()=>{const l=function Fi(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...g){if(this instanceof c)return l.apply(this,g),this;const _=new c(...g);return w.annotation=_,w;function w(T,A,S){const k=T.hasOwnProperty(ns)?T[ns]:Object.defineProperty(T,ns,{value:[]})[ns];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(_),T}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class Xt{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Eu=new Xt("AnalyzeForEntryComponents");function Pn(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Pn(l,s)):s!==i&&s.push(l)}return s}function cn(i,s){i.forEach(a=>Array.isArray(a)?cn(a,s):s(a))}function Ml(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function wu(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Xn(i,s,a){let l=no(i,s);return l>=0?i[1|l]=a:(l=~l,function xs(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Tu(i,s){const a=no(i,s);if(a>=0)return i[1|a]}function no(i,s){return function ag(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const g=l+(c-l>>1),_=i[g<<a];if(s===_)return g<<a;_>s?c=g:l=g+1}return~(c<<a)}(i,s,1)}const ur={},ja="__NG_DI_FLAG__",$a="ngTempTokenPath",Go=/\n/gm,xl="__source",b=ce({provide:String,useValue:ce});let I;function N(i){const s=I;return I=i,s}function F(i,s=Je.Default){if(void 0===I)throw new Oe(203,"");return null===I?Gs(i,void 0,s):I.get(i,s&Je.Optional?null:void 0,s)}function z(i,s=Je.Default){return(function zt(){return Jr}()||F)(J(i),s)}function Ge(i){const s=[];for(let a=0;a<i.length;a++){const l=J(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Oe(900,"");let c,g=Je.Default;for(let _=0;_<l.length;_++){const w=l[_],T=Vt(w);"number"==typeof T?-1===T?c=w.token:g|=T:c=w}s.push(z(c,g))}else s.push(z(l))}return s}function qe(i,s){return i[ja]=s,i.prototype[ja]=s,i}function Vt(i){return i[ja]}const Mn=qe(to("Inject",i=>({token:i})),-1),en=qe(to("Optional"),8),_r=qe(to("SkipSelf"),4);let gd,yd;function Wo(i){var s;return(null===(s=function oo(){if(void 0===gd&&(gd=null,ft.trustedTypes))try{gd=ft.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return gd}())||void 0===s?void 0:s.createHTML(i))||i}function cg(i){var s;return(null===(s=function _d(){if(void 0===yd&&(yd=null,ft.trustedTypes))try{yd=ft.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return yd}())||void 0===s?void 0:s.createHTML(i))||i}class ao{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class dg extends ao{getTypeName(){return"HTML"}}class hf extends ao{getTypeName(){return"Style"}}class ff extends ao{getTypeName(){return"Script"}}class hg extends ao{getTypeName(){return"URL"}}class Uy extends ao{getTypeName(){return"ResourceURL"}}function Ko(i){return i instanceof ao?i.changingThisBreaksApplicationSecurity:i}function uo(i,s){const a=fg(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function fg(i){return i instanceof ao&&i.getTypeName()||null}function pg(i){return new dg(i)}function gg(i){return new hf(i)}function mg(i){return new ff(i)}function Au(i){return new hg(i)}function By(i){return new Uy(i)}class jy{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(Wo(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class Ed{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Wo(s),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Wo(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(s){const a=s.attributes;for(let c=a.length-1;0<c;c--){const _=a.item(c).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&s.removeAttribute(_)}let l=s.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const gf=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,mf=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Zo(i){return(i=String(i)).match(gf)||i.match(mf)?i:"unsafe:"+i}function Ui(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function Pl(...i){const s={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(s[l]=!0);return s}const yf=Ui("area,br,col,hr,img,wbr"),_g=Ui("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),kl=Ui("rp,rt"),_f=Pl(yf,Pl(_g,Ui("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pl(kl,Ui("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Pl(kl,_g)),wd=Ui("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Fl=Ui("srcset"),Td=Pl(wd,Fl,Ui("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ui("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ll=Ui("script,style,template");class vf{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let c=this.checkClobberedElement(a,a.nextSibling);if(c){a=c;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!_f.hasOwnProperty(a))return this.sanitizedSomething=!0,!Ll.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=s.attributes;for(let c=0;c<l.length;c++){const g=l.item(c),_=g.name,w=_.toLowerCase();if(!Td.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let T=g.value;wd[w]&&(T=Zo(T)),Fl[w]&&(i=T,T=(i=String(i)).split(",").map(s=>Zo(s.trim())).join(", ")),this.buf.push(" ",_,'="',bd(T),'"')}var i;return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();_f.hasOwnProperty(a)&&!yf.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(bd(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const Eg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wg=/([^\#-~ |!])/g;function bd(i){return i.replace(/&/g,"&amp;").replace(Eg,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(wg,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Dd;function Tg(i,s){let a=null;try{Dd=Dd||function pf(i){const s=new Ed(i);return function $y(){try{return!!(new window.DOMParser).parseFromString(Wo(""),"text/html")}catch(i){return!1}}()?new jy(s):s}(i);let l=s?String(s):"";a=Dd.getInertBodyElement(l);let c=5,g=l;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,l=g,g=a.innerHTML,a=Dd.getInertBodyElement(l)}while(l!==g);return Wo((new vf).sanitizeChildren(Vl(a)||a))}finally{if(a){const l=Vl(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Vl(i){return"content"in i&&function qy(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var dn=(()=>((dn=dn||{})[dn.NONE=0]="NONE",dn[dn.HTML=1]="HTML",dn[dn.STYLE=2]="STYLE",dn[dn.SCRIPT=3]="SCRIPT",dn[dn.URL=4]="URL",dn[dn.RESOURCE_URL=5]="RESOURCE_URL",dn))();function Ef(i){const s=Id();return s?cg(s.sanitize(dn.HTML,i)||""):uo(i,"HTML")?cg(Ko(i)):Tg(fl(),K(i))}function Su(i){const s=Id();return s?s.sanitize(dn.URL,i)||"":uo(i,"URL")?Ko(i):Zo(K(i))}function Id(){const i=Ie();return i&&i[12]}const Ky="__ngContext__";function hn(i,s){i[Ky]=s}function Cd(i){const s=function Yo(i){return i[Ky]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Mg(i){return i.ngOriginalError}function bf(i,...s){i.error(...s)}class Ru{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function f0(i){return i&&i.ngErrorLogger||bf}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Mg(s);for(;a&&Mg(a);)a=Mg(a);return a||null}}const xr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ft))();function Ps(i){return i instanceof Function?i():i}var Bi=(()=>((Bi=Bi||{})[Bi.Important=1]="Important",Bi[Bi.DashCase=2]="DashCase",Bi))();function Hl(i,s){return undefined(i,s)}function Gl(i){const s=i[3];return fi(s)?s[3]:s}function Ga(i){return ql(i[13])}function Jo(i){return ql(i[4])}function ql(i){for(;null!==i&&!fi(i);)i=i[4];return i}function as(i,s,a,l,c){if(null!=l){let g,_=!1;fi(l)?g=l:hi(l)&&(_=!0,l=l[0]);const w=on(l);0===i&&null!==a?null==c?Ke(s,a,w):We(s,a,w,c||null,!0):1===i&&null!==a?We(s,a,w,c||null,!0):2===i?function kd(i,s,a){const l=$i(i,s);l&&function er(i,s,a,l){Kt(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,_):3===i&&s.destroyNode(w),null!=g&&function iD(i,s,a,l,c){const g=a[7];g!==on(a)&&as(s,i,l,g,c);for(let w=10;w<a.length;w++){const T=a[w];Fd(T[1],T,i,s,l,g)}}(s,i,g,a,c)}}function Xo(i,s,a){return Kt(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function f(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Mo(c,-1)),a.splice(l,1)}function v(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&f(c,l),s>0&&(i[a-1][4]=l[4]);const g=wu(i,10+s);!function Jy(i,s){Fd(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=g[19];null!==_&&_.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function C(i,s){if(!(256&s[2])){const a=s[11];Kt(a)&&a.destroyNode&&Fd(i,s,a,3,null,null),function ea(i){let s=i[13];if(!s)return R(i[1],i);for(;s;){let a=null;if(hi(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)hi(s)&&R(s[1],s),s=s[3];null===s&&(s=i),hi(s)&&R(s[1],s),a=s&&s[4]}s=a}}(s)}}function R(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function ee(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof En)){const g=a[l+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const w=c[g[_]],T=g[_+1];try{T.call(w)}finally{}}else try{g.call(c)}finally{}}}}(i,s),function U(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const _=a[g+1],w="function"==typeof _?_(s):on(s[_]),T=l[c=a[g+2]],A=a[g+3];"boolean"==typeof A?w.removeEventListener(a[g],T,A):A>=0?l[c=A]():l[c=-A].unsubscribe(),g+=2}else{const _=l[c=a[g+1]];a[g].call(_)}if(null!==l){for(let g=c+1;g<l.length;g++)l[g]();s[7]=null}}(i,s),1===s[1].type&&Kt(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&fi(s[3])){a!==s[3]&&f(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function ke(i,s,a){return function Me(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Rt.None||c===Rt.Emulated)return null}return xn(l,a)}(i,s.parent,a)}function We(i,s,a,l,c){Kt(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function Ke(i,s,a){Kt(i)?i.appendChild(s,a):s.appendChild(a)}function Ft(i,s,a,l,c){null!==l?We(i,s,a,l,c):Ke(i,s,a)}function $i(i,s){return Kt(i)?i.parentNode(s):s.parentNode}let Mf=function Fu(i,s,a){return 40&i.type?xn(i,a):null};function ta(i,s,a,l){const c=ke(i,l,s),g=s[11],w=function ku(i,s,a){return Mf(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let T=0;T<a.length;T++)Ft(g,c,a[T],w,!1);else Ft(g,c,a,w,!1)}function co(i,s){if(null!==s){const a=s.type;if(3&a)return xn(s,i);if(4&a)return Pd(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return co(i,l);{const c=i[s.index];return fi(c)?Pd(-1,c):on(c)}}if(32&a)return Hl(s,i)()||on(i[s.index]);{const l=Od(i,s);return null!==l?Array.isArray(l)?l[0]:co(Gl(i[16]),l):co(i,s.next)}}return null}function Od(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Pd(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return co(l,c)}return s[7]}function Wl(i,s,a,l,c,g,_){for(;null!=a;){const w=l[a.index],T=a.type;if(_&&0===s&&(w&&hn(on(w),l),a.flags|=4),64!=(64&a.flags))if(8&T)Wl(i,s,a.child,l,c,g,!1),as(s,i,c,w,g);else if(32&T){const A=Hl(a,l);let S;for(;S=A();)as(s,i,c,S,g);as(s,i,c,w,g)}else 16&T?p0(i,s,l,a,c,g):as(s,i,c,w,g);a=_?a.projectionNext:a.next}}function Fd(i,s,a,l,c,g){Wl(a,l,i.firstChild,s,c,g,!1)}function p0(i,s,a,l,c,g){const _=a[16],T=_[6].projection[l.projection];if(Array.isArray(T))for(let A=0;A<T.length;A++)as(s,i,c,T[A],g);else Wl(i,s,T,_[3],c,g,!0)}function g0(i,s,a){Kt(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Ld(i,s,a){Kt(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function m0(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const g=s.length;if(c+g===l||i.charCodeAt(c+g)<=32)return c}a=c+1}}const kg="ng-template";function Xy(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==m0(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function Nf(i){return 4===i.type&&i.value!==kg}function oD(i,s,a){return s===(4!==i.type||a?i.value:kg)}function aD(i,s,a){let l=4;const c=i.attrs||[],g=function lD(i){for(let s=0;s<i.length;s++)if(mn(i[s]))return s;return i.length}(c);let _=!1;for(let w=0;w<s.length;w++){const T=s[w];if("number"!=typeof T){if(!_)if(4&l){if(l=2|1&l,""!==T&&!oD(i,T,a)||""===T&&1===s.length){if(ho(l))return!1;_=!0}}else{const A=8&l?T:s[++w];if(8&l&&null!==i.attrs){if(!Xy(i.attrs,A,a)){if(ho(l))return!1;_=!0}continue}const k=uD(8&l?"class":T,c,Nf(i),a);if(-1===k){if(ho(l))return!1;_=!0;continue}if(""!==A){let $;$=k>g?"":c[k+1].toLowerCase();const W=8&l?$:null;if(W&&-1!==m0(W,A,0)||2&l&&A!==$){if(ho(l))return!1;_=!0}}}}else{if(!_&&!ho(l)&&!ho(T))return!1;if(_&&ho(T))continue;_=!1,l=T|1&l}}return ho(l)||_}function ho(i){return 0==(1&i)}function uD(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let g=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)g=!0;else{if(1===_||2===_){let w=s[++c];for(;"string"==typeof w;)w=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=g?1:2}return-1}return function Fg(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function y0(i,s,a=!1){for(let l=0;l<s.length;l++)if(aD(i,s[l],a))return!0;return!1}function xf(i,s){return i?":not("+s.trim()+")":s}function cD(i){let s=i[0],a=1,l=2,c="",g=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];c+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!ho(_)&&(s+=xf(g,c),c=""),l=_,g=g||!ho(l);a++}return""!==c&&(s+=xf(g,c)),s}const Nt={};function Lg(i){hD(xt(),Ie(),Jn()+i,xo())}function hD(i,s,a,l){if(!l)if(3==(3&s[2])){const g=i.preOrderCheckHooks;null!==g&&Rs(s,g,a)}else{const g=i.preOrderHooks;null!==g&&mu(s,g,0,a)}On(a)}function Vg(i,s){return i<<17|s<<2}function fo(i){return i>>17&32767}function Ug(i){return 2|i}function qa(i){return(131068&i)>>2}function i_(i,s){return-131069&i|s<<2}function s_(i){return 1|i}function g_(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],g=a[l+1];if(-1!==g){const _=i.data[g];Sa(c),_.contentQueries(2,s[g],g)}}}function Ud(i,s,a,l,c,g,_,w,T,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,Ss(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=w||i&&i[11],S[12]=T||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=g,S[16]=2==s.type?i[16]:S,S}function Vu(i,s,a,l,c){let g=i.data[s];if(null===g)g=function $g(i,s,a,l,c){const g=Js(),_=Ji(),T=i.data[s]=function N0(i,s,a,l,c,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=T),null!==g&&(_?null==g.child&&null!==T.parent&&(g.child=T):null===g.next&&(g.next=T)),T}(i,s,a,l,c),function Yc(){return pt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=c;const _=function Ms(){const i=pt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return Sr(g,!0),g}function Wa(i,s,a,l){if(0===a)return-1;const c=s.length;for(let g=0;g<a;g++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function Kl(i,s,a){ko(s);try{const l=i.viewQuery;null!==l&&zg(1,l,a);const c=i.template;null!==c&&M0(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&g_(i,s),i.staticViewQueries&&zg(2,i.viewQuery,a);const g=i.components;null!==g&&function TD(i,s){for(let a=0;a<s.length;a++)UD(i,s[a])}(s,g)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,gu()}}function Bd(i,s,a,l){const c=s[2];if(256==(256&c))return;ko(s);const g=xo();try{Ss(s),function hu(i){return pt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&M0(i,s,a,2,l);const _=3==(3&c);if(!g)if(_){const A=i.preOrderCheckHooks;null!==A&&Rs(s,A,null)}else{const A=i.preOrderHooks;null!==A&&mu(s,A,0,null),yu(s,0)}if(function LD(i){for(let s=Ga(i);null!==s;s=Jo(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],g=c[3];0==(1024&c[2])&&Mo(g,1),c[2]|=1024}}}(s),function FD(i){for(let s=Ga(i);null!==s;s=Jo(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];xi(l)&&Bd(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&g_(i,s),!g)if(_){const A=i.contentCheckHooks;null!==A&&Rs(s,A)}else{const A=i.contentHooks;null!==A&&mu(s,A,1),yu(s,1)}!function ED(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)On(~c);else{const g=c,_=a[++l],w=a[++l];fu(_,g),w(2,s[g])}}}finally{On(-1)}}(i,s);const w=i.components;null!==w&&function wD(i,s){for(let a=0;a<s.length;a++)VD(i,s[a])}(s,w);const T=i.viewQuery;if(null!==T&&zg(2,T,l),!g)if(_){const A=i.viewCheckHooks;null!==A&&Rs(s,A)}else{const A=i.viewHooks;null!==A&&mu(s,A,2),yu(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),g||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Mo(s[3],-1))}finally{gu()}}function bD(i,s,a,l){const c=s[10],g=!xo(),_=Gn(s);try{g&&!_&&c.begin&&c.begin(),_&&Kl(i,s,l),Bd(i,s,a,l)}finally{g&&!_&&c.end&&c.end()}}function M0(i,s,a,l,c){const g=Jn(),_=2&l;try{On(-1),_&&s.length>20&&hD(i,s,20,xo()),a(l,c)}finally{On(g)}}function m_(i,s,a){if(Fc(s)){const c=s.directiveEnd;for(let g=s.directiveStart;g<c;g++){const _=i.data[g];_.contentQueries&&_.contentQueries(1,a[g],g)}}}function y_(i,s,a){!No()||(function ND(i,s,a,l){const c=a.directiveStart,g=a.directiveEnd;i.firstCreatePass||Fo(a,s),hn(l,s);const _=a.initialInputs;for(let w=c;w<g;w++){const T=i.data[w],A=Ri(T);A&&rM(s,a,T);const S=Gt(s,i,w,a);hn(S,s),null!==_&&PD(0,w-c,S,T,0,_),A&&(Cr(a.index,s)[8]=S)}}(i,s,a,xn(a,s)),128==(128&a.flags)&&function xD(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,w=function Ia(){return pt.lFrame.currentDirectiveIndex}();try{On(_);for(let T=l;T<c;T++){const A=i.data[T],S=s[T];Po(T),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&F0(A,S)}}finally{On(-1),Po(w)}}(i,s,a))}function __(i,s,a=xn){const l=s.localNames;if(null!==l){let c=s.index+1;for(let g=0;g<l.length;g+=2){const _=l[g+1],w=-1===_?a(s,i):i[_];i[c++]=w}}}function v_(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Uf(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Uf(i,s,a,l,c,g,_,w,T,A){const S=20+l,k=S+c,$=function DD(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Nt);return a}(S,k),W="function"==typeof A?A():A;return $[1]={type:i,blueprint:$,template:a,queries:null,viewQuery:w,declTNode:s,data:$.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:T,consts:W,incompleteFirstPass:!1}}function ID(i,s,a,l){const c=q0(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&z0(i).push(l,c.length-1))}function x0(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function ls(i,s,a,l,c,g,_,w){const T=xn(s,a);let S,A=s.inputs;!w&&null!=A&&(S=A[l])?(Bf(i,a,S,l,c),Nn(s)&&function AD(i,s){const a=Cr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function O0(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,Kt(g)?g.setProperty(T,l,c):Mr(l)||(T.setProperty?T.setProperty(l,c):T[l]=c))}function b_(i,s,a,l){let c=!1;if(No()){const g=function OD(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let g=0;g<l.length;g++){const _=l[g];y0(a,_.selectors,!1)&&(c||(c=[]),Gr(Fo(a,s),i,_.type),Ri(_)?(D_(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==g){c=!0,U0(a,i.data.length,g.length);for(let S=0;S<g.length;S++){const k=g[S];k.providersResolver&&k.providersResolver(k)}let w=!1,T=!1,A=Wa(i,s,g.length,null);for(let S=0;S<g.length;S++){const k=g[S];a.mergedAttrs=ar(a.mergedAttrs,k.hostAttrs),B0(i,a,s,A,k),V0(A,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const $=k.type.prototype;!w&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!T&&($.ngOnChanges||$.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),T=!0),A++}!function CD(i,s){const l=s.directiveEnd,c=i.data,g=s.attrs,_=[];let w=null,T=null;for(let A=s.directiveStart;A<l;A++){const S=c[A],k=S.inputs,$=null===g||Nf(s)?null:kD(k,g);_.push($),w=x0(k,A,w),T=x0(S.outputs,A,T)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=w,s.outputs=T}(i,a)}_&&function L0(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const g=a[s[c+1]];if(null==g)throw new Oe(-301,`Export of name '${s[c+1]}' not found!`);l.push(s[c],g)}}}(a,l,_)}return a.mergedAttrs=ar(a.mergedAttrs,a.attrs),c}function k0(i,s,a,l,c,g){const _=g.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const T=~s.index;(function RD(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=T&&w.push(T),w.push(l,c,_)}}function F0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function D_(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function V0(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Ri(s)&&(a[""]=i)}}function U0(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function B0(i,s,a,l,c){i.data[l]=c;const g=c.factory||(c.factory=Ys(c.type)),_=new En(g,Ri(c),null);i.blueprint[l]=_,a[l]=_,k0(i,s,0,l,Wa(i,a,c.hostVars,Nt),c)}function rM(i,s,a){const l=xn(s,i),c=v_(a),g=i[10],_=Gg(i,Ud(i,c,null,a.onPush?64:16,l,s,g,g.createRenderer(l,a),null,null));i[s.index]=_}function bn(i,s,a,l,c,g){const _=xn(i,s);!function Hg(i,s,a,l,c,g,_){if(null==g)Kt(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const w=null==_?K(g):_(g,l||"",c);Kt(i)?i.setAttribute(s,c,w,a):a?s.setAttributeNS(a,c,w):s.setAttribute(c,w)}}(s[11],_,g,i.value,a,l,c)}function PD(i,s,a,l,c,g){const _=g[s];if(null!==_){const w=l.setInput;for(let T=0;T<_.length;){const A=_[T++],S=_[T++],k=_[T++];null!==w?l.setInput(a,k,A,S):a[S]=k}}}function kD(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function j0(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function VD(i,s){const a=Cr(s,i);if(xi(a)){const l=a[1];80&a[2]?Bd(l,a,l.template,a[8]):a[5]>0&&I_(a)}}function I_(i){for(let l=Ga(i);null!==l;l=Jo(l))for(let c=10;c<l.length;c++){const g=l[c];if(1024&g[2]){const _=g[1];Bd(_,g,_.template,g[8])}else g[5]>0&&I_(g)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=Cr(a[l],i);xi(c)&&c[5]>0&&I_(c)}}function UD(i,s){const a=Cr(s,i),l=a[1];(function BD(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Kl(l,a,a[8])}function Gg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function C_(i){for(;i;){i[2]|=64;const s=Gl(i);if(Lc(i)&&!s)return i;i=s}return null}function A_(i,s,a){const l=s[10];l.begin&&l.begin();try{Bd(i,s,i.template,a)}catch(c){throw K0(s,c),c}finally{l.end&&l.end()}}function H0(i){!function $0(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Cd(a),c=l[1];bD(c,l,c.template,a)}}(i[8])}function zg(i,s,a){Sa(0),s(i,a)}const jD=(()=>Promise.resolve(null))();function q0(i){return i[7]||(i[7]=[])}function z0(i){return i.cleanup||(i.cleanup=[])}function K0(i,s){const a=i[9],l=a?a.get(Ru,null):null;l&&l.handleError(s)}function Bf(i,s,a,l,c){for(let g=0;g<a.length;){const _=a[g++],w=a[g++],T=s[_],A=i.data[_];null!==A.setInput?A.setInput(T,c,l,w):T[w]=c}}function Ka(i,s,a){const l=Hn(s,i);!function lo(i,s,a){Kt(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function Wg(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,g=0;if(null!==s)for(let _=0;_<s.length;_++){const w=s[_];"number"==typeof w?g=w:1==g?c=ue(c,w):2==g&&(l=ue(l,w+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Z0=new Xt("INJECTOR",-1);class HD{get(s,a=ur){if(a===ur){const l=new Error(`NullInjectorError: No provider for ${oe(s)}!`);throw l.name="NullInjectorError",l}return a}}const wt=new Xt("Set Injector scope."),Ei={},jf={};let S_;function Y0(){return void 0===S_&&(S_=new HD),S_}function Q0(i,s=null,a=null,l){const c=M_(i,s,a,l);return c._resolveInjectorDefTypes(),c}function M_(i,s=null,a=null,l){return new GD(i,a,s||Y0(),l)}class GD{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&cn(a,w=>this.processProvider(w,s,a)),cn([s],w=>this.processInjectorType(w,[],g)),this.records.set(Z0,Zl(void 0,this));const _=this.records.get(wt);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:oe(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=ur,l=Je.Default){this.assertNotDestroyed();const c=N(this),g=Ln(void 0);try{if(!(l&Je.SkipSelf)){let w=this.records.get(s);if(void 0===w){const T=function Yg(i){return"function"==typeof i||"object"==typeof i&&i instanceof Xt}(s)&&In(s);w=T&&this.injectableDefInScope(T)?Zl(jd(s),Ei):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&Je.Self?Y0():this.parent).get(s,a=l&Je.Optional&&a===ur?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[$a]=_[$a]||[]).unshift(oe(s)),c)throw _;return function qt(i,s,a,l){const c=i[$a];throw s[xl]&&c.unshift(s[xl]),i.message=function ei(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=oe(s);if(Array.isArray(s))c=s.map(oe).join(" -> ");else if("object"==typeof s){let g=[];for(let _ in s)if(s.hasOwnProperty(_)){let w=s[_];g.push(_+":"+("string"==typeof w?JSON.stringify(w):oe(w)))}c=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(Go,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[$a]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Ln(g),N(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(oe(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,"")}processInjectorType(s,a,l){if(!(s=J(s)))return!1;let c=Hs(s);const g=null==c&&s.ngModule||void 0,_=void 0===g?s:g,w=-1!==l.indexOf(_);if(void 0!==g&&(c=Hs(g)),null==c)return!1;if(null!=c.imports&&!w){let S;l.push(_);try{cn(c.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:$,providers:W}=S[k];cn(W,de=>this.processProvider(de,$,W||L))}}this.injectorDefTypes.add(_);const T=Ys(_)||(()=>new _);this.records.set(_,Zl(T,Ei));const A=c.providers;if(null!=A&&!w){const S=s;cn(A,k=>this.processProvider(k,S,A))}return void 0!==g&&void 0!==s.providers}processProvider(s,a,l){let c=Ql(s=J(s))?s:J(s&&s.provide);const g=function qD(i,s,a){return Yl(i)?Zl(void 0,i.useValue):Zl(Zg(i),Ei)}(s);if(Ql(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=Zl(void 0,Ei,!0),_.factory=()=>Ge(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,g)}hydrate(s,a){return a.value===Ei&&(a.value=jf,a.value=a.factory()),"object"==typeof a.value&&a.value&&function R_(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=J(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function jd(i){const s=In(i),a=null!==s?s.factory:Ys(i);if(null!==a)return a;if(i instanceof Xt)throw new Oe(204,"");if(i instanceof Function)return function Kg(i){const s=i.length;if(s>0)throw function Ua(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Oe(204,"");const a=function $t(i){const s=i&&(i[Br]||i[Ae]);if(s){const a=function yn(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Oe(204,"")}function Zg(i,s,a){let l;if(Ql(i)){const c=J(i);return Ys(c)||jd(c)}if(Yl(i))l=()=>J(i.useValue);else if(function cs(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Ge(i.deps||[]));else if(function J0(i){return!(!i||!i.useExisting)}(i))l=()=>z(J(i.useExisting));else{const c=J(i&&(i.useClass||i.provide));if(!function wi(i){return!!i.deps}(i))return Ys(c)||jd(c);l=()=>new c(...Ge(i.deps))}return l}function Zl(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Yl(i){return null!==i&&"object"==typeof i&&b in i}function Ql(i){return"function"==typeof i}let ks=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return Q0({name:""},l,a,"");{const g=null!==(c=a.name)&&void 0!==c?c:"";return Q0({name:g},a.parent,a.providers,g)}}}return i.THROW_IF_NOT_FOUND=ur,i.NULL=new HD,i.\u0275prov=Yt({token:i,providedIn:"any",factory:()=>z(Z0)}),i.__NG_ELEMENT_ID__=-1,i})();function ZD(i,s){vl(Cd(i)[1],an())}function Qg(i){let s=function sw(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Ri(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Oe(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=F_(i.inputs),_.declaredInputs=F_(i.declaredInputs),_.outputs=F_(i.outputs);const w=c.hostBindings;w&&L_(i,w);const T=c.viewQuery,A=c.contentQueries;if(T&&$d(i,T),A&&ow(i,A),re(i.inputs,c.inputs),re(i.declaredInputs,c.declaredInputs),re(i.outputs,c.outputs),Ri(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const g=c.features;if(g)for(let _=0;_<g.length;_++){const w=g[_];w&&w.ngInherit&&w(i),w===Qg&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Ut(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=ar(c.hostAttrs,a=ar(a,c.hostAttrs))}}(l)}function F_(i){return i===Zi?{}:i===L?[]:i}function $d(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function ow(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,g)=>{s(l,c,g),a(l,c,g)}:s}function L_(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let hs=null;function ec(){if(!hs){const i=ft.Symbol;if(i&&i.iterator)hs=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(hs=l)}}}return hs}function Hd(i){return!!Fs(i)&&(Array.isArray(i)||!(i instanceof Map)&&ec()in i)}function Fs(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Zr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function V_(i,s,a,l){const c=Ie();return Zr(c,Xi(),s)&&(xt(),bn(vn(),c,i,s,a,l)),V_}function $_(i,s,a,l,c,g,_,w){const T=Ie(),A=xt(),S=i+20,k=A.firstCreatePass?function em(i,s,a,l,c,g,_,w,T){const A=s.consts,S=Vu(s,i,4,_||null,Ar(A,w));b_(s,a,S,Ar(A,T)),vl(s,S);const k=S.tViews=Uf(2,S,l,c,g,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,A,T,s,a,l,c,g,_):A.data[S];Sr(k,!1);const $=T[11].createComment("");ta(A,T,$,k),hn($,T),Gg(T,T[S]=j0($,T,$,k)),Yi(k)&&y_(A,T,k),null!=_&&__(T,k,w)}function Zf(i,s=Je.Default){const a=Ie();return null===a?z(i,s):Dl(an(),a,J(i),s)}function am(){throw new Error("invalid")}function X_(i,s,a){const l=Ie();return Zr(l,Xi(),s)&&ls(xt(),vn(),l,i,s,l[11],a,!1),X_}function um(i,s,a,l,c){const _=c?"class":"style";Bf(i,a,s.inputs[_],_,l)}function ev(i,s,a,l){const c=Ie(),g=xt(),_=20+i,w=c[11],T=c[_]=Xo(w,s,function Xc(){return pt.lFrame.currentNamespace}()),A=g.firstCreatePass?function _w(i,s,a,l,c,g,_){const w=s.consts,A=Vu(s,i,2,c,Ar(w,g));return b_(s,a,A,Ar(w,_)),null!==A.attrs&&Wg(A,A.attrs,!1),null!==A.mergedAttrs&&Wg(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,g,c,0,s,a,l):g.data[_];Sr(A,!0);const S=A.mergedAttrs;null!==S&&wl(w,T,S);const k=A.classes;null!==k&&Ld(w,T,k);const $=A.styles;null!==$&&g0(w,T,$),64!=(64&A.flags)&&ta(g,c,T,A),0===function Ta(){return pt.lFrame.elementDepthCount}()&&hn(T,c),function ba(){pt.lFrame.elementDepthCount++}(),Yi(A)&&(y_(g,c,A),m_(g,A,c)),null!==l&&__(c,A)}function tv(){let i=an();Ji()?lu():(i=i.parent,Sr(i,!1));const s=i;!function Ro(){pt.lFrame.elementDepthCount--}();const a=xt();a.firstCreatePass&&(vl(a,i),Fc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function td(i){return 0!=(16&i.flags)}(s)&&um(a,s,Ie(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Xs(i){return 0!=(32&i.flags)}(s)&&um(a,s,Ie(),s.stylesWithoutHost,!1)}function vw(i,s,a,l){ev(i,s,a,l),tv()}function nv(i,s,a){const l=Ie(),c=xt(),g=i+20,_=c.firstCreatePass?function $u(i,s,a,l,c){const g=s.consts,_=Ar(g,l),w=Vu(s,i,8,"ng-container",_);return null!==_&&Wg(w,_,!0),b_(s,a,w,Ar(g,c)),null!==s.queries&&s.queries.elementStart(s,w),w}(g,c,l,s,a):c.data[g];Sr(_,!0);const w=l[g]=l[11].createComment("");ta(c,l,w,_),hn(w,l),Yi(_)&&(y_(c,l,_),m_(c,_,l)),null!=a&&__(l,_)}function Qa(){let i=an();const s=xt();Ji()?lu():(i=i.parent,Sr(i,!1)),s.firstCreatePass&&(vl(s,i),Fc(i)&&s.queries.elementEnd(i))}function ww(){return Ie()}function rv(i){return!!i&&"function"==typeof i.then}function Tw(i){return!!i&&"function"==typeof i.subscribe}const Zd=Tw;function ic(i,s,a,l){const c=Ie(),g=xt(),_=an();return function iv(i,s,a,l,c,g,_,w){const T=Yi(l),S=i.firstCreatePass&&z0(i),k=s[8],$=q0(s);let W=!0;if(3&l.type||w){const xe=xn(l,s),Ye=w?w(xe):xe,be=$.length,Qe=w?Bt=>w(on(Bt[l.index])):l.index;if(Kt(a)){let Bt=null;if(!w&&T&&(Bt=function Yf(i,s,a,l){const c=i.cleanup;if(null!=c)for(let g=0;g<c.length-1;g+=2){const _=c[g];if(_===a&&c[g+1]===l){const w=s[7],T=c[g+2];return w.length>T?w[T]:null}"string"==typeof _&&(g+=2)}return null}(i,s,c,l.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=g,Bt.__ngLastListenerFn__=g,W=!1;else{g=lm(l,s,k,g,!1);const Jt=a.listen(Ye,c,g);$.push(g,Jt),S&&S.push(c,Qe,be,be+1)}}else g=lm(l,s,k,g,!0),Ye.addEventListener(c,g,_),$.push(g),S&&S.push(c,Qe,be,_)}else g=lm(l,s,k,g,!1);const de=l.outputs;let Ce;if(W&&null!==de&&(Ce=de[c])){const xe=Ce.length;if(xe)for(let Ye=0;Ye<xe;Ye+=2){const vs=s[Ce[Ye]][Ce[Ye+1]].subscribe(g),el=$.length;$.push(g,vs),S&&S.push(c,l.index,el,-(el+1))}}}(g,c,c[11],_,i,s,!!a,l),ic}function Dw(i,s,a,l){try{return!1!==a(l)}catch(c){return K0(i,c),!1}}function lm(i,s,a,l,c){return function g(_){if(_===Function)return l;const w=2&i.flags?Cr(i.index,s):s;0==(32&s[2])&&C_(w);let T=Dw(s,0,l,_),A=g.__ngNextListenerFn__;for(;A;)T=Dw(s,0,A,_)&&T,A=A.__ngNextListenerFn__;return c&&!1===T&&(_.preventDefault(),_.returnValue=!1),T}}function sv(i=1){return function Jc(i){return(pt.lFrame.contextLView=function sg(i,s){for(;i>0;)s=s[15],i--;return s}(i,pt.lFrame.contextLView))[8]}(i)}function uv(i,s,a,l,c){const g=i[a+1],_=null===s;let w=l?fo(g):qa(g),T=!1;for(;0!==w&&(!1===T||_);){const S=i[w+1];dm(i[w],s)&&(T=!0,i[w+1]=l?s_(S):Ug(S)),w=l?fo(S):qa(S)}T&&(i[a+1]=l?Ug(g):s_(g))}function dm(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&no(i,s)>=0}const lr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Rw(i){return i.substring(lr.key,lr.keyEnd)}function Nw(i,s){const a=lr.textEnd;return a===s?-1:(s=lr.keyEnd=function fm(i,s,a){for(;s<a&&i.charCodeAt(s)>32;)s++;return s}(i,lr.key=s,a),sc(i,s,a))}function sc(i,s,a){for(;s<a&&i.charCodeAt(s)<=32;)s++;return s}function lv(i,s,a){return yo(i,s,a,!1),lv}function cv(i,s){return yo(i,s,null,!0),cv}function kw(i){!function _o(i,s,a,l){const c=xt(),g=yi(2);c.firstUpdatePass&&Lw(c,null,g,l);const _=Ie();if(a!==Nt&&Zr(_,g,a)){const w=c.data[Jn()];if(fv(w,l)&&!Fw(c,g)){let T=l?w.classesWithoutHost:w.stylesWithoutHost;null!==T&&(a=ue(T,a||"")),um(c,w,_,a,l)}else!function Bw(i,s,a,l,c,g,_,w){c===Nt&&(c=L);let T=0,A=0,S=0<c.length?c[0]:null,k=0<g.length?g[0]:null;for(;null!==S||null!==k;){const $=T<c.length?c[T+1]:void 0,W=A<g.length?g[A+1]:void 0;let Ce,de=null;S===k?(T+=2,A+=2,$!==W&&(de=k,Ce=W)):null===k||null!==S&&S<k?(T+=2,de=S):(A+=2,de=k,Ce=W),null!==de&&TI(i,s,a,l,de,Ce,_,w),S=T<c.length?c[T]:null,k=A<g.length?g[A]:null}}(c,w,_,_[11],_[g+1],_[g+1]=function wI(i,s,a){if(null==a||""===a)return L;const l=[],c=Ko(a);if(Array.isArray(c))for(let g=0;g<c.length;g++)i(l,c[g],!0);else if("object"==typeof c)for(const g in c)c.hasOwnProperty(g)&&i(l,g,c[g]);else"string"==typeof c&&s(l,c);return l}(i,s,a),l,g)}}(Xn,sa,i,!0)}function sa(i,s){for(let a=function pI(i){return function xw(i){lr.key=0,lr.keyEnd=0,lr.value=0,lr.valueEnd=0,lr.textEnd=i.length}(i),Nw(i,sc(i,0,lr.textEnd))}(s);a>=0;a=Nw(s,a))Xn(i,Rw(s),!0)}function yo(i,s,a,l){const c=Ie(),g=xt(),_=yi(2);g.firstUpdatePass&&Lw(g,i,_,l),s!==Nt&&Zr(c,_,s)&&TI(g,g.data[Jn()],c,c[11],i,c[_+1]=function jw(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=oe(Ko(i)))),i}(s,a),l,_)}function Fw(i,s){return s>=i.expandoStartIndex}function Lw(i,s,a,l){const c=i.data;if(null===c[a+1]){const g=c[Jn()],_=Fw(i,a);fv(g,l)&&null===s&&!_&&(s=!1),s=function _I(i,s,a,l){const c=Ca(i);let g=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=tp(a=dv(null,i,s,a,l),s.attrs,l),g=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=dv(c,i,s,a,l),null===g){let T=function vI(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==qa(l))return i[fo(l)]}(i,s,l);void 0!==T&&Array.isArray(T)&&(T=dv(null,i,s,T[1],l),T=tp(T,s.attrs,l),function Vw(i,s,a,l){i[fo(a?s.classBindings:s.styleBindings)]=l}(i,s,l,T))}else g=function EI(i,s,a){let l;const c=s.directiveEnd;for(let g=1+s.directiveStylingLast;g<c;g++)l=tp(l,i[g].hostAttrs,a);return tp(l,s.attrs,a)}(i,s,l)}return void 0!==g&&(l?s.residualClasses=g:s.residualStyles=g),a}(c,g,s,l),function Mw(i,s,a,l,c,g){let _=g?s.classBindings:s.styleBindings,w=fo(_),T=qa(_);i[l]=a;let S,A=!1;if(Array.isArray(a)){const k=a;S=k[1],(null===S||no(k,S)>0)&&(A=!0)}else S=a;if(c)if(0!==T){const $=fo(i[w+1]);i[l+1]=Vg($,w),0!==$&&(i[$+1]=i_(i[$+1],l)),i[w+1]=function r_(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=Vg(w,0),0!==w&&(i[w+1]=i_(i[w+1],l)),w=l;else i[l+1]=Vg(T,0),0===w?w=l:i[T+1]=i_(i[T+1],l),T=l;A&&(i[l+1]=Ug(i[l+1])),uv(i,S,l,!0),uv(i,S,l,!1),function ep(i,s,a,l,c){const g=c?i.residualClasses:i.residualStyles;null!=g&&"string"==typeof s&&no(g,s)>=0&&(a[l+1]=s_(a[l+1]))}(s,S,i,l,g),_=Vg(w,T),g?s.classBindings=_:s.styleBindings=_}(c,g,s,a,_,l)}}function dv(i,s,a,l,c){let g=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(g=s[w],l=tp(l,g.hostAttrs,c),g!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function tp(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let g=0;g<s.length;g++){const _=s[g];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Xn(i,_,!!a||s[++g]))}return void 0===i?null:i}function TI(i,s,a,l,c,g,_,w){if(!(3&s.type))return;const T=i.data,A=T[w+1];np(function E0(i){return 1==(1&i)}(A)?hv(T,s,a,c,qa(A),_):void 0)||(np(g)||function n_(i){return 2==(2&i)}(A)&&(g=hv(T,null,a,c,w,_)),function sD(i,s,a,l,c){const g=Kt(i);if(s)c?g?i.addClass(a,l):a.classList.add(l):g?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:Bi.DashCase;if(null==c)g?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof c&&c.endsWith("!important");w&&(c=c.slice(0,-10),_|=Bi.Important),g?i.setStyle(a,l,c,_):a.style.setProperty(l,c,w?"important":"")}}}(l,_,Hn(Jn(),a),c,g))}function hv(i,s,a,l,c,g){const _=null===s;let w;for(;c>0;){const T=i[c],A=Array.isArray(T),S=A?T[1]:T,k=null===S;let $=a[c+1];$===Nt&&($=k?L:void 0);let W=k?Tu($,l):S===l?$:void 0;if(A&&!np(W)&&(W=Tu(T,l)),np(W)&&(w=W,_))return w;const de=i[c+1];c=_?fo(de):qa(de)}if(null!==s){let T=g?s.residualClasses:s.residualStyles;null!=T&&(w=Tu(T,l))}return w}function np(i){return void 0!==i}function fv(i,s){return 0!=(i.flags&(s?16:32))}function $w(i,s=""){const a=Ie(),l=xt(),c=i+20,g=l.firstCreatePass?Vu(l,c,1,s,null):l.data[c],_=a[c]=function Ou(i,s){return Kt(i)?i.createText(s):i.createTextNode(s)}(a[11],s);ta(l,a,_,g),Sr(g,!1)}function pv(i){return mm("",i,""),pv}function mm(i,s,a){const l=Ie(),c=function nc(i,s,a,l){return Zr(i,Xi(),a)?s+K(a)+l:Nt}(l,i,s,a);return c!==Nt&&Ka(l,Jn(),c),mm}function wv(i,s,a){const l=Ie();if(Zr(l,Xi(),s)){const g=xt(),_=vn();ls(g,_,l,i,s,function W0(i,s,a){return(null===i||Ri(i))&&(a=function qh(i){for(;Array.isArray(i);){if("object"==typeof i[1])return i;i=i[0]}return null}(a[s.index])),a[11]}(Ca(g.data),_,l),a,!0)}return wv}const Gu=void 0;var kI=["en",[["a","p"],["AM","PM"],Gu],[["AM","PM"],Gu,Gu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gu,"{1} 'at' {0}",Gu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function PI(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Qd={};function Tv(i){const s=function FI(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=nT(s);if(a)return a;const l=s.split("-")[0];if(a=nT(l),a)return a;if("en"===l)return kI;throw new Error(`Missing locale data for the locale "${i}".`)}function bv(i){return Tv(i)[mt.PluralCase]}function nT(i){return i in Qd||(Qd[i]=ft.ng&&ft.ng.common&&ft.ng.common.locales&&ft.ng.common.locales[i]),Qd[i]}var mt=(()=>((mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt))();const Jd="en-US";let qu=Jd;function nh(i,s,a,l,c){if(i=J(i),Array.isArray(i))for(let g=0;g<i.length;g++)nh(i[g],s,a,l,c);else{const g=xt(),_=Ie();let w=Ql(i)?i:J(i.provide),T=Zg(i);const A=an(),S=1048575&A.providerIndexes,k=A.directiveStart,$=A.providerIndexes>>20;if(Ql(i)||!i.multi){const W=new En(T,c,Zf),de=jv(w,s,c?S:S+$,k);-1===de?(Gr(Fo(A,_),g,w),up(g,i,s.length),s.push(w),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(W),_.push(W)):(a[de]=W,_[de]=W)}else{const W=jv(w,s,S+$,k),de=jv(w,s,S,S+$),Ce=W>=0&&a[W],xe=de>=0&&a[de];if(c&&!xe||!c&&!Ce){Gr(Fo(A,_),g,w);const Ye=function Hv(i,s,a,l,c){const g=new En(i,a,Zf);return g.multi=[],g.index=s,g.componentProviders=0,TT(g,c,l&&!a),g}(c?QI:bT,a.length,c,l,T);!c&&xe&&(a[de].providerFactory=Ye),up(g,i,s.length,0),s.push(w),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Ye),_.push(Ye)}else up(g,i,W>-1?W:de,TT(a[c?de:W],T,!c&&l));!c&&l&&xe&&a[de].componentProviders++}}}function up(i,s,a,l){const c=Ql(s),g=function zD(i){return!!i.useClass}(s);if(c||g){const T=(g?J(s.useClass):s).prototype.ngOnDestroy;if(T){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[l,T]):A[S+1].push(l,T)}else A.push(a,T)}}}function TT(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function jv(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function bT(i,s,a,l){return $v(this.multi,[])}function QI(i,s,a,l){const c=this.multi;let g;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=Gt(a,a[1],this.providerFactory.index,l);g=w.slice(0,_),$v(c,g);for(let T=_;T<w.length;T++)g.push(w[T])}else g=[],$v(c,g);return g}function $v(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Pm(i,s=[]){return a=>{a.providersResolver=(l,c)=>function Yr(i,s,a){const l=xt();if(l.firstCreatePass){const c=Ri(i);nh(a,l.data,l.blueprint,c,!0),nh(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class km{}class qv{resolveComponentFactory(s){throw function DT(i){const s=Error(`No component factory found for ${oe(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let ac=(()=>{class i{}return i.NULL=new qv,i})();function CT(){return rh(an(),Ie())}function rh(i,s){return new Ja(xn(i,s))}let Ja=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=CT,i})();function AT(i){return i instanceof Ja?i.nativeElement:i}class zv{}let Fm=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function tC(){const i=Ie(),a=Cr(an().index,i);return function eC(i){return i[11]}(hi(a)?a:i)}(),i})(),ih=(()=>{class i{}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:()=>null}),i})();class ST{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const MT=new ST("13.1.3"),Xa={};function lp(i,s,a,l,c=!1){for(;null!==a;){const g=s[a.index];if(null!==g&&l.push(on(g)),fi(g))for(let w=10;w<g.length;w++){const T=g[w],A=T[1].firstChild;null!==A&&lp(T[1],T,A,l)}const _=a.type;if(8&_)lp(i,s,a.child,l);else if(32&_){const w=Hl(a,s);let T;for(;T=w();)l.push(T)}else if(16&_){const w=Od(s,a);if(Array.isArray(w))l.push(...w);else{const T=Gl(s[16]);lp(T[1],T,w,l,!0)}}a=c?a.projectionNext:a.next}return l}class Ku{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return lp(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(fi(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(v(s,l),wu(a,l))}this._attachedToViewContainer=!1}C(this._lView[1],this._lView)}onDestroy(s){ID(this._lView[1],this._lView,null,s)}markForCheck(){C_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){A_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function qg(i,s,a){Da(!0);try{A_(i,s,a)}finally{Da(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Pg(i,s){Fd(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=s}}class RT extends Ku{constructor(s){super(s),this._view=s}detectChanges(){H0(this._view)}checkNoChanges(){!function G0(i){Da(!0);try{H0(i)}finally{Da(!1)}}(this._view)}get context(){return null}}class sh extends ac{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Zn(s);return new oh(a,this.ngModule)}}function Wv(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const NT=new Xt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>xr});class oh extends km{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function _0(i){return i.map(cD).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Wv(this.componentDef.inputs)}get outputs(){return Wv(this.componentDef.outputs)}create(s,a,l,c){const g=(c=c||this.ngModule)?function cp(i,s){return{get:(a,l,c)=>{const g=i.get(a,Xa,c);return g!==Xa||l===Xa?g:s.get(a,l,c)}}}(s,c.injector):s,_=g.get(zv,As),w=g.get(ih,null),T=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=l?function E_(i,s,a){if(Kt(i))return i.selectRootElement(s,a===Rt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(T,l,this.componentDef.encapsulation):Xo(_.createRenderer(null,this.componentDef),A,function bi(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(A)),k=this.componentDef.onPush?576:528,$=function iw(i,s){return{components:[],scheduler:i||xr,clean:jD,playerHandler:s||null,flags:0}}(),W=Uf(0,null,null,1,0,null,null,null,null,null),de=Ud(null,W,$,k,null,null,_,T,w,g);let Ce,xe;ko(de);try{const Ye=function P_(i,s,a,l,c,g){const _=a[1];a[20]=i;const T=Vu(_,20,2,"#host",null),A=T.mergedAttrs=s.hostAttrs;null!==A&&(Wg(T,A,!0),null!==i&&(wl(c,i,A),null!==T.classes&&Ld(c,i,T.classes),null!==T.styles&&g0(c,i,T.styles)));const S=l.createRenderer(i,s),k=Ud(a,v_(s),null,s.onPush?64:16,a[20],T,l,S,g||null,null);return _.firstCreatePass&&(Gr(Fo(T,a),_,s.type),D_(_,T),U0(T,a.length,1)),Gg(a,k),a[20]=k}(S,this.componentDef,de,_,T);if(S)if(l)wl(T,S,["ng-version",MT.full]);else{const{attrs:be,classes:Qe}=function dD(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let g=i[l];if("string"==typeof g)2===c?""!==g&&s.push(g,i[++l]):8===c&&a.push(g);else{if(!ho(c))break;c=g}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);be&&wl(T,S,be),Qe&&Qe.length>0&&Ld(T,S,Qe.join(" "))}if(xe=So(W,20),void 0!==a){const be=xe.projection=[];for(let Qe=0;Qe<this.ngContentSelectors.length;Qe++){const Bt=a[Qe];be.push(null!=Bt?Array.from(Bt):null)}}Ce=function k_(i,s,a,l,c){const g=a[1],_=function P0(i,s,a){const l=an();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),B0(i,l,s,Wa(i,s,1,null),a));const c=Gt(s,i,l.directiveStart,l);hn(c,s);const g=xn(l,s);return g&&hn(g,s),c}(g,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(T=>T(_,s)),s.contentQueries){const T=an();s.contentQueries(1,_,T.directiveStart)}const w=an();return!g.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(On(w.index),k0(a[1],w,0,w.directiveStart,w.directiveEnd,s),F0(s,_)),_}(Ye,this.componentDef,de,$,[ZD]),Kl(W,de,null)}finally{gu()}return new PT(this.componentType,Ce,rh(xe,de),de,xe)}}class PT extends class JI{}{constructor(s,a,l,c,g){super(),this.location=l,this._rootLView=c,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new RT(c),this.componentType=s}get injector(){return new eo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class aa{}class Lm{}const Zu=new Map;class fp extends aa{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new sh(this);const l=Yn(s);this._bootstrapComponents=Ps(l.bootstrap),this._r3Injector=M_(s,a,[{provide:aa,useValue:this},{provide:ac,useValue:this.componentFactoryResolver}],oe(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=ks.THROW_IF_NOT_FOUND,l=Je.Default){return s===ks||s===aa||s===Z0?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class pp extends Lm{constructor(s){super(),this.moduleType=s,null!==Yn(s)&&function hp(i){const s=new Set;!function a(l){const c=Yn(l,!0),g=c.id;null!==g&&(function dp(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${oe(s)} vs ${oe(s.name)}`)}(g,Zu.get(g),l),Zu.set(g,l));const _=Ps(c.imports);for(const w of _)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new fp(this.moduleType,s)}}function Yv(i){return s=>{setTimeout(i,void 0,s)}}const ua=class Gm extends p.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,g,_;let w=s,T=a||(()=>null),A=l;if(s&&"object"==typeof s){const k=s;w=null===(c=k.next)||void 0===c?void 0:c.bind(k),T=null===(g=k.error)||void 0===g?void 0:g.bind(k),A=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(T=Yv(T),w&&(w=Yv(w)),A&&(A=Yv(A)));const S=super.subscribe({next:w,error:T,complete:A});return s instanceof Y.w0&&s.add(S),S}};function _p(){return this._results[ec()]()}class dc{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ec(),l=dc.prototype;l[a]||(l[a]=_p)}get changes(){return this._changes||(this._changes=new ua)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Pn(s);(this._changesDetected=!function ld(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],g=s[l];if(a&&(c=a(c),g=a(g)),g!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let vp=(()=>{class i{}return i.__NG_ELEMENT_ID__=oC,i})();const GT=vp,sC=class extends GT{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Ud(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(l[19]=g.createEmbeddedView(a)),Kl(a,l,s),new Ku(l)}};function oC(){return qm(an(),Ie())}function qm(i,s){return 4&i.type?new sC(s,i,rh(i,s)):null}let zm=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ep,i})();function Ep(){return hc(an(),Ie())}const Qu=zm,Qv=class extends Qu{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return rh(this._hostTNode,this._hostLView)}get injector(){return new eo(this._hostTNode,this._hostLView)}get parentInjector(){const s=Rr(this._hostTNode,this._hostLView);if(Xh(s)){const a=Pa(s,this._hostLView),l=Oa(s);return new eo(a[1].data[l+8],a)}return new eo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Jv(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,g){const _=s&&!function _i(i){return"function"==typeof i}(s);let w;if(_)w=a;else{const k=a||{};w=k.index,l=k.injector,c=k.projectableNodes,g=k.ngModuleRef}const T=_?s:new oh(Zn(s)),A=l||this.parentInjector;if(!g&&null==T.ngModule&&A){const k=A.get(aa,null);k&&(g=k)}const S=T.create(A,c,void 0,g);return this.insert(S.hostView,w),S}insert(s,a){const l=s._lView,c=l[1];if(function pl(i){return fi(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=l[3],$=new Qv(k,k[6],k[3]);$.detach($.indexOf(s))}}const g=this._adjustIndex(a),_=this._lContainer;!function y(i,s,a,l){const c=10+l,g=a.length;l>0&&(a[c-1][4]=s),l<g-10?(s[4]=a[c],Ml(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function h(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(c,l,_,g);const w=Pd(g,_),T=l[11],A=$i(T,_[7]);return null!==A&&function Pu(i,s,a,l,c,g){l[0]=c,l[6]=s,Fd(i,l,a,1,c,g)}(c,_[6],T,l,A,w),s.attachToViewContainerRef(),Ml(Wm(_),g,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Jv(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=v(this._lContainer,a);l&&(wu(Wm(this._lContainer),a),C(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=v(this._lContainer,a);return l&&null!=wu(Wm(this._lContainer),a)?new Ku(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function Jv(i){return i[8]}function Wm(i){return i[8]||(i[8]=[])}function hc(i,s){let a;const l=s[i.index];if(fi(l))a=l;else{let c;if(8&i.type)c=on(l);else{const g=s[11];c=g.createComment("");const _=xn(i,s);We(g,$i(g,_),c,function Or(i,s){return Kt(i)?i.nextSibling(s):s.nextSibling}(g,_),!1)}s[i.index]=a=j0(l,s,c,i),Gg(s,a)}return new Qv(a,i,s)}class Xv{constructor(s){this.queryList=s,this.matches=null}clone(){return new Xv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Km{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let g=0;g<l;g++){const _=a.getByIndex(g);c.push(this.queries[_.indexInDeclarationView].clone())}return new Km(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==nr(s,a).matches&&this.queries[a].setDirty()}}class eE{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class wp{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(s,c);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new wp(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Tp{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Tp(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const g=l[c];this.matchTNodeWithReadOption(s,a,qT(a,g)),this.matchTNodeWithReadOption(s,a,La(a,s,g,!1,!1))}else l===vp?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,La(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Ja||c===zm||c===vp&&4&a.type)this.addMatch(a.index,-2);else{const g=La(a,s,c,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function qT(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function tE(i,s,a,l){return-1===a?function zT(i,s){return 11&i.type?rh(i,s):4&i.type?qm(i,s):null}(s,i):-2===a?function cC(i,s,a){return a===Ja?rh(s,i):a===vp?qm(s,i):a===zm?hc(s,i):void 0}(i,s,l):Gt(i,i[1],a,s)}function WT(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const g=i.data,_=a.matches,w=[];for(let T=0;T<_.length;T+=2){const A=_[T];w.push(A<0?null:tE(s,g[A],_[T+1],a.metadata.read))}c.matches=w}return c.matches}function nE(i,s,a,l){const c=i.queries.getByIndex(a),g=c.matches;if(null!==g){const _=WT(i,s,c,a);for(let w=0;w<g.length;w+=2){const T=g[w];if(T>0)l.push(_[w/2]);else{const A=g[w+1],S=s[-T];for(let k=10;k<S.length;k++){const $=S[k];$[17]===$[3]&&nE($[1],$,A,l)}if(null!==S[9]){const k=S[9];for(let $=0;$<k.length;$++){const W=k[$];nE(W[1],W,A,l)}}}}}return l}function bp(i){const s=Ie(),a=xt(),l=Aa();Sa(l+1);const c=nr(a,l);if(i.dirty&&Gn(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const g=c.crossesNgTemplate?nE(a,s,l,[]):WT(a,s,c,l);i.reset(g,AT),i.notifyOnChanges()}return!0}return!1}function Ip(i,s,a,l){const c=xt();if(c.firstCreatePass){const g=an();(function uh(i,s,a){null===i.queries&&(i.queries=new wp),i.queries.track(new Tp(s,a))})(c,new eE(s,a,l),g.index),function dC(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function ah(i,s,a){const l=new dc(4==(4&a));ID(i,s,l,l.destroy),null===s[19]&&(s[19]=new Km),s[19].queries.push(new Xv(l))}(c,Ie(),a)}function Zm(){return function KT(i,s){return i[19].queries[s].queryList}(Ie(),Aa())}function nr(i,s){return i.queries.getByIndex(s)}function mh(...i){}const Le=new Xt("Application Initializer");let Dn=(()=>{class i{constructor(a){this.appInits=a,this.resolve=mh,this.reject=mh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const g=this.appInits[c]();if(rv(g))a.push(g);else if(Zd(g)){const _=new Promise((w,T)=>{g.subscribe({complete:w,error:T})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(z(Le,8))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();const yh=new Xt("AppId"),lt={provide:yh,useFactory:function hE(){return`${Et()}${Et()}${Et()}`},deps:[]};function Et(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ab=new Xt("Platform Initializer"),je=new Xt("Platform ID"),ae=new Xt("appBootstrapListener");let vr=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();const Np=new Xt("LocaleId"),ub=new Xt("DefaultCurrencyCode");class EC{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let ey=(()=>{class i{compileModuleSync(a){return new pp(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=Ps(Yn(a).declarations).reduce((_,w)=>{const T=Zn(w);return T&&_.push(new oh(T)),_},[]);return new EC(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();const ys=(()=>Promise.resolve(0))();function fE(i){"undefined"==typeof Zone?ys.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Tt{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ua(!1),this.onMicrotaskEmpty=new ua(!1),this.onStable=new ua(!1),this.onError=new ua(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function lb(){let i=ft.requestAnimationFrame,s=ft.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function St(i){const s=()=>{!function Fr(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(ft,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,ny(i),i.isCheckStableRunning=!0,ty(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),ny(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,g,_,w)=>{try{return Ju(i),a.invokeTask(c,g,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||i.shouldCoalesceRunChangeDetection)&&s(),pE(i)}},onInvoke:(a,l,c,g,_,w,T)=>{try{return Ju(i),a.invoke(c,g,_,w,T)}finally{i.shouldCoalesceRunChangeDetection&&s(),pE(i)}},onHasTask:(a,l,c,g)=>{a.hasTask(c,g),l===c&&("microTask"==g.change?(i._hasPendingMicrotasks=g.microTask,ny(i),ty(i)):"macroTask"==g.change&&(i.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,c,g)=>(a.handleError(c,g),i.runOutsideAngular(()=>i.onError.emit(g)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Tt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Tt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+c,s,_h,mh,mh);try{return g.runTask(_,a,l)}finally{g.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const _h={};function ty(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function ny(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Ju(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function pE(i){i._nesting--,ty(i)}class xp{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ua,this.onMicrotaskEmpty=new ua,this.onStable=new ua,this.onError=new ua}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let Qt=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Tt.assertNotInAngularZone(),fE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fE(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(z(Tt))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})(),cb=(()=>{class i{constructor(){this._applications=new Map,gE.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return gE.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();class Qr{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function vh(i){gE=i}let fn,gE=new Qr;const yc=new Xt("AllowMultipleToken");class mE{constructor(s,a){this.name=s,this.token=a}}function Eh(i,s,a=[]){const l=`Platform: ${s}`,c=new Xt(l);return(g=[])=>{let _=_E();if(!_||_.injector.get(yc,!1))if(i)i(a.concat(g).concat({provide:c,useValue:!0}));else{const w=a.concat(g).concat({provide:c,useValue:!0},{provide:wt,useValue:"platform"});!function db(i){if(fn&&!fn.destroyed&&!fn.injector.get(yc,!1))throw new Oe(400,"");fn=i.get(rt);const s=i.get(ab,null);s&&s.forEach(a=>a())}(ks.create({providers:w,name:l}))}return function _c(i){const s=_E();if(!s)throw new Oe(401,"");return s}()}}function _E(){return fn&&!fn.destroyed?fn:null}let rt=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function vc(i,s){let a;return a="noop"===i?new xp:("zone.js"===i?void 0:i)||new Tt({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),T=[{provide:Tt,useValue:w}];return w.run(()=>{const A=ks.create({providers:T,parent:this.injector,name:a.moduleType.name}),S=a.create(A),k=S.injector.get(Ru,null);if(!k)throw new Oe(402,"");return w.runOutsideAngular(()=>{const $=w.onError.subscribe({next:W=>{k.handleError(W)}});S.onDestroy(()=>{ry(this._modules,S),$.unsubscribe()})}),function ca(i,s,a){try{const l=a();return rv(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,w,()=>{const $=S.injector.get(Dn);return $.runInitializers(),$.donePromise.then(()=>(function Tm(i){at(i,"Expected localeId to be defined"),"string"==typeof i&&(qu=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Np,Jd)||Jd),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=wh({},l);return function TC(i,s,a){const l=new pp(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,c))}_moduleDoBootstrap(a){const l=a.injector.get(da);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Oe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(z(ks))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();function wh(i,s){return Array.isArray(s)?s.reduce(wh,i):Object.assign(Object.assign({},i),s)}let da=(()=>{class i{constructor(a,l,c,g,_){this._zone=a,this._injector=l,this._exceptionHandler=c,this._componentFactoryResolver=g,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),T=new O.y(A=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Tt.assertNotInAngularZone(),fE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Tt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{S.unsubscribe(),k.unsubscribe()}});this.isStable=(0,se.T)(w,T.pipe((0,ne.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Oe(405,"");let c;c=a instanceof km?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const g=function cr(i){return i.isBoundToModule}(c)?void 0:this._injector.get(aa),w=c.create(ks.NULL,[],l||c.selector,g),T=w.location.nativeElement,A=w.injector.get(Qt,null),S=A&&w.injector.get(cb);return A&&S&&S.registerApplication(T,A),w.onDestroy(()=>{this.detachView(w.hostView),ry(this.components,w),S&&S.unregisterApplication(T)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;ry(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(ae,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(z(Tt),z(ks),z(Ru),z(ac),z(Dn))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();function ry(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Op=!0,sy=!1;function EE(){return sy=!0,Op}function hb(){if(sy)throw new Error("Cannot enable prod mode after platform setup.");Op=!1}let ii=(()=>{class i{}return i.__NG_ELEMENT_ID__=fb,i})();function fb(i){return function Rn(i,s,a){if(Nn(i)&&!a){const l=Cr(i.index,s);return new Ku(l,l)}return 47&i.type?new Ku(s[16],s):null}(an(),Ie(),16==(16&i))}class Fp{constructor(){}supports(s){return Hd(s)}create(s){return new ME(s)}}const SE=(i,s)=>s;class ME{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||SE}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,g=null;for(;a||l;){const _=!l||a&&a.currentIndex<NE(l,c,g)?a:l,w=NE(_,c,g),T=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{g||(g=[]);const A=w-c,S=T-c;if(A!=S){for(let $=0;$<A;$++){const W=$<g.length?g[$]:g[$]=0,de=W+$;S<=de&&de<A&&(g[$]=W+1)}g[_.previousIndex]=S-A}}w!==T&&s(_,w,T)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Hd(s))throw new Oe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,g,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)g=s[w],_=this._trackByFn(w,g),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,g,_,w)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,_,w),l=!0),a=a._next}else c=0,function Kr(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[ec()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{_=this._trackByFn(c,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,c)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let g;return null===s?g=this._itTail:(g=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,g,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,g,c)):s=this._addAfter(new RE(a,l),g,c),s}_verifyReinsertion(s,a,l,c){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?s=this._reinsertAfter(g,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,g=s._nextRemoved;return null===c?this._removalsHead=g:c._nextRemoved=g,null===g?this._removalsTail=c:g._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new _s),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _s),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class RE{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bh{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class _s{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new bh,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function NE(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class Dh{constructor(){}supports(s){return s instanceof Map||Fs(s)}create(){return new gb}}class gb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Fs(s)))throw new Oe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const g=c._prev,_=c._next;return g&&(g._next=_),_&&(_._prev=g),c._next=null,c._prev=null,c}const l=new xE(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class xE{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ih(){return new Lp([new Fp])}let Lp=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Ih()),deps:[[i,new _r,new en]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Oe(901,"")}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:Ih}),i})();function OE(){return new Vp([new Dh])}let Vp=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||OE()),deps:[[i,new _r,new en]]}}find(a){const l=this.factories.find(g=>g.supports(a));if(l)return l;throw new Oe(901,"")}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:OE}),i})();const mb=[new Dh],NC=new Lp([new Fp]),xC=new Vp(mb),Ch=Eh(null,"core",[{provide:je,useValue:"unknown"},{provide:rt,deps:[ks]},{provide:cb,deps:[]},{provide:vr,deps:[]}]),Ah=[{provide:da,useClass:da,deps:[Tt,ks,Ru,ac,Dn]},{provide:NT,deps:[Tt],useFactory:function vb(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:Dn,useClass:Dn,deps:[[new en,Le]]},{provide:ey,useClass:ey,deps:[]},lt,{provide:Lp,useFactory:function bc(){return NC},deps:[]},{provide:Vp,useFactory:function yb(){return xC},deps:[]},{provide:Np,useFactory:function Dc(i){return i||function _b(){return"undefined"!=typeof $localize&&$localize.locale||Jd}()},deps:[[new Mn(Np),new en,new _r]]},{provide:ub,useValue:"USD"}];let Eb=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(z(da))},i.\u0275mod=Ds({type:i}),i.\u0275inj=Wi({providers:Ah}),i})()},3942:(st,De,P)=>{"use strict";P.d(De,{Z:()=>Oe});var p=P(2090),Y=P(4859),O=P(9681),se=P(1877);class ne{constructor(K,te){this._delegate=K,this.firebase=te,(0,O._addComponent)(K,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=K.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this._delegate.automaticDataCollectionEnabled=K}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(K=>{this._delegate.checkDestroyed(),K()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(K,te=O._DEFAULT_ENTRY_NAME){var pe;this._delegate.checkDestroyed();const we=this._delegate.container.getProvider(K);return!we.isInitialized()&&"EXPLICIT"===(null===(pe=we.getComponent())||void 0===pe?void 0:pe.instantiationMode)&&we.initialize(),we.getImmediate({identifier:te})}_removeServiceInstance(K,te=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(K).clearInstance(te)}_addComponent(K){(0,O._addComponent)(this._delegate,K)}_addOrOverwriteComponent(K){(0,O._addOrOverwriteComponent)(this._delegate,K)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ue(){const Ve=function oe(Ve){const K={},te={__esModule:!0,initializeApp:function ge(ze,dt={}){const Q=O.initializeApp(ze,dt);if((0,p.r3)(K,Q.name))return K[Q.name];const fe=new Ve(Q,te);return K[Q.name]=fe,fe},app:we,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Te(ze){const dt=ze.name,Q=dt.replace("-compat","");if(O._registerComponent(ze)&&"PUBLIC"===ze.type){const fe=(me=we())=>{if("function"!=typeof me[Q])throw re.create("invalid-app-argument",{appName:dt});return me[Q]()};void 0!==ze.serviceProps&&(0,p.ZB)(fe,ze.serviceProps),te[Q]=fe,Ve.prototype[Q]=function(...me){return this._getService.bind(this,dt).apply(this,ze.multipleInstances?me:[])}}return"PUBLIC"===ze.type?te[Q]:null},removeApp:function pe(ze){delete K[ze]},useAsService:function et(ze,dt){return"serverAuth"===dt?null:dt},modularAPIs:O}};function we(ze){if(!(0,p.r3)(K,ze=ze||O._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:ze});return K[ze]}return te.default=te,Object.defineProperty(te,"apps",{get:function Be(){return Object.keys(K).map(ze=>K[ze])}}),we.App=Ve,te}(ne);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function K(te){(0,p.ZB)(Ve,te)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Ve}(),B=new se.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=j;!function Ee(Ve){(0,O.registerVersion)("@firebase/app-compat","0.1.17",Ve)}()},9681:(st,De,P)=>{"use strict";P.r(De),P.d(De,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Hs,_DEFAULT_ENTRY_NAME:()=>Kn,_addComponent:()=>rn,_addOrOverwriteComponent:()=>Tr,_apps:()=>nt,_clearComponents:()=>In,_components:()=>wr,_getProvider:()=>li,_registerComponent:()=>Yt,_removeServiceInstance:()=>Wi,deleteApp:()=>ir,getApp:()=>Ki,getApps:()=>Ae,initializeApp:()=>Br,onLog:()=>zt,registerVersion:()=>Jr,setLogLevel:()=>Ln});var p=P(5861),Y=P(4859),O=P(1877),se=P(2090);class ne{constructor(tt){this.container=tt}getPlatformInfoString(){return this.container.getProviders().map(Mt=>{if(function ce(ht){const tt=ht.getComponent();return"VERSION"===(null==tt?void 0:tt.type)}(Mt)){const pn=Mt.getImmediate();return`${pn.library}/${pn.version}`}return null}).filter(Mt=>Mt).join(" ")}}const re="@firebase/app",ue=new O.Yd("@firebase/app"),Kn="[DEFAULT]",at={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nt=new Map,wr=new Map;function rn(ht,tt){try{ht.container.addComponent(tt)}catch(Mt){ue.debug(`Component ${tt.name} failed to register with FirebaseApp ${ht.name}`,Mt)}}function Tr(ht,tt){ht.container.addOrOverwriteComponent(tt)}function Yt(ht){const tt=ht.name;if(wr.has(tt))return ue.debug(`There were multiple attempts to register component ${tt}.`),!1;wr.set(tt,ht);for(const Mt of nt.values())rn(Mt,ht);return!0}function li(ht,tt){return ht.container.getProvider(tt)}function Wi(ht,tt,Mt=Kn){li(ht,tt).clearInstance(Mt)}function In(){wr.clear()}const $t=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class yn{constructor(tt,Mt,pn){this._isDeleted=!1,this._options=Object.assign({},tt),this._config=Object.assign({},Mt),this._name=Mt.name,this._automaticDataCollectionEnabled=Mt.automaticDataCollectionEnabled,this._container=pn,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this.checkDestroyed(),this._automaticDataCollectionEnabled=tt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(tt){this._isDeleted=tt}checkDestroyed(){if(this.isDeleted)throw $t.create("app-deleted",{appName:this._name})}}const Hs="9.6.6";function Br(ht,tt={}){"object"!=typeof tt&&(tt={name:tt});const Mt=Object.assign({name:Kn,automaticDataCollectionEnabled:!1},tt),pn=Mt.name;if("string"!=typeof pn||!pn)throw $t.create("bad-app-name",{appName:String(pn)});const jr=nt.get(pn);if(jr){if((0,se.vZ)(ht,jr.options)&&(0,se.vZ)(Mt,jr.config))return jr;throw $t.create("duplicate-app",{appName:pn})}const Rt=new Y.H0(pn);for(const ut of wr.values())Rt.addComponent(ut);const Xe=new yn(ht,Mt,Rt);return nt.set(pn,Xe),Xe}function Ki(ht=Kn){const tt=nt.get(ht);if(!tt)throw $t.create("no-app",{appName:ht});return tt}function Ae(){return Array.from(nt.values())}function ir(ht){return Je.apply(this,arguments)}function Je(){return(Je=(0,p.Z)(function*(ht){const tt=ht.name;nt.has(tt)&&(nt.delete(tt),yield Promise.all(ht.container.getProviders().map(Mt=>Mt.delete())),ht.isDeleted=!0)})).apply(this,arguments)}function Jr(ht,tt,Mt){var pn;let jr=null!==(pn=at[ht])&&void 0!==pn?pn:ht;Mt&&(jr+=`-${Mt}`);const Rt=jr.match(/\s|\//),Xe=tt.match(/\s|\//);if(Rt||Xe){const ut=[`Unable to register library "${jr}" with version "${tt}":`];return Rt&&ut.push(`library name "${jr}" contains illegal characters (whitespace or "/")`),Rt&&Xe&&ut.push("and"),Xe&&ut.push(`version name "${tt}" contains illegal characters (whitespace or "/")`),void ue.warn(ut.join(" "))}Yt(new Y.wA(`${jr}-version`,()=>({library:jr,version:tt}),"VERSION"))}function zt(ht,tt){if(null!==ht&&"function"!=typeof ht)throw $t.create("invalid-log-argument");(0,O.Am)(ht,tt)}function Ln(ht){(0,O.Ub)(ht)}!function Gs(ht){Yt(new Y.wA("platform-logger",tt=>new ne(tt),"PRIVATE")),Jr(re,"0.7.16",ht),Jr(re,"0.7.16","esm2017"),Jr("fire-js","")}("")},4859:(st,De,P)=>{"use strict";P.d(De,{wA:()=>O,H0:()=>oe});var p=P(5861),Y=P(2090);class O{constructor(j,B,J){this.name=j,this.instanceFactory=B,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const se="[DEFAULT]";class ne{constructor(j,B){this.name=j,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const B=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(B)){const J=new Y.BH;if(this.instancesDeferred.set(B,J),this.isInitialized(B)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:B});Ue&&J.resolve(Ue)}catch(Ue){}}return this.instancesDeferred.get(B).promise}getImmediate(j){var B;const J=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),Ue=null!==(B=null==j?void 0:j.optional)&&void 0!==B&&B;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Ee){if(Ue)return null;throw Ee}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function re(ue){return"EAGER"===ue.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:se})}catch(B){}for(const[B,J]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(B);try{const Ee=this.getOrInitializeService({instanceIdentifier:Ue});J.resolve(Ee)}catch(Ee){}}}}clearInstance(j=se){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,p.Z)(function*(){const B=Array.from(j.instances.values());yield Promise.all([...B.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...B.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=se){return this.instances.has(j)}getOptions(j=se){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:B={}}=j,J=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:J,options:B});for(const[Ee,Oe]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Ee)&&Oe.resolve(Ue);return Ue}onInit(j,B){var J;const Ue=this.normalizeInstanceIdentifier(B),Ee=null!==(J=this.onInitCallbacks.get(Ue))&&void 0!==J?J:new Set;Ee.add(j),this.onInitCallbacks.set(Ue,Ee);const Oe=this.instances.get(Ue);return Oe&&j(Oe,Ue),()=>{Ee.delete(j)}}invokeOnInitCallbacks(j,B){const J=this.onInitCallbacks.get(B);if(J)for(const Ue of J)try{Ue(j,B)}catch(Ee){}}getOrInitializeService({instanceIdentifier:j,options:B={}}){let J=this.instances.get(j);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=j,ue===se?void 0:ue),options:B}),this.instances.set(j,J),this.instancesOptions.set(j,B),this.invokeOnInitCallbacks(J,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,J)}catch(Ue){}var ue;return J||null}normalizeInstanceIdentifier(j=se){return this.component?this.component.multipleInstances?j:se:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const B=this.getProvider(j.name);if(B.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);B.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const B=new ne(j,this);return this.providers.set(j,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(st,De,P)=>{"use strict";P.d(De,{in:()=>Y,Yd:()=>re,Ub:()=>oe,Am:()=>ue});const p=[];var Y=(()=>{return(j=Y||(Y={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Y;var j})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},se=Y.INFO,ne={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ce=(j,B,...J)=>{if(B<j.logLevel)return;const Ue=(new Date).toISOString(),Ee=ne[B];if(!Ee)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Ee](`[${Ue}]  ${j.name}:`,...J)};class re{constructor(B){this.name=B,this._logLevel=se,this._logHandler=ce,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in Y))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...B),this._logHandler(this,Y.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...B),this._logHandler(this,Y.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...B),this._logHandler(this,Y.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...B),this._logHandler(this,Y.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...B),this._logHandler(this,Y.ERROR,...B)}}function oe(j){p.forEach(B=>{B.setLogLevel(j)})}function ue(j,B){for(const J of p){let Ue=null;B&&B.level&&(Ue=O[B.level]),J.userLogHandler=null===j?null:(Ee,Oe,...Ve)=>{const K=Ve.map(te=>{if(null==te)return null;if("string"==typeof te)return te;if("number"==typeof te||"boolean"==typeof te)return te.toString();if(te instanceof Error)return te.message;try{return JSON.stringify(te)}catch(pe){return null}}).filter(te=>te).join(" ");Oe>=(null!=Ue?Ue:Ee.logLevel)&&j({level:Y[Oe].toLowerCase(),message:K,args:Ve,type:Ee.name})}}}},5861:(st,De,P)=>{"use strict";function p(O,se,ne,ce,re,oe,ue){try{var j=O[oe](ue),B=j.value}catch(J){return void ne(J)}j.done?se(B):Promise.resolve(B).then(ce,re)}function Y(O){return function(){var se=this,ne=arguments;return new Promise(function(ce,re){var oe=O.apply(se,ne);function ue(B){p(oe,ce,re,ue,j,"next",B)}function j(B){p(oe,ce,re,ue,j,"throw",B)}ue(void 0)})}}P.d(De,{Z:()=>Y})}},st=>{st(st.s=1373)}]);